{"version":3,"sources":["../node_modules/peerjs/dist sync","backendConfig.js","api/index.js","components/LoginPage/InputFields.jsx","components/Utils/Alert.jsx","components/LoginPage/LoginForm.jsx","components/LoginPage/SignUpForm.jsx","assets/loginPageBackground.svg","components/ProtectedRoute/authenticateUser.js","components/LoginPage/index.jsx","components/MessengerPage/SideNavigation/Conversation.jsx","components/MessengerPage/ChatSection/Header.jsx","components/MessengerPage/ChatSection/MediaContent.jsx","components/MessengerPage/ChatSection/Message.jsx","components/MessengerPage/ChatSection/MessageInput.jsx","assets/videoIconOverlay.png","components/MessengerPage/ChatSection/TypingIndicator.jsx","components/MessengerPage/ChatSection/index.jsx","components/MessengerPage/SideNavigation/LogoutButton.jsx","components/MessengerPage/SideNavigation/UserWithAvatar.jsx","components/MessengerPage/SideNavigation/People.jsx","components/MessengerPage/SideNavigation/SelectionMenu.jsx","components/MessengerPage/SideNavigation/SearchBox/SearchResults.jsx","components/MessengerPage/SideNavigation/SearchBox/index.jsx","components/MessengerPage/SideNavigation/index.jsx","components/MessengerPage/ChangeProfilePicture.jsx","assets/sounds/connecting.mp3","assets/sounds/connected.mp3","assets/sounds/calling.mp3","assets/sounds/callFailed.mp3","assets/sounds/ringing.mp3","assets/sounds/reconnecting.mp3","assets/sounds/connectionLost.mp3","assets/sounds/hangup.mp3","components/MessengerPage/CallSection/CallAlert.jsx","components/MessengerPage/CallSection/ActionButtons.jsx","components/MessengerPage/CallSection/VideoCallHeader.jsx","components/MessengerPage/CallSection/VideoContainer.jsx","components/MessengerPage/CallSection/VideoCallScreen.jsx","components/ProtectedRoute/index.jsx","App.js","index.js"],"names":["webpackEmptyContext","req","e","Error","code","keys","resolve","module","exports","id","config","address","wsAddress","baseURL","axiosInstance","axios","create","headers","interceptors","request","use","url","includes","data","localStorage","getItem","useStyles","makeStyles","form","width","maxWidth","minWidth","formTitle","margin","btn","padding","textTransform","link","textDecoration","alignSelf","divider","height","marginBottom","spinner","position","right","StyledTextField","withStyles","root","TextField","Form","formik","children","classes","onSubmit","handleSubmit","className","Box","display","flexDirection","alignItems","p","bgcolor","boxShadow","borderRadius","FormHeading","Typography","variant","color","align","InputField","name","inputProps","fullWidth","placeholder","aria-label","getFieldProps","error","Boolean","touched","errors","helperText","PasswordField","passwordVisible","setPasswordVisible","type","password","InputProps","endAdornment","InputAdornment","IconButton","onClick","Visibility","VisibilityOff","SubmitButton","loading","Button","CircularProgress","size","FormFooter","linkTo","linkText","Divider","light","to","component","Alert","theme","useTheme","useState","show","setShow","setTimeout","Slide","direction","in","timeout","enter","exit","top","marginRight","palette","main","CheckCircleOutline","htmlColor","InfoOutlined","WarningOutlined","ErrorOutlineOutlined","style","marginLeft","initialValues","username","values","a","setLoggedIn","setLoading","setFormError","post","res","status","window","setItem","accesstoken","state","message","response","validationSchema","yup","required","min","max","matches","trim","LoginForm","alert","formError","loggedIn","useFormik","autoFocus","FormHelperText","firstName","lastName","setRegistered","console","log","SignUpForm","registered","pathname","justifyContent","user","authenticateLoginToken","useStyle","background","backgroundImage","backgroundSize","backgroundPositionY","LoginPage","checked","setChecked","location","useLocation","useEffect","isValid","checkLoggedIn","exact","path","badge","border","backgroundColor","isonline","Badge","messageBadge","buttonRipple","primary","transform","props","ButtonBase","TouchRippleProps","header","backdropFilter","zIndex","largeAvatar","buttonIcon","menu","marginTop","mediaContainer","flexWrap","progressBarContainer","avatar","timestamp","selectedItemsContainer","maxHeight","overflowY","selectedMediasContainer","previewContainer","selectedImage","objectFit","removeBtn","all","textAlign","fontSize","fontWeight","videoContainer","content","backgroundPosition","selectedFilePreviewContainer","fileIcon","fileName","container","dot","animation","from","opacity","ChatSection","logoutText","userAvatar","cursor","button","tab","searchResultsContainer","left","paper","searchForm","paddingLeft","searchInput","text","outline","secondary","breakpoints","down","modal","modal__content","shadows","btnsContainer","greetingText","infoText","fullNameText","usernameText","call_alert","call_animation","webkitBackfaceVisibility","mozBackfaceVisibility","msBackfaceVisibility","backfaceVisibility","callerName","default","button_incoming","actionBtn","webkitBackdropFilter","videoCallHeader","userInfoContainer","headerBtn","wrapper","timer","grey","localVideoContainer","ProtectedRoute","createMuiTheme","xs","sm","md","lg","xl","App","ThemeProvider","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.50ef9386.chunk.js","sourcesContent":["function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 313;","const config = {\r\n  address: \"https://messenger-backend-server.herokuapp.com\",\r\n  wsAddress: \"wss://messenger-backend-server.herokuapp.com\",\r\n};\r\n\r\nexport default config;\r\n","import axios from \"axios\";\r\nimport config from \"../backendConfig\";\r\n\r\nconst baseURL = `${config.address}/api`;\r\n\r\nconst axiosInstance = axios.create({\r\n  baseURL,\r\n  headers: { \"X-Requested-With\": \"XMLHttpRequest\" },\r\n});\r\n\r\naxiosInstance.interceptors.request.use((request) => {\r\n  if (request.url.includes(\"/login\") && request.data) {\r\n    //this is the case if the login is performed with username and password which is contained in the request.data\r\n    return request;\r\n  }\r\n  if (!request.url.includes(\"/userinfo\")) {\r\n    request.headers[\"Authorization\"] = `Bearer ${localStorage.getItem(\r\n      \"accesstoken\"\r\n    )}`;\r\n  }\r\n  return request;\r\n});\r\n\r\nexport default axiosInstance;\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  CircularProgress,\r\n  Divider,\r\n  IconButton,\r\n  InputAdornment,\r\n  makeStyles,\r\n  TextField,\r\n  Typography,\r\n  withStyles,\r\n} from \"@material-ui/core\";\r\nimport { Visibility, VisibilityOff } from \"@material-ui/icons\";\r\n\r\nconst useStyles = makeStyles({\r\n  form: {\r\n    width: \"70%\",\r\n    maxWidth: \"450px\",\r\n    minWidth: \"300px\",\r\n  },\r\n  formTitle: {\r\n    margin: \"0.5em\",\r\n  },\r\n  btn: {\r\n    width: \"fit-content\",\r\n    margin: \"1.5em 0\",\r\n    padding: \"0.7em 4em\",\r\n    textTransform: \"capitalize\",\r\n  },\r\n  link: {\r\n    textDecoration: \"none\",\r\n    alignSelf: \"flex-end\",\r\n  },\r\n  divider: {\r\n    width: \"100%\",\r\n    height: \"1.5px\",\r\n    marginBottom: \"1.5em\",\r\n  },\r\n  spinner: {\r\n    position: \"absolute\",\r\n    right: \"15%\",\r\n  },\r\n});\r\n\r\nconst StyledTextField = withStyles({\r\n  root: {\r\n    \"& .MuiInputBase-input\": {\r\n      padding: \"0.7em\",\r\n    },\r\n  },\r\n})(TextField);\r\n\r\nfunction Form({ formik, children }) {\r\n  const classes = useStyles();\r\n  return (\r\n    <form onSubmit={formik.handleSubmit} className={classes.form}>\r\n      <Box\r\n        display=\"flex\"\r\n        flexDirection=\"column\"\r\n        alignItems=\"center\"\r\n        p=\"2em 3em\"\r\n        bgcolor=\"white\"\r\n        boxShadow=\"rgb(37 117 252 / 20%) 0px 2px 20px 0px\"\r\n        borderRadius={10}\r\n      >\r\n        {children}\r\n      </Box>\r\n    </form>\r\n  );\r\n}\r\n\r\nfunction FormHeading({ children }) {\r\n  const classes = useStyles();\r\n  return (\r\n    <Typography\r\n      className={classes.formTitle}\r\n      variant=\"h5\"\r\n      color=\"primary\"\r\n      align=\"center\"\r\n    >\r\n      {children}\r\n    </Typography>\r\n  );\r\n}\r\n\r\nfunction InputField({ formik, name, ...inputProps }) {\r\n  return (\r\n    <StyledTextField\r\n      inputProps={inputProps}\r\n      variant=\"outlined\"\r\n      fullWidth\r\n      margin=\"normal\"\r\n      name={name}\r\n      placeholder={name}\r\n      aria-label={name}\r\n      {...formik.getFieldProps(name)}\r\n      error={Boolean(formik.touched[name] && formik.errors[name])}\r\n      helperText={formik.touched[name] ? formik.errors[name] : \"\"}\r\n    />\r\n  );\r\n}\r\n\r\nfunction PasswordField({\r\n  formik,\r\n  passwordVisible,\r\n  setPasswordVisible,\r\n  ...inputProps\r\n}) {\r\n  return (\r\n    <StyledTextField\r\n      inputProps={inputProps}\r\n      variant=\"outlined\"\r\n      fullWidth\r\n      margin=\"normal\"\r\n      type={passwordVisible ? \"text\" : \"password\"}\r\n      name=\"password\"\r\n      placeholder=\"Password\"\r\n      aria-label=\"password\"\r\n      {...formik.getFieldProps(\"password\")}\r\n      error={Boolean(formik.touched.password && formik.errors.password)}\r\n      helperText={formik.touched.password ? formik.errors.password : \"\"}\r\n      InputProps={{\r\n        endAdornment: (\r\n          <InputAdornment>\r\n            <IconButton onClick={() => setPasswordVisible(!passwordVisible)}>\r\n              {passwordVisible ? (\r\n                <Visibility color=\"primary\" />\r\n              ) : (\r\n                <VisibilityOff color=\"primary\" />\r\n              )}\r\n            </IconButton>\r\n          </InputAdornment>\r\n        ),\r\n      }}\r\n    />\r\n  );\r\n}\r\n\r\nfunction SubmitButton({ children, formik, loading }) {\r\n  const classes = useStyles();\r\n  return (\r\n    <Button\r\n      type=\"submit\"\r\n      className={classes.btn}\r\n      variant=\"contained\"\r\n      color=\"primary\"\r\n      aria-label=\"login button\"\r\n    >\r\n      {children}\r\n      {loading ? (\r\n        <CircularProgress\r\n          className={classes.spinner}\r\n          color=\"inherit\"\r\n          size=\"1.5em\"\r\n        />\r\n      ) : null}\r\n    </Button>\r\n  );\r\n}\r\n\r\nfunction FormFooter({ linkTo, children, linkText }) {\r\n  const classes = useStyles();\r\n  return (\r\n    <>\r\n      <Divider variant=\"middle\" light={true} className={classes.divider} />\r\n      <Typography variant=\"body2\" color=\"textSecondary\">\r\n        {children}{\" \"}\r\n        <Link to={linkTo} className={classes.link}>\r\n          <Typography variant=\"inherit\" color=\"primary\" component=\"span\">\r\n            {linkText}\r\n          </Typography>{\" \"}\r\n        </Link>\r\n        here!\r\n      </Typography>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default StyledTextField;\r\nexport {\r\n  useStyles,\r\n  Form,\r\n  FormHeading,\r\n  InputField,\r\n  PasswordField,\r\n  SubmitButton,\r\n  FormFooter,\r\n};\r\n","import React, { useState } from \"react\";\r\nimport { Box, Slide, Typography, useTheme } from \"@material-ui/core\";\r\nimport {\r\n  CheckCircleOutline,\r\n  ErrorOutlineOutlined,\r\n  InfoOutlined,\r\n  WarningOutlined,\r\n} from \"@material-ui/icons\";\r\n\r\nfunction Alert({ type, children }) {\r\n  const theme = useTheme();\r\n  const [show, setShow] = useState(true);\r\n  setTimeout(() => {\r\n    setShow(false);\r\n  }, 2000);\r\n  return (\r\n    <Slide direction=\"down\" in={show} timeout={{ enter: 300, exit: 500 }}>\r\n      <Box\r\n        position=\"absolute\"\r\n        display=\"flex\"\r\n        top=\"5%\"\r\n        marginRight=\"auto\"\r\n        p=\"1em\"\r\n        borderRadius={5}\r\n        boxShadow={5}\r\n        bgcolor={theme.palette?.[type].main}\r\n      >\r\n        {type === \"success\" ? <CheckCircleOutline htmlColor=\"white\" /> : null}\r\n        {type === \"info\" ? <InfoOutlined htmlColor=\"white\" /> : null}\r\n        {type === \"warning\" ? <WarningOutlined htmlColor=\"white\" /> : null}\r\n        {type === \"error\" ? <ErrorOutlineOutlined htmlColor=\"white\" /> : null}\r\n\r\n        <Typography\r\n          variant=\"body1\"\r\n          style={{ marginLeft: \"0.5em\", color: \"white\" }}\r\n        >\r\n          {children}\r\n        </Typography>\r\n      </Box>\r\n    </Slide>\r\n  );\r\n}\r\n\r\nexport default Alert;\r\n","import { FormHelperText, Typography } from \"@material-ui/core\";\r\nimport axios from \"../../api\";\r\nimport React, { useState } from \"react\";\r\nimport { Link, Redirect } from \"react-router-dom\";\r\nimport {\r\n  Form,\r\n  FormFooter,\r\n  FormHeading,\r\n  InputField,\r\n  PasswordField,\r\n  SubmitButton,\r\n  useStyles,\r\n} from \"./InputFields\";\r\nimport Alert from \"../Utils/Alert\";\r\nimport { useFormik } from \"formik\";\r\nimport * as yup from \"yup\";\r\n\r\n//formik props set up\r\nconst initialValues = {\r\n  username: \"\",\r\n  password: \"\",\r\n};\r\n\r\n//form Submission\r\nconst onSubmit = async (values, { setLoggedIn, setLoading, setFormError }) => {\r\n  setLoading(true);\r\n  try {\r\n    const res = await axios.post(\"/login\", values);\r\n    if (res.status === 200) {\r\n      window.localStorage.setItem(\"accesstoken\", res.data.accesstoken);\r\n      setLoggedIn(true);\r\n    }\r\n  } catch (err) {\r\n    setLoading(false);\r\n    setFormError({ state: true, message: err.response?.data || err.message });\r\n  }\r\n};\r\n//input validationSchema\r\nconst validationSchema = yup.object({\r\n  username: yup\r\n    .string()\r\n    .required(\"username cannot be empty!\")\r\n    .min(4, \"username must be at least 4 characters!\")\r\n    .max(255, \"username cannot exceed 255 characters!\")\r\n    .matches(\r\n      /[A-Za-z0-9._]{4,255}$/,\r\n      \"Only albabets dot(.) and underscore(_) is allowed!\"\r\n    ),\r\n  password: yup\r\n    .string()\r\n    .trim()\r\n    .required(\"password cannot be empty!\")\r\n    .min(6, \"password must be least 6 characters long!\")\r\n    .max(255, \"password cannot exceed 255 characters!\")\r\n    .matches(\r\n      /[\\S]{6,255}$/,\r\n      \"password cannnot contain white space characters!\"\r\n    ),\r\n});\r\n\r\nfunction LoginForm({ alert }) {\r\n  const [formError, setFormError] = useState({\r\n    state: false,\r\n    message: \"\",\r\n  });\r\n  const [passwordVisible, setPasswordVisible] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [loggedIn, setLoggedIn] = useState(false);\r\n\r\n  const formik = useFormik({\r\n    initialValues,\r\n    onSubmit: (values) => {\r\n      onSubmit(values, { setLoggedIn, setLoading, setFormError });\r\n    },\r\n    validationSchema,\r\n  });\r\n  const classes = useStyles();\r\n\r\n  if (loggedIn) {\r\n    return <Redirect to=\"/messenger\" />;\r\n  }\r\n  return (\r\n    <>\r\n      {alert ? <Alert type={alert.type}>{alert.message}</Alert> : null}\r\n\r\n      <Form formik={formik}>\r\n        {/* This is custom Form component. It is defined in InputFields.jsx */}\r\n        <FormHeading>Welcome Back</FormHeading>\r\n\r\n        {/*Username Field*/}\r\n        <InputField name=\"username\" formik={formik} autoFocus />\r\n\r\n        {/*Password Field*/}\r\n        <PasswordField\r\n          formik={formik}\r\n          passwordVisible={passwordVisible}\r\n          setPasswordVisible={setPasswordVisible}\r\n        />\r\n        {/* error message  */}\r\n        <FormHelperText error={formError.state}>\r\n          {formError.message}\r\n        </FormHelperText>\r\n\r\n        {/*forget password*/}\r\n        <Link to=\"/\" className={classes.link}>\r\n          <Typography variant=\"subtitle1\" color=\"primary\">\r\n            Forget Password?\r\n          </Typography>\r\n        </Link>\r\n\r\n        {/* sign in button */}\r\n        <SubmitButton formik={formik} loading={loading}>\r\n          Sign In\r\n        </SubmitButton>\r\n\r\n        <FormFooter linkTo=\"/signup\" linkText=\"Sign Up\">\r\n          Don't have an account ?\r\n        </FormFooter>\r\n      </Form>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default LoginForm;\r\n","import { Box, FormHelperText } from \"@material-ui/core\";\r\nimport { useFormik } from \"formik\";\r\nimport React, { useState } from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport * as yup from \"yup\";\r\nimport axios from \"../../api\";\r\nimport {\r\n  Form,\r\n  PasswordField,\r\n  SubmitButton,\r\n  InputField,\r\n  FormHeading,\r\n  FormFooter,\r\n} from \"./InputFields\";\r\n\r\n//formik setUp\r\nconst initialValues = {\r\n  firstName: \"\",\r\n  lastName: \"\",\r\n  username: \"\",\r\n  password: \"\",\r\n};\r\n//form Submission\r\nconst onSubmit = async (values,{ setRegistered,setLoading, setFormError}) => {\r\n  setLoading(true);\r\n  try {\r\n    const res = await axios.post(\"/register\", values);\r\n    if (res.status === 201) {\r\n      setRegistered(true);\r\n    }\r\n  } catch (err) {\r\n    console.log(err);\r\n    setFormError({ state: true, message: err.response?.data || err.message})\r\n    setLoading(false);\r\n  }\r\n};\r\n//input validationSchema\r\nconst validationSchema = yup.object({\r\n  firstName: yup\r\n    .string()\r\n    .required(\"firstName cannot be empty!\")\r\n    .min(3, \"firstName must be at least 3 characters!\")\r\n    .max(255, \"firstName cannot exceed 255 characters!\")\r\n    .matches(/[A-Za-z]{3,255}$/, \"Invalid Characters!, use letters only.\"),\r\n  lastName: yup\r\n    .string()\r\n    .required(\"lastName cannot be empty!\")\r\n    .min(3, \"lastName must be at least 3 characters!\")\r\n    .max(255, \"lastName cannot exceed 255 characters!\")\r\n    .matches(/[A-Za-z]{3,255}$/, \"Invalid Characters!, use letters only.\"),\r\n  username: yup\r\n    .string()\r\n    .required(\"username cannot be empty!\")\r\n    .min(4, \"username must be at least 4 characters!\")\r\n    .max(255, \"username cannot exceed 255 characters!\")\r\n    .matches(\r\n      /[A-Za-z0-9._]{4,255}$/,\r\n      \"Only albabets dot(.) and underscore(_) is allowed!\"\r\n    ),\r\n  password: yup\r\n    .string()\r\n    .trim()\r\n    .required(\"password cannot be empty!\")\r\n    .min(6, \"password must be least 6 characters long!\")\r\n    .max(255, \"password cannot exceed 255 characters!\")\r\n    .matches(\r\n      /[\\S]{6,255}$/,\r\n      \"password cannnot contain white space characters!\"\r\n    ),\r\n});\r\n\r\nfunction SignUpForm() {\r\n  const [passwordVisible, setPasswordVisible] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [formError, setFormError] = useState({\r\n    state: false,\r\n    message: \"\",\r\n  });\r\n  const [registered, setRegistered] = useState(false);\r\n\r\n  const formik = useFormik({\r\n    initialValues,\r\n    onSubmit: (values) => {\r\n      onSubmit(values,{setRegistered, setLoading, setFormError});\r\n    },\r\n    validationSchema,\r\n  });\r\n\r\n  if(registered){\r\n    return <Redirect to={{ pathname:\"/login\",state:{ alert:{type: 'success', message:\"User Succesfully Registered!\"}}}} />\r\n  }\r\n\r\n  return (\r\n    <Form formik={formik}>\r\n      <FormHeading>Lets Get Started.</FormHeading>\r\n\r\n      {/* This is for Firstname and lastName input field */}\r\n      <Box display=\"flex\" justifyContent=\"space-between\">\r\n        <InputField name=\"firstName\" formik={formik} />\r\n        <div style={{ width: \"1em\" }}></div>\r\n        <InputField name=\"lastName\" formik={formik} />\r\n      </Box>\r\n\r\n      {/* This is for username input field */}\r\n      <InputField name=\"username\" formik={formik} />\r\n      {/* This is for password Input Field */}\r\n      <PasswordField\r\n        passwordVisible={passwordVisible}\r\n        setPasswordVisible={setPasswordVisible}\r\n        formik={formik}\r\n      />\r\n\r\n      {/* error message  */}\r\n      <FormHelperText error={formError.state}>\r\n        {formError.message}\r\n      </FormHelperText>\r\n\r\n      <SubmitButton formik={formik} loading={loading}>\r\n        Sign Up\r\n      </SubmitButton>\r\n\r\n      <FormFooter linkTo=\"/login\" linkText=\"Sign In\">\r\n        Already have an account ?\r\n      </FormFooter>\r\n    </Form>\r\n  );\r\n}\r\n\r\nexport default SignUpForm;\r\n","export default __webpack_public_path__ + \"static/media/loginPageBackground.566fa2ff.svg\";","import axios from \"../../api\";\r\n\r\nasync function authenticateLoginToken() {\r\n  const accesstoken = window.localStorage.getItem(\"accesstoken\");\r\n  if (accesstoken) {\r\n      //making login request with AccessToken\r\n      const res = await axios.post(\"/login\");\r\n      if (res.status === 200) {\r\n        return {user: res.data}\r\n      }\r\n      //if authentication failed with error it can be catched by catch block.\r\n    }\r\n   else {\r\n    //if accesstoken is not present.\r\n    return false\r\n  }\r\n}\r\n\r\nexport default authenticateLoginToken;\r\n","import { Box, makeStyles } from \"@material-ui/core\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { Route, Redirect, useLocation } from \"react-router-dom\";\r\nimport LoginForm from \"./LoginForm\";\r\nimport SignUpForm from \"./SignUpForm\";\r\nimport backgroundImage from \"../../assets/loginPageBackground.svg\";\r\nimport authenticateLoginToken from \"../ProtectedRoute/authenticateUser\";\r\n\r\nconst useStyle = makeStyles({\r\n  root: {\r\n    background: `url(${backgroundImage})`,\r\n    backgroundSize: \"cover\",\r\n    backgroundPositionY: \"100%\",\r\n  },\r\n});\r\n\r\nfunction LoginPage() {\r\n  const [loggedIn, setLoggedIn] = useState(false);\r\n  const [checked,setChecked] = useState(false);\r\n  const classes = useStyle();\r\n  const location = useLocation();\r\n\r\n  // check if the user is already logged in.\r\n  useEffect(() => {\r\n    async function checkLoggedIn() {\r\n      try{\r\n      const isValid = await authenticateLoginToken();\r\n      isValid && setLoggedIn(isValid);\r\n      setChecked(true);\r\n      } catch (err) {\r\n        location.state={alert:{ type: \"error\", message: err.response?.data || err.message }}\r\n        setChecked(true);\r\n      }\r\n    }\r\n    checkLoggedIn();\r\n  }, [location]);\r\n\r\n  if (loggedIn) {\r\n    return <Redirect to=\"/messenger\" />;\r\n  }\r\n  if(!checked){\r\n    return null\r\n  }\r\n  return (\r\n    <Box\r\n      className={classes.root}\r\n      display=\"flex\"\r\n      justifyContent=\"center\"\r\n      alignItems=\"center\"\r\n      height=\"100vh\"\r\n      width=\"100vw\"\r\n    >\r\n      <Route exact path=\"/\">\r\n        <Redirect\r\n          to={{\r\n            pathname: \"/login\",\r\n            state: location.state,\r\n          }}\r\n        />\r\n      </Route>\r\n      <Route path=\"/login\">\r\n        <LoginForm alert={location.state?.alert} />\r\n      </Route>\r\n      <Route path=\"/signup\">\r\n        <SignUpForm />\r\n      </Route>\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default LoginPage;\r\n","import {\r\n  Avatar,\r\n  Box,\r\n  Badge,\r\n  withStyles,\r\n  Typography,\r\n  ButtonBase,\r\n  makeStyles,\r\n} from \"@material-ui/core\";\r\nimport moment from \"moment\";\r\nimport React, { useContext, useEffect, useState } from \"react\";\r\nimport { useHistory } from \"react-router\";\r\nimport axios from \"../../../api\";\r\nimport SocketContext from \"../../../context/SocketContext\";\r\n\r\nexport const StyledBadge = withStyles(() => ({\r\n  badge: {\r\n    height: \"0.9em\",\r\n    width: \"0.9em\",\r\n    borderRadius: \"50%\",\r\n    border: `2px solid #fff`,\r\n    backgroundColor: ({ isonline }) => {\r\n      return isonline ? \"green\" : \"grey\";\r\n    },\r\n  },\r\n}))(Badge);\r\n\r\nconst useStyles = makeStyles({\r\n  messageBadge: {\r\n    marginLeft: \"1em\",\r\n  },\r\n});\r\n\r\nconst styles = (theme) => ({\r\n  buttonRipple: {\r\n    color: theme.palette.primary.main,\r\n  },\r\n  main: {\r\n    padding: \"1em\",\r\n    width: \"100%\",\r\n    justifyContent: \"start\",\r\n    \"&:hover\": {\r\n      transform: \"scale(1.01)\",\r\n      boxShadow: \"rgb(145 158 171 / 24%) 0px 5px 16px 0px\",\r\n    },\r\n  },\r\n});\r\n\r\nconst StyledButton = withStyles(styles)((props) => (\r\n  <ButtonBase\r\n    className={props.classes.main}\r\n    TouchRippleProps={{ classes: { root: props.classes.buttonRipple } }}\r\n    component=\"div\"\r\n    onClick={props.onClick}\r\n  >\r\n    {props.children}\r\n  </ButtonBase>\r\n));\r\n\r\nfunction MessageTime({ msgTimestamp }) {\r\n  //states\r\n  const [msgTime, setMsgTime] = useState(() => {\r\n    formatMessageTimestamp(msgTimestamp);\r\n  });\r\n\r\n  function formatMessageTimestamp(timestamp) {\r\n    return moment(timestamp)\r\n      .fromNow(true)\r\n      .replace(\r\n        /a few seconds| hours|a minute| minutes| days|an hour|a day/gi,\r\n        function (x) {\r\n          switch (x) {\r\n            case \" hours\":\r\n              return \"h\";\r\n            case \" minutes\":\r\n              return \"m\";\r\n            case \" days\":\r\n              return \"d\";\r\n            case \" months\":\r\n              return \"mth\";\r\n            case \"a few seconds\":\r\n              return \"Just Now\";\r\n            case \"a minute\":\r\n              return \"1m\";\r\n            case \"an hour\":\r\n              return \"1h\";\r\n            case \"a day\":\r\n              return \"1d\";\r\n            default:\r\n              return x;\r\n          }\r\n        }\r\n      );\r\n  }\r\n\r\n  useEffect(() => {\r\n    setMsgTime(formatMessageTimestamp(msgTimestamp)); //initial run\r\n    const updateInterval = setInterval(() => {\r\n      setMsgTime(formatMessageTimestamp(msgTimestamp));\r\n    }, 60000); //update every minutes\r\n    return () => {\r\n      clearInterval(updateInterval);\r\n    };\r\n  }, [msgTimestamp]);\r\n\r\n  return (\r\n    <Typography color=\"textSecondary\" style={{ fontSize: \"0.9rem\" }}>\r\n      {msgTime}\r\n    </Typography>\r\n  );\r\n}\r\n\r\nfunction Conversation({ lastMessage, conversationWith }) {\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n  //context\r\n  const socket = useContext(SocketContext);\r\n\r\n  //states\r\n  const [userInfo, setUserInfo] = useState({});\r\n  const [online, setOnline] = useState(false);\r\n  const [recentMessage, setRecentMessage] = useState(lastMessage);\r\n  //custom events\r\n\r\n  //add listener\r\n  function onMessageSend(listener) {\r\n    document.addEventListener(\"sendMessage\", listener);\r\n  }\r\n\r\n  //remove listener\r\n  function offMessageSend(listener) {\r\n    document.removeEventListener(\"sendMessage\", listener);\r\n  }\r\n\r\n  async function getUserInfo(username) {\r\n    const res = await axios.get(`/userinfo/${username}`);\r\n    setUserInfo(res.data);\r\n  }\r\n\r\n  //open messages\r\n  function openMessages() {\r\n    history.push(`/messenger/${conversationWith}`);\r\n  }\r\n\r\n  //useEffects\r\n\r\n  useEffect(() => {\r\n    //updateOnlineState\r\n    function updateOnlineState(username, state) {\r\n      username === userInfo?.username && setOnline(state);\r\n    }\r\n\r\n    socket.on(\"onlineStateChange\", updateOnlineState);\r\n    return () => {\r\n      socket.off(\"onlineStateChange\", updateOnlineState);\r\n    };\r\n  }, [socket, userInfo]);\r\n\r\n  useEffect(() => {\r\n    setOnline(userInfo.online);\r\n  }, [userInfo.online]);\r\n\r\n  useEffect(() => {\r\n    //updateRecentMessage\r\n    function updateRecentMessage(msg) {\r\n      msg.from === conversationWith && setRecentMessage(msg);\r\n\r\n      msg.detail?.recipient === conversationWith &&\r\n        setRecentMessage(msg.detail); //in this case msg is the custom event object which contains the detail property which is the info passed during the dispatch of the event.\r\n    }\r\n\r\n    getUserInfo(conversationWith);\r\n\r\n    socket.on(\"receive-message\", updateRecentMessage);\r\n    onMessageSend(updateRecentMessage);\r\n\r\n    return () => {\r\n      socket.off(\"receive-message\", updateRecentMessage);\r\n      offMessageSend(updateRecentMessage); //removeEventListener\r\n    };\r\n  }, [lastMessage, conversationWith, socket]);\r\n\r\n  return (\r\n    <StyledButton onClick={openMessages}>\r\n      <StyledBadge\r\n        isonline={online ? 1 : 0}\r\n        overlap=\"circle\"\r\n        badgeContent=\"\"\r\n        variant=\"dot\"\r\n        anchorOrigin={{ vertical: \"bottom\", horizontal: \"right\" }}\r\n      >\r\n        <Avatar alt={userInfo.username} src={userInfo.profilePic} />\r\n      </StyledBadge>\r\n\r\n      <Box px=\"0.8em\">\r\n        <Typography\r\n          color=\"textPrimary\"\r\n          variant=\"h6\"\r\n          style={{ fontSize: \"1.1rem\" }}\r\n        >\r\n          {userInfo.firstName} {userInfo.lastName}\r\n        </Typography>\r\n\r\n        <Typography\r\n          color={recentMessage.seen ? \"textSecondary\" : \"textPrimary\"}\r\n          component=\"p\"\r\n          noWrap\r\n          style={{\r\n            width: \"15.5rem\",\r\n            fontWeight: recentMessage.seen ? \"normal\" : \"bold\",\r\n          }}\r\n        >\r\n          {recentMessage.from === userInfo.username\r\n            ? `${userInfo.firstName}: `\r\n            : \"you: \"}\r\n\r\n          {/*message text */}\r\n          {recentMessage.text ||\r\n            ((recentMessage.media.images.length >0||\r\n              recentMessage.media.videos.length >0||\r\n              recentMessage.media.files.length>0) &&\r\n              \"sent an attatchment!\")}\r\n        </Typography>\r\n      </Box>\r\n\r\n      <Box marginLeft=\"auto\" display=\"flex\" alignItems=\"center\">\r\n        <MessageTime msgTimestamp={recentMessage.timestamp} />\r\n        <Badge className={classes.messageBadge} color=\"primary\" variant=\"dot\" />\r\n      </Box>\r\n    </StyledButton>\r\n  );\r\n}\r\n\r\nexport default Conversation;\r\n","import React, { useContext, useEffect } from \"react\";\r\nimport {\r\n  Avatar,\r\n  Box,\r\n  IconButton,\r\n  makeStyles,\r\n  Menu,\r\n  MenuItem,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { StyledBadge } from \"../SideNavigation/Conversation\";\r\nimport { MoreVert, Phone, VideoCall } from \"@material-ui/icons\";\r\nimport { useState } from \"react\";\r\nimport SocketContext from \"../../../context/SocketContext\";\r\n\r\nconst useStyles = makeStyles({\r\n  header: {\r\n    position: \"absolute\",\r\n    backdropFilter: \"blur(5px)\",\r\n    backgroundColor: \"#ffffffc5\",\r\n    zIndex: \"10\",\r\n    width: \"100%\",\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    padding: \"1em 2em\",\r\n    borderRadius: \"0 0 5px 5px\",\r\n    boxShadow: \"rgb(145 158 171 / 24%) 0px 8px 16px 0px\",\r\n  },\r\n  largeAvatar: {\r\n    height: \"2.5em\",\r\n    width: \"2.5em\",\r\n  },\r\n  buttonIcon: {\r\n    margin: \"0 0.7em\",\r\n  },\r\n  menu: {\r\n    marginTop: \"3em\",\r\n  },\r\n});\r\n\r\nfunction Header({ userInfo }) {\r\n  const classes = useStyles();\r\n  //contexts\r\n  const socket = useContext(SocketContext);\r\n\r\n  //states\r\n  const [online, setOnline] = useState(userInfo.online);\r\n  const [anchorEl, setAnchorEl] = useState(null); //for menu\r\n\r\n  const handleMenuClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  useEffect(() => {\r\n    //updateOnlineState\r\n    function updateOnlineState(username, state) {\r\n      console.log(\"informed\");\r\n      username === userInfo?.username && setOnline(state);\r\n    }\r\n\r\n    socket.on(\"onlineStateChange\", updateOnlineState);\r\n    return () => {\r\n      socket.off(\"onlineStateChange\", updateOnlineState);\r\n    };\r\n  }, [socket, userInfo]);\r\n\r\n  useEffect(() => {\r\n    setOnline(userInfo.online);\r\n  }, [userInfo.online]);\r\n\r\n  function callHandler(callType) {\r\n    const call = new CustomEvent(\"call\", { detail: { userInfo, callType } });\r\n    document.dispatchEvent(call);\r\n  }\r\n\r\n  return (\r\n    <Box className={classes.header}>\r\n      <StyledBadge\r\n        variant=\"dot\"\r\n        badgeContent=\" \"\r\n        overlap=\"circle\"\r\n        isonline={online ? 1 : 0}\r\n        anchorOrigin={{ vertical: \"bottom\", horizontal: \"right\" }}\r\n      >\r\n        <Avatar\r\n          className={classes.largeAvatar}\r\n          alt={userInfo.username?.toUpperCase()}\r\n          src={userInfo.profilePic}\r\n        />\r\n      </StyledBadge>\r\n      <Box mx=\"1em\">\r\n        <Box display=\"flex\" flexDirection=\"column\" justifyContent=\"center\">\r\n          <Typography variant=\"h6\" color=\"textPrimary\">\r\n            {userInfo.firstName} {userInfo.lastName}\r\n          </Typography>\r\n          <Typography variant=\"subtitle1\" color=\"textPrimary\">\r\n            {userInfo.username ? `@${userInfo.username}` : \"\"}\r\n          </Typography>\r\n        </Box>\r\n      </Box>\r\n\r\n      <Box mx=\"auto\" mt=\"auto\">\r\n        <Typography variant=\"subtitle1\" color=\"textSecondary\">\r\n          {online ? \"Active Now\" : \"Offline\"}\r\n        </Typography>\r\n      </Box>\r\n\r\n      <Box ml=\"auto\">\r\n        <IconButton\r\n          className={classes.buttonIcon}\r\n          onClick={() => {\r\n            callHandler(\"AudioCall\");\r\n          }}\r\n        >\r\n          <Phone fontSize=\"large\" color=\"primary\" />\r\n        </IconButton>\r\n        <IconButton\r\n          className={classes.buttonIcon}\r\n          onClick={() => {\r\n            callHandler(\"VideoCall\");\r\n          }}\r\n        >\r\n          <VideoCall fontSize=\"large\" color=\"primary\" />\r\n        </IconButton>\r\n\r\n        {/* menu btn */}\r\n        <IconButton\r\n          className={classes.buttonIcon}\r\n          aria-controls=\"header-menu\"\r\n          aria-haspopup=\"true\"\r\n          onClick={(event) => {\r\n            setAnchorEl(event.currentTarget);\r\n          }}\r\n        >\r\n          <MoreVert fontSize=\"large\" color=\"primary\" />\r\n        </IconButton>\r\n        <Menu\r\n          id=\"header-menu\"\r\n          className={classes.menu}\r\n          anchorEl={anchorEl}\r\n          keepMounted\r\n          open={Boolean(anchorEl)}\r\n          onClose={handleMenuClose}\r\n        >\r\n          <MenuItem onClick={handleMenuClose}>Profile</MenuItem>\r\n          <MenuItem onClick={handleMenuClose}>My account</MenuItem>\r\n          <MenuItem onClick={handleMenuClose}>Logout</MenuItem>\r\n        </Menu>\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default Header;\r\n","import {\r\n  Box,\r\n  makeStyles,\r\n  Typography,\r\n  useTheme,\r\n  CircularProgress,\r\n} from \"@material-ui/core\";\r\nimport { Description } from \"@material-ui/icons\";\r\nimport React, { useEffect, useState } from \"react\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  mediaContainer: {\r\n    position: \"relative\",\r\n    display: \"flex\",\r\n    flexWrap: \"wrap\",\r\n  },\r\n  progressBarContainer: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    position: \"absolute\",\r\n    height: \"100%\",\r\n    width: \"100%\",\r\n    borderRadius: \"10px\",\r\n    background: \"#000000b1\",\r\n  },\r\n}));\r\n\r\nfunction CircularProgressWithLabel(props) {\r\n  const [progressPercent, setProgressPercent] = useState(0);\r\n\r\n  useEffect(() => {\r\n    function updateProgress(progressEvent) {\r\n      if (props.msgtempid === progressEvent.detail.msgTempId) {\r\n        setProgressPercent(progressEvent.detail.amount);\r\n      }\r\n    }\r\n    document.addEventListener(\"uploadProgress\", updateProgress);\r\n    return () => {\r\n      document.removeEventListener(\"uploadProgress\", updateProgress);\r\n    };\r\n  }, [props.msgtempid]);\r\n\r\n  return (\r\n    <Box position=\"relative\" display=\"inline-flex\">\r\n      <CircularProgress\r\n        value={progressPercent}\r\n        variant=\"determinate\"\r\n        {...props}\r\n      />\r\n      <Box\r\n        top={0}\r\n        left={0}\r\n        bottom={0}\r\n        right={0}\r\n        position=\"absolute\"\r\n        display=\"flex\"\r\n        alignItems=\"center\"\r\n        justifyContent=\"center\"\r\n      >\r\n        <Typography\r\n          variant=\"caption\"\r\n          component=\"div\"\r\n          style={{ color: \"white\", fontSize: \"1.3em\" }}\r\n        >{`${progressPercent}%`}</Typography>\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n\r\nfunction Image({ image }) {\r\n  const srcURL = image.secure_url || URL.createObjectURL(image);\r\n  useEffect(() => {\r\n    return () => {\r\n      URL.revokeObjectURL(srcURL);\r\n    };\r\n  }, [srcURL]);\r\n  return (\r\n    <img\r\n      style={{\r\n        objectFit: \"cover\",\r\n        margin: \"0.3em\",\r\n        width: \"calc(100%/3 - 10px)\",\r\n        flexGrow: \"1\",\r\n        maxHeight: \"100px\",\r\n        borderRadius: \"10px\",\r\n      }}\r\n      src={srcURL}\r\n      alt=\"msg-media\"\r\n    />\r\n  );\r\n}\r\n\r\nfunction Video({ video }) {\r\n  const srcURL = video.secure_url || URL.createObjectURL(video);\r\n  useEffect(() => {\r\n    return () => {\r\n      URL.revokeObjectURL(srcURL);\r\n    };\r\n  }, [srcURL]);\r\n  return (\r\n    <video\r\n      style={{\r\n        margin: \"0.3em\",\r\n        width: \"calc(100%/3 - 10px)\",\r\n        flexGrow: \"1\",\r\n        maxHeight: \"20vw\",\r\n        borderRadius: \"10px\",\r\n      }}\r\n      src={srcURL}\r\n      controls={true}\r\n    />\r\n  );\r\n}\r\n\r\nfunction File({ file }) {\r\n  const theme = useTheme();\r\n  const classes = makeStyles((theme) => ({\r\n    fileContainer: {\r\n      display: \"flex\",\r\n      alignItems: \"center\",\r\n    },\r\n    fileName: {\r\n      maxWidth: \"25vw\",\r\n      color: theme.palette.background.default,\r\n    },\r\n    fileIcon: {},\r\n  }))();\r\n\r\n  const fileName = file.name;\r\n  const srcURL = file.secure_url || URL.createObjectURL(file);\r\n  useEffect(() => {\r\n    return () => {\r\n      URL.revokeObjectURL(srcURL);\r\n    };\r\n  }, [srcURL]);\r\n\r\n  return (\r\n    <div className={classes.fileContainer}>\r\n      <Description\r\n        className={classes.fileIcon}\r\n        htmlColor={theme.palette.background.paper}\r\n      />\r\n      <Typography\r\n        className={classes.fileName}\r\n        variant=\"body1\"\r\n        noWrap\r\n        component=\"a\"\r\n        href={srcURL}\r\n        download={fileName}\r\n      >\r\n        {fileName}\r\n      </Typography>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction MediaContent({ media, isUploading, msgTempId }) {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Box className={classes.mediaContainer}>\r\n      {isUploading && (\r\n        <div className={classes.progressBarContainer}>\r\n          <CircularProgressWithLabel size=\"5em\" msgtempid={msgTempId} />\r\n        </div>\r\n      )}\r\n      {media.images.map((image, index) => {\r\n        return (\r\n          <Image\r\n            key={index}\r\n            className={classes.image}\r\n            image={image}\r\n            alt=\"msg-media\"\r\n          />\r\n        );\r\n      })}\r\n      {media.videos.map((video, index) => {\r\n        return <Video key={index} video={video} />;\r\n      })}\r\n      {media.files.map((file, index) => {\r\n        return (\r\n          <File key={index} file={file} className={classes.fileContainer} />\r\n        );\r\n      })}\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default MediaContent;\r\n","import {\r\n  Avatar,\r\n  Box,\r\n  makeStyles,\r\n  Typography,\r\n  useTheme,\r\n} from \"@material-ui/core\";\r\nimport moment from \"moment\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport MediaContent from \"./MediaContent\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  avatar: {\r\n    height: \"2em\",\r\n    width: \"2em\",\r\n  },\r\n  timestamp: {\r\n    marginTop: \"4em\",\r\n  },\r\n}));\r\n\r\nfunction Message({ prevMsgTimestamp, msg, otherEndUser }) {\r\n  const theme = useTheme();\r\n  const classes = useStyles();\r\n  const [message, setMessage] = useState(msg);\r\n\r\n  useEffect(() => {\r\n    if (msg.mediaMessageResponse) {\r\n      msg.mediaMessageResponse.then((response) => {\r\n        setMessage(response.data);\r\n      });\r\n    }\r\n  }, [msg]);\r\n\r\n  const msgDirection = msg.from === otherEndUser.username ? \"from\" : \"to\";\r\n\r\n  function showTimestamp() {\r\n    const day = 8640000; //day in milliseconds\r\n    const halfHour = 30 * 60 * 1000; //30 min in milliseconds (30min*60sec*100ms)\r\n    const timeDifferenceBetweenMsg = moment(msg.timestamp).diff(\r\n      moment(prevMsgTimestamp)\r\n    );\r\n    const timeDifferenceFromNow = moment().diff(moment(msg.timestamp));\r\n\r\n    switch (true) {\r\n      case timeDifferenceBetweenMsg < halfHour:\r\n        return false;\r\n      case timeDifferenceFromNow < halfHour:\r\n        return moment(msg.timestamp).fromNow();\r\n      case timeDifferenceFromNow < day:\r\n        return moment(msg.timestamp).format(\"hh:mm A\");\r\n      case timeDifferenceFromNow < 7 * day:\r\n        return `${moment(msg.timestamp).format(\"ddd\")} at ${moment(\r\n          msg.timestamp\r\n        ).format(\"hh:mm A\")}`;\r\n      case timeDifferenceFromNow < 365 * day:\r\n        return `${moment(msg.timestamp).format(\"MMM D\")} at ${moment(\r\n          msg.timestamp\r\n        ).format(\"hh:mm A\")}`;\r\n      default:\r\n        return `${moment(msg.timestamp).format(\"D MMM, YYYY\")} at ${moment(\r\n          msg.timestamp\r\n        ).format(\"hh:mm A\")}`;\r\n    }\r\n  }\r\n\r\n  function getBorderRadius(msgDirection) {\r\n    if (msgDirection === \"to\") {\r\n      return \"20px 0px 20px 20px\";\r\n    }\r\n    return \"0px 20px 20px 20px\";\r\n  }\r\n  function getColor(msgDirection) {\r\n    if (msgDirection === \"to\") {\r\n      return {\r\n        background: theme.palette.primary.main,\r\n        text: theme.palette.getContrastText(theme.palette.primary.main),\r\n      };\r\n    }\r\n    return theme.palette.background.paper;\r\n  }\r\n  return (\r\n    <Box my=\"1em\">\r\n      {showTimestamp() ? (\r\n        <Typography\r\n          className={classes.timestamp}\r\n          variant=\"subtitle1\"\r\n          color=\"textSecondary\"\r\n          align=\"center\"\r\n        >\r\n          {showTimestamp()}\r\n        </Typography>\r\n      ) : null}\r\n\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent={msgDirection === \"to\" ? \"flex-end\" : \"flex-start\"}\r\n        mx=\"1em\"\r\n        my=\"0.5em\"\r\n        alignItems=\"baseline\"\r\n      >\r\n        {msgDirection === \"from\" && (\r\n          <Avatar\r\n            className={classes.avatar}\r\n            alt={otherEndUser.username.toUpperCase()}\r\n            src={otherEndUser.profilePic}\r\n          />\r\n        )}\r\n\r\n        <Box\r\n          maxWidth=\"60%\"\r\n          borderRadius={getBorderRadius(msgDirection)}\r\n          boxShadow=\"rgb(145 158 171 / 24%) 0px 8px 16px 0px\"\r\n          bgcolor={getColor(msgDirection).background}\r\n          mx={msgDirection === \"from\" ? \"1em\" : 0}\r\n          p=\"1em\"\r\n        >\r\n          <Typography\r\n            component=\"p\"\r\n            variant=\"body1\"\r\n            style={{\r\n              fontSize: \"1.1rem\",\r\n              wordBreak: \"break-word\",\r\n              overflowWrap: \"break-word\",\r\n              wordWrap: \"break-word\",\r\n              color:\r\n                msgDirection === \"to\"\r\n                  ? getColor(msgDirection).text\r\n                  : theme.palette.text.primary,\r\n            }}\r\n          >\r\n            {msg.text}\r\n          </Typography>\r\n          {(message.media.images.length > 0 ||\r\n            message.media.videos.length > 0 ||\r\n            message.media.files.length > 0) && (\r\n            <MediaContent\r\n              media={message.media}\r\n              isUploading={!!message.mediaMessageResponse}\r\n              msgTempId={message.msgTempId}\r\n            />\r\n          )}\r\n        </Box>\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default Message;\r\n","import {\r\n  Box,\r\n  IconButton,\r\n  TextField,\r\n  makeStyles,\r\n  Typography,\r\n  useTheme,\r\n} from \"@material-ui/core\";\r\nimport {\r\n  Attachment,\r\n  Close,\r\n  Description,\r\n  ImageRounded,\r\n  Send,\r\n} from \"@material-ui/icons\";\r\nimport React, { useContext, useEffect, useState } from \"react\";\r\nimport { useParams } from \"react-router\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport SocketContext from \"../../../context/SocketContext\";\r\nimport videoIconOverlay from \"../../../assets/videoIconOverlay.png\";\r\nimport axios from \"../../../api/index\";\r\nimport LoggedInUserContext from \"../../../context/LoggedInUserContext\";\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: \"60%\",\r\n    minWidth: \"300px\",\r\n    marginTop: \"auto\",\r\n    borderRadius: \"20px\",\r\n    margin: \"1.5em auto\",\r\n    padding: \"1em\",\r\n    boxShadow: \"rgb(145 158 171 / 24%) 0px 8px 16px 0px\",\r\n  },\r\n  form: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n  },\r\n  selectedItemsContainer: {\r\n    padding: \"0.5em\",\r\n    maxHeight: \"25vh\",\r\n    overflowY: \"scroll\",\r\n  },\r\n  selectedMediasContainer: {\r\n    display: \"flex\",\r\n    flexWrap: \"wrap\",\r\n  },\r\n});\r\n\r\nfunction seperateImagesAndVideos(medias) {\r\n  const images = [];\r\n  const videos = [];\r\n  for (const media of medias) {\r\n    const type = media.type.split(\"/\")[0];\r\n    type === \"image\" && images.push(media);\r\n    type === \"video\" && videos.push(media);\r\n  }\r\n  if (images.length === 0 && videos.length === 0) return [null, null];\r\n  return [images, videos];\r\n}\r\n\r\nclass Message {\r\n  constructor({\r\n    from = \"\",\r\n    recipient,\r\n    images = [],\r\n    videos = [],\r\n    links = [],\r\n    files = [],\r\n    text = \"\",\r\n  }) {\r\n    this.tempMsgId = uuidv4();\r\n    this.from = from;\r\n    this.recipient = recipient;\r\n    this.media = {\r\n      images: images,\r\n      videos: videos,\r\n      links: links,\r\n      files: files,\r\n    };\r\n    this.text = text;\r\n    this.timestamp = new Date();\r\n  }\r\n}\r\n\r\nfunction MessageInput({ updateMessages }) {\r\n  const classes = useStyles();\r\n  const Socket = useContext(SocketContext);\r\n  const loggedInUser = useContext(LoggedInUserContext);\r\n  const recipient = useParams().username;\r\n\r\n  //states\r\n  const [textFieldValue, setTextFieldValue] = useState(\"\");\r\n  const [selectedImages, setSelectedImages] = useState([]);\r\n  const [selectedVideos, setSelectedVideos] = useState([]);\r\n  const [selectedFiles, setSelectedFiles] = useState([]);\r\n  const [fileInputError, setFileInputError] = useState(false);\r\n  const [typing, setTyping] = useState(\"\");\r\n\r\n  //custom events\r\n  function dispatchSendMessage(message) {\r\n    const sendMessage = new CustomEvent(\"sendMessage\", { detail: message });\r\n    document.dispatchEvent(sendMessage); //firing sendMessage event.\r\n  }\r\n  function dispatchUploadProgress(progress) {\r\n    const uploadProgress = new CustomEvent(\"uploadProgress\", {\r\n      detail: progress,\r\n    }); //{amount:Number,msgTempId}\r\n    document.dispatchEvent(uploadProgress); //firing sendMessage event.\r\n  }\r\n\r\n  useEffect(() => {\r\n    typing\r\n      ? Socket.emit(\"typing\", recipient, \"start\")\r\n      : Socket.emit(\"typing\", recipient, \"stop\");\r\n  }, [typing, recipient, Socket]);\r\n\r\n  useEffect(() => {\r\n    //reset text field when the user is changed\r\n    setTextFieldValue(\"\");\r\n  }, [recipient]);\r\n\r\n  function handleTextFieldChange(e) {\r\n    e.target.value ? setTyping(true) : setTyping(false);\r\n    setTextFieldValue(e.target.value);\r\n  }\r\n\r\n  async function sendMessage(e) {\r\n    e.preventDefault();\r\n\r\n    //check if message input contains any content\r\n    if (\r\n      !(\r\n        textFieldValue ||\r\n        selectedImages.length > 0 ||\r\n        selectedVideos.length > 0 ||\r\n        selectedFiles.length > 0\r\n      )\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    if (\r\n      selectedImages.length ||\r\n      selectedVideos.length ||\r\n      selectedFiles.length\r\n    ) {\r\n      //create new Message object for clientSide\r\n      const messageForClientSide = new Message({\r\n        from: loggedInUser.username,\r\n        recipient,\r\n        images: selectedImages,\r\n        videos: selectedVideos,\r\n        links: [],\r\n        files: selectedFiles,\r\n        text: textFieldValue,\r\n      });\r\n\r\n      //setting up formData\r\n      const formData = new FormData();\r\n      formData.append(\"recipient\", recipient);\r\n      formData.append(\"text\", textFieldValue);\r\n\r\n      selectedImages.forEach((image) => formData.append(\"images\", image));\r\n      selectedVideos.forEach((video) => formData.append(\"videos\", video));\r\n      selectedFiles.forEach((file) => formData.append(\"files\", file));\r\n\r\n      const config = {\r\n        onUploadProgress: function (progressEvent) {\r\n          var percentCompleted = Math.round(\r\n            (progressEvent.loaded * 100) / progressEvent.total\r\n          );\r\n          dispatchUploadProgress({\r\n            amount: percentCompleted,\r\n            tempMsgId: messageForClientSide.tempMsgId,\r\n          });\r\n        },\r\n      };\r\n\r\n      /*\r\n        getting response promise which will be added to clientSide message\r\n        so that when response is received it can be used inside the message component\r\n        to update the message.\r\n      */\r\n      const mediaMessageResponse = axios.post(\r\n        \"/sendMediaMessage\",\r\n        formData,\r\n        config\r\n      );\r\n\r\n      mediaMessageResponse.then((response) => {\r\n        const messageId = response.data._id;\r\n        const recipientId = response.data.recipientId;\r\n        Socket.emit(\"gotMediaMessaageResponse\", messageId, recipientId);\r\n      });\r\n\r\n      messageForClientSide.mediaMessageResponse = mediaMessageResponse;\r\n\r\n      dispatchSendMessage(messageForClientSide);\r\n      updateMessages(messageForClientSide, recipient);\r\n\r\n      //reset states\r\n      setTextFieldValue(\"\");\r\n      setTyping(false);\r\n      setSelectedImages([]);\r\n      setSelectedVideos([]);\r\n      setSelectedFiles([]);\r\n    } else {\r\n      const message = new Message({\r\n        recipient,\r\n        text: textFieldValue,\r\n      });\r\n      setTextFieldValue(\"\");\r\n      setTyping(false);\r\n      updateMessages(message, recipient);\r\n      Socket.emit(\"send-message\", message);\r\n      dispatchSendMessage(message);\r\n    }\r\n  }\r\n\r\n  async function handleMediaInputChange(e) {\r\n    const [images, videos] = seperateImagesAndVideos(e.target.files);\r\n    if (!(images || videos)) {\r\n      setFileInputError(true);\r\n    } else {\r\n      setSelectedImages(images);\r\n      setSelectedVideos(videos);\r\n    }\r\n    e.target.value = \"\";\r\n  }\r\n\r\n  function handleFilesInputChange(e) {\r\n    setSelectedFiles([...e.target.files]);\r\n    e.target.value = \"\";\r\n  }\r\n\r\n  function removeSelectedImage(index) {\r\n    setSelectedImages((prevImages) => {\r\n      prevImages.splice(index, 1);\r\n      return [...prevImages];\r\n    });\r\n  }\r\n  function removeSelectedVideo(index) {\r\n    setSelectedVideos((prevVideos) => {\r\n      prevVideos.splice(index, 1);\r\n      return [...prevVideos];\r\n    });\r\n  }\r\n\r\n  function removeSelectedFile(index) {\r\n    setSelectedFiles((prevFiles) => {\r\n      prevFiles.splice(index, 1);\r\n      return [...prevFiles];\r\n    });\r\n  }\r\n\r\n  return (\r\n    <Box className={classes.root}>\r\n      {fileInputError && (\r\n        <Typography variant=\"body2\" color=\"error\" align=\"center\">\r\n          Invalid file selected!\r\n        </Typography>\r\n      )}\r\n      <Box className={classes.selectedItemsContainer}>\r\n        {(selectedImages.length > 0 || selectedVideos.length > 0) && (\r\n          <Box className={classes.selectedMediasContainer}>\r\n            {selectedImages.map((image, index) => {\r\n              return (\r\n                <SelectedMediasPreviewer\r\n                  media={image}\r\n                  key={index}\r\n                  removeSelectedMedia={removeSelectedImage}\r\n                  index={index}\r\n                />\r\n              );\r\n            })}\r\n            {selectedVideos.map((Video, index) => {\r\n              return (\r\n                <SelectedMediasPreviewer\r\n                  media={Video}\r\n                  key={index}\r\n                  removeSelectedMedia={removeSelectedVideo}\r\n                  index={index}\r\n                />\r\n              );\r\n            })}\r\n          </Box>\r\n        )}\r\n\r\n        {selectedFiles.length > 0 && (\r\n          <Box>\r\n            {selectedFiles.map((file, index) => {\r\n              return (\r\n                <SelectedFilesPreviewer\r\n                  file={file}\r\n                  key={index}\r\n                  removeSelectedFile={removeSelectedFile}\r\n                  index={index}\r\n                />\r\n              );\r\n            })}\r\n          </Box>\r\n        )}\r\n      </Box>\r\n\r\n      <form className={classes.form} onSubmit={sendMessage}>\r\n        <input\r\n          accept=\"image/*,video/*\"\r\n          style={{ display: \"none\" }}\r\n          id=\"image-btn\"\r\n          type=\"file\"\r\n          multiple\r\n          onChange={handleMediaInputChange}\r\n        />\r\n        <IconButton\r\n          variant=\"contained\"\r\n          component=\"label\"\r\n          htmlFor=\"image-btn\"\r\n          color=\"primary\"\r\n        >\r\n          <ImageRounded color=\"primary\" />\r\n        </IconButton>\r\n        <input\r\n          accept=\".pdf,.txt,.zip,.docx,.xml\"\r\n          style={{ display: \"none\" }}\r\n          id=\"attachment-btn\"\r\n          type=\"file\"\r\n          multiple\r\n          onChange={handleFilesInputChange}\r\n        />\r\n        <IconButton\r\n          variant=\"contained\"\r\n          component=\"label\"\r\n          htmlFor=\"attachment-btn\"\r\n          color=\"primary\"\r\n        >\r\n          <Attachment color=\"primary\" />\r\n        </IconButton>\r\n        <TextField\r\n          fullWidth\r\n          placeholder=\"Type something to send...\"\r\n          autoFocus\r\n          aria-label=\"message input box\"\r\n          value={textFieldValue}\r\n          onChange={handleTextFieldChange}\r\n        />\r\n        <IconButton type=\"submit\">\r\n          <Send color=\"primary\" />\r\n        </IconButton>\r\n      </form>\r\n    </Box>\r\n  );\r\n}\r\n\r\nconst useStyles_selectedMediaPreviewer = makeStyles({\r\n  previewContainer: {\r\n    position: \"relative\",\r\n    width: \"40px\",\r\n    height: \"40px\",\r\n    marginRight: \"0.8em\",\r\n    marginBottom: \"0.8em\",\r\n  },\r\n  selectedImage: {\r\n    width: \"100%\",\r\n    height: \"100%\",\r\n    objectFit: \"cover\",\r\n    borderRadius: \"20%\",\r\n  },\r\n  removeBtn: {\r\n    all: \"unset\",\r\n    position: \"absolute\",\r\n    top: \"-6px\",\r\n    right: \"-6px\",\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    height: \"18px\",\r\n    width: \"18px\",\r\n    textAlign: \"center\",\r\n    fontSize: \"12px\",\r\n    fontWeight: \"bold\",\r\n    backgroundColor: \"#00000088\",\r\n    borderRadius: \"50%\",\r\n    zIndex: \"100\",\r\n    \"&:hover\": {\r\n      transform: \"scale(1.1)\",\r\n    },\r\n    \"&:active\": {\r\n      transform: \"scale(1)\",\r\n    },\r\n  },\r\n  videoContainer: {\r\n    position: \"relative\",\r\n    width: \"40px\",\r\n    height: \"40px\",\r\n    marginRight: \"0.8em\",\r\n    marginBottom: \"0.8em\",\r\n    \"&>video\": {\r\n      height: \"100%\",\r\n      width: \"100%\",\r\n      objectFit: \"cover\",\r\n      borderRadius: \"20%\",\r\n    },\r\n    \"&::before\": {\r\n      content: \"''\",\r\n      backgroundImage: `url(${videoIconOverlay})`,\r\n      backgroundPosition: \"center\",\r\n      backgroundSize: \"contain\",\r\n      height: \"100%\",\r\n      width: \"100%\",\r\n      position: \"absolute\",\r\n      zIndex: \"50\",\r\n    },\r\n  },\r\n});\r\n\r\nfunction SelectedMediasPreviewer({ media, removeSelectedMedia, index }) {\r\n  const classes = useStyles_selectedMediaPreviewer();\r\n  const mediaObjectURL = URL.createObjectURL(media);\r\n\r\n  return (\r\n    <div className={classes.previewContainer}>\r\n      <button\r\n        className={classes.removeBtn}\r\n        onClick={() => {\r\n          URL.revokeObjectURL(mediaObjectURL);\r\n          removeSelectedMedia(index);\r\n        }}\r\n      >\r\n        <Close htmlColor=\"white\" fontSize=\"inherit\" />\r\n      </button>\r\n\r\n      {media.type.split(\"/\")[0] === \"image\" ? (\r\n        <img className={classes.selectedImage} src={mediaObjectURL} alt=\"img\" />\r\n      ) : (\r\n        <div className={classes.videoContainer}>\r\n          <video src={mediaObjectURL} />\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nconst useStyles_selectedFilePreviewer = makeStyles({\r\n  selectedFilePreviewContainer: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    padding: \"1em\",\r\n  },\r\n  fileIcon: {\r\n    marginRight: \"0.3em\",\r\n  },\r\n  fileName: {\r\n    width: \"20vw\",\r\n  },\r\n  removeBtn: {\r\n    all: \"unset\",\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    height: \"18px\",\r\n    width: \"18px\",\r\n    margin: \"auto 0.5em\",\r\n    textAlign: \"center\",\r\n    fontSize: \"12px\",\r\n    fontWeight: \"bold\",\r\n    backgroundColor: \"#00000088\",\r\n    borderRadius: \"50%\",\r\n    \"&:hover\": {\r\n      transform: \"scale(1.1)\",\r\n    },\r\n    \"&:active\": {\r\n      transform: \"scale(1)\",\r\n    },\r\n  },\r\n});\r\n\r\nfunction SelectedFilesPreviewer({ file, removeSelectedFile, index }) {\r\n  const theme = useTheme();\r\n  const classes = useStyles_selectedFilePreviewer();\r\n  return (\r\n    <div className={classes.selectedFilePreviewContainer}>\r\n      <Description\r\n        className={classes.fileIcon}\r\n        htmlColor={theme.palette.primary.main}\r\n      />\r\n      <Typography className={classes.fileName} variant=\"body1\" noWrap>\r\n        {file.name}\r\n      </Typography>\r\n      <button\r\n        className={classes.removeBtn}\r\n        onClick={() => {\r\n          removeSelectedFile(index);\r\n        }}\r\n      >\r\n        <Close htmlColor=\"white\" fontSize=\"inherit\" />\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default MessageInput;\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAABmJLR0QA/wD/AP+gvaeTAAAHoUlEQVR4nO2dW4xdVRnH/2skUqcQabEFowhPdkJbQoPBkEClBcKDVowXTOQSIEZBNKEIpA8khHh5IUUsvKgohiY8SAKijwZ9KJeAEBrolIF0QJpKBMrMYKdeiszPh3WOrYdyvm+fvdZeu7B/yWQe1sn3/ddae6/7+rbU0dHR0dHR0dHR0fFBI5QWMAxguaQ1klYc8rdc0mJJS3r/JWm/pNne/9ckvShpStILkp4JIbzRrHI/raoAYFzSBZLWS1onaZXqa0TSDkl/7P39IYTwz5o23z8AY8DZwM+At8jPP4DfABuAD5XOfzGARcB3gJcaKPT3Yhq4BlhUujwaAxgHbgBeLVjwg7wKfJ/YBL5/Ib72L5ct66HsAb5WupySA5wC/L5w4VbhIeDk0uWWBOBLwEzhAh2Ft4Cv5y6fbMNQ4GhJmyVdW9PU65K2KQ4lpxTH+LOS5iTN935zjKTjFOcGKyRNSFopaa2kZTX93ynpxhDCv2vaaQ7geODxGk/fn4GNwCpg5IcECMBq4Hrg6Rp6HgWWpiyjbAAnATtHyOTfgc3AqRm1rQRuB/aNoG8SOCmXtiQAE8DuihmbAW6hwSeM+IbeCsxW1LobmGhKZyWATwB/qZCZBeBe4npPKc1LiTPwhQq699C2ERLxiarS7OwCzi6tuw+wlmoz8kna0icAR1Otw70f+Ghp3YMAxwEPVMjHY8SRXnHhdzkFLwA3lNY7DOKoaRP+JmlLacFfdQp9G7iqqNgKAJcCB5x5+0opkacAcw6BB4ANRUTWAPhi78GxmKVEpwz8ziFuAbiicXGJAC7B1xw91LSwixyioOVtvgdin+ChmbecuJ7vGe/f34igzBA75gcd+X0J+EgTgm50iNlFC4eao0IconrmCRtzC1mEvZO1QMJJFnAPsNj+ZV6Ac7H7g7+Sc25A3MO1+GVinwDPA6tT2h1Ry1ZH/q/O5XwM+zWcAequvw/67TNP4REVcAL20HuaGkvow5yvc9T+LRn8DnIvBZsk4IeOcvhcDse/MpzOAx/L4PdwFGuSiAuP1n7C3amdjhM3TIaxOanTg76HVXiRJgn4iVEWc6QckuKbeGXZyXL4bXyURNzmtPiCx9aY0+d6I/2pEMJOp63UXCHpKRpskkIIz0nabvxsnceWtwIsY/c57eRiQtLjNNskWXk+L4kXYDn2BGRVEmeH91+VRpok4HRDxzukGJQAFxqOXiPHuPeg/1HIPkoirhG9Yeg437LjaYJWGOnbQgj4ZDdG9iapl+dtDh1DSVEBOxw2SrBY0j3knbhNGumftgx4KsAy8oLDRkkuk/QkeYbJU0a69fC6KuBEI/1Fh43SnKpYCambJCvvVtm5KuBYI32vw0YbyNEkWXm3yi5JBexz2GgTlyndxM3Ke5IKOMZInzfS28iEpCeAb9W000gFdGTEUwHWE269IW1kStJnQwg/r2mndvPsqYDar1nL2CrpM70Ftbq0ogKSb8JkYr+kK0MIl4cQ9ieyaeU9SQX8zUg3Z3stYKekM0MIv05s18q7VXauCrAmG+ZsrzBbFQs/x36FtdZjrhIc5XBiTbezLUXXZL+k72Z46g9lpZGepAKsN2AtEFq2Ijol6eJEHe1hAcYknWP8rP46GbAMe0Mm29r7CHsBTW3IrDF0vAMcb9kx+4BesCPrSbrAKzwj/VHOlQlHOcOw8vxsCOFNy4h3JvwnI/0bTju5mJJ0Vub2fpBLjPSHk3ki3haxyNIZt6XJGdB0mkPX51M6HMeOZnV7Mof/7/u9KHkw6w6jLOZIHQSK7mhiX4/naOIvcjj2HM69NYPfQUofzv2xoxzW5nA8Rjx6PYxZEoceOMR2G46nfxz7jOwuch3TwXdBI+lIpGezLRc07nPk/9s5BXivKCV7BWnPFaX1jsLfQ+7wBcToghav0JZgFgkAluALNnhdE2LGnWIeIOORxaYgHkH0XEqfpolrqj1RnokZwKZGBGUEuNmZ13QTL6cwb6iCIyZIxyDEoB2eUAUPlhB3Mr6QX28DFzUusCbEcJueYB0zwKdKidzgfEL+A3yziMgRAC7HF65mAfhyabFbHEL7YjfR4o6Z2OHe7HyoAO4orbkfsuxRp2CIgS+WlNY9CDGAn6df6/MI8OHSuiX9T/xkBfEvk+My84gQJ1mvVNC/g7bNc6gethJiQO9PFtR8InFxr2rYyjKdrgWjBW6dA35AhqXsITqXAT/CXlgbZDfQ7mM4xNDFVZqjPvuIN9BzbvCfRtxMmR9B3w4Kvq2VIPYJj42QyT7PEANDnU48/jGqjjHi6YWbgO019DxCpjY/d/j62yR9r6apvYq3ESclPa94TmlGhw9fv1TvDl9vHg0ZApK2SLophHCghp1yEONMHKkfcLi4dPklgbhsUWWMXZrf0taRTh2ISxclP1tlMU3Tq5pNQ9xP2EgMcNcW9gDX0dR6fhsgLmFcg73Rn5Np4GraEAW9JMAZwE+BvQ0U+hxx9ns+LVgYLC7gUIhNwHmKAaLWS1qt+jc5FyQ9q4Mf83w4hPCvmjaT0aoKGIS4PLFG8SrQhA5+zvZYxXF//4bmvOK8YJ/e/Tnb7SGEI+U2f0dHR0dHR0dHR0fHB4D/AqDS4SxfDHKpAAAAAElFTkSuQmCC\"","import { Box, makeStyles } from \"@material-ui/core\";\r\nimport React from \"react\";\r\n\r\nconst useStyles = makeStyles({\r\n  container: {\r\n    display: \"flex\",\r\n    width: \"fit-content\",\r\n    margin: \"1em\",\r\n    padding: \"0.5em\",\r\n    borderRadius: \"10px 10px 10px 0\",\r\n  },\r\n  dot: {\r\n    height: \"0.4em\",\r\n    width: \"0.4em\",\r\n    margin: \"0.2em\",\r\n    borderRadius: \"50%\",\r\n    backgroundColor: \"#00000055\",\r\n    \"&:nth-child(1)\": {\r\n      animation: \"$typing 600ms 200ms ease alternate backwards infinite\",\r\n    },\r\n    \"&:nth-child(2)\": {\r\n      animation: \"$typing 600ms 400ms ease alternate backwards infinite\",\r\n    },\r\n    \"&:nth-child(3)\": {\r\n      animation: \"$typing 600ms 600ms ease alternate backwards infinite\",\r\n    },\r\n  },\r\n  \"@keyframes typing\": {\r\n    from: {\r\n      opacity: \"0.3\",\r\n      transform: \"translateY(-50%) scale(1.1)\",\r\n    },\r\n    to: {\r\n      opacity: \"1\",\r\n    },\r\n  },\r\n});\r\n\r\nfunction TypingIndicator() {\r\n  const classes = useStyles();\r\n  return (\r\n    <Box className={classes.container} boxShadow={5}>\r\n      <div className={classes.dot}></div>\r\n      <div className={classes.dot}></div>\r\n      <div className={classes.dot}></div>\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default TypingIndicator;\r\n","import { Box, Typography, useTheme } from \"@material-ui/core\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport Header from \"./Header\";\r\nimport MessagesContainer from \"./MessagesContainer\";\r\nimport { useParams } from \"react-router\";\r\nimport axios from \"../../../api\";\r\n\r\nfunction ChatSection() {\r\n  const theme = useTheme();\r\n  const { username } = useParams();\r\n  const [userInfo, setUserInfo] = useState({});\r\n\r\n  useEffect(() => {\r\n    if (username) {\r\n      (async () => {\r\n        const res = await axios.get(`userinfo/${username}`);\r\n        setUserInfo(res.data);\r\n      })();\r\n    }\r\n  }, [username]);\r\n\r\n  if (!username) {\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        flexGrow=\"1\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n      >\r\n        <Typography variant=\"h6\" align=\"center\" color=\"textSecondary\">\r\n          Open Chat To Start Messenging.\r\n        </Typography>\r\n      </Box>\r\n    );\r\n  }\r\n  return (\r\n    <Box\r\n      width={1}\r\n      style={{ height: \"100vh\" }}\r\n      display=\"flex\"\r\n      flexDirection=\"column\"\r\n      position=\"relative\"\r\n      bgcolor={theme.palette.background.default}\r\n    >\r\n      <Header userInfo={userInfo} />\r\n      <MessagesContainer otherEndUser={userInfo} />\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default ChatSection;\r\n","import React, { useState } from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport {\r\n  Box,\r\n  CircularProgress,\r\n  IconButton,\r\n  makeStyles,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { PowerSettingsNew } from \"@material-ui/icons\";\r\nimport axios from \"../../../api\";\r\n\r\nconst useStyles = makeStyles({\r\n  logoutText: {\r\n    fontSize: \"0.9rem\",\r\n    fontWeight: \"bold\",\r\n  },\r\n});\r\n\r\nfunction LogoutButton() {\r\n  const classes = useStyles();\r\n  const [loggedIn, setLoggedIn] = useState(true);\r\n  const [loggingOut, setLoggingOut] = useState(false);\r\n\r\n  async function logout(type) {\r\n    try {\r\n      setLoggingOut(true);\r\n      const res = await axios.delete(\"/logout\", {\r\n        headers: { LogoutType: type },\r\n      });\r\n      if (res.status === 200) {\r\n        window.localStorage.clear();\r\n        console.log(\"cleared the localStorage\");\r\n        setLoggedIn(false);\r\n      }\r\n    } catch (err) {\r\n      setLoggingOut(false);\r\n    }\r\n  }\r\n\r\n  if (!loggedIn) {\r\n    return (\r\n      <Redirect\r\n        to={{\r\n          pathname: \"/login\",\r\n          state: {\r\n            alert: { type: \"success\", message: \"Succesfully LoggedOut!\" },\r\n          },\r\n        }}\r\n      />\r\n    );\r\n  }\r\n  return (\r\n    <>\r\n      <Box display=\"flex\" alignItems=\"center\">\r\n        <Typography className={classes.logoutText} color=\"textSecondary\">\r\n          Logout\r\n        </Typography>\r\n        <IconButton onClick={logout} size=\"small\" aria-label=\"logout\">\r\n          {loggingOut ? <CircularProgress size=\"1em\" /> : <PowerSettingsNew />}\r\n        </IconButton>\r\n      </Box>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default LogoutButton;\r\n","import React from \"react\";\r\nimport { Box, Avatar, Typography, makeStyles } from \"@material-ui/core\";\r\nimport { useContext } from \"react\";\r\nimport LoggedInUserContext from \"../../../context/LoggedInUserContext\";\r\n\r\nconst useStyles = makeStyles({\r\n  username: {\r\n    fontWeight: \"bolder\",\r\n    marginLeft: \"0.5em\",\r\n  },\r\n  userAvatar: {\r\n    \"&:hover\": {\r\n      cursor: \"pointer\",\r\n    },\r\n  },\r\n});\r\n\r\nfunction UserWithAvatar({ setShowChangeProfilePicture }) {\r\n  const classes = useStyles();\r\n  const { LoggedInUser } = useContext(LoggedInUserContext);\r\n  return (\r\n    <Box display=\"flex\" alignItems=\"center\">\r\n      <Avatar\r\n        onClick={() => {\r\n          setShowChangeProfilePicture(true);\r\n        }}\r\n        className={classes.userAvatar}\r\n        alt={LoggedInUser.username}\r\n        src={LoggedInUser.profilePic}\r\n      />\r\n      <Typography className={classes.username} variant=\"h6\" color=\"textPrimary\">\r\n        {LoggedInUser.firstName} {LoggedInUser.lastName}\r\n      </Typography>\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default UserWithAvatar;\r\n","import {\r\n  Avatar,\r\n  Box,\r\n  Button,\r\n  ButtonBase,\r\n  IconButton,\r\n  makeStyles,\r\n  Popover,\r\n  Typography,\r\n  withStyles,\r\n} from \"@material-ui/core\";\r\nimport { blue } from \"@material-ui/core/colors\";\r\nimport { Clear, Done, PersonAdd } from \"@material-ui/icons\";\r\nimport axios from \"../../../api\";\r\nimport React, { useContext, useEffect, useState } from \"react\";\r\nimport { StyledBadge } from \"./Conversation\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport SocketContext from \"../../../context/SocketContext\";\r\nimport { useTheme } from \"@material-ui/styles\";\r\n\r\nconst useStyles = makeStyles({\r\n  button: {\r\n    display: \"flex\",\r\n    padding: \"1em\",\r\n    alignItems: \"center\",\r\n  },\r\n});\r\n\r\nconst styles = (theme) => ({\r\n  buttonRipple: {\r\n    color: theme.palette.primary.main,\r\n  },\r\n  main: {\r\n    padding: \"0.5em\",\r\n    width: \"100%\",\r\n    justifyContent: \"start\",\r\n    \"&:hover\": {\r\n      transform: \"scale(1.01)\",\r\n      boxShadow: \"rgb(145 158 171 / 24%) 0px 5px 16px 0px\",\r\n    },\r\n  },\r\n});\r\n\r\nconst StyledButton = withStyles(styles)((props) => (\r\n  <ButtonBase\r\n    onClick={props.onClick}\r\n    className={props.classes.main}\r\n    TouchRippleProps={{ classes: { root: props.classes.buttonRipple } }}\r\n    component=\"div\"\r\n  >\r\n    {props.children}\r\n  </ButtonBase>\r\n));\r\n\r\nfunction MutualFriendInformation({ person }) {\r\n  const theme = useTheme();\r\n  let info = \"\";\r\n  switch (true) {\r\n    case person.mutualFriends.length === 0:\r\n      return null;\r\n    case person.mutualFriends.length === 1:\r\n      info = `${person.mutualFriends[0]} is mutual`;\r\n      break;\r\n    case person.mutualFriends.length === 2:\r\n      info = `${person.mutualFriends[0]} and ${person.mutualFriends[1]} are mutual`;\r\n      break;\r\n    default:\r\n      info = `${person.mutualFriends.length} mutual friends including ${person.mutualFriends[0]} and ${person.mutualFriends[1]}`;\r\n      break;\r\n  }\r\n\r\n  return (\r\n    <Typography variant=\"body2\" style={{ color: theme.palette.grey[700] }}>\r\n      {info}\r\n    </Typography>\r\n  );\r\n}\r\n\r\nfunction People({ person, type, update }) {\r\n  const history = useHistory();\r\n  const classes = useStyles();\r\n\r\n  //context\r\n  const socket = useContext(SocketContext);\r\n\r\n  //states\r\n  const [online, setOnline] = useState(person.online);\r\n\r\n  useEffect(() => {\r\n    //updateOnlineState\r\n    function updateOnlineState(username, state) {\r\n      username === person?.username && setOnline(state);\r\n    }\r\n\r\n    socket.on(\"onlineStateChange\", updateOnlineState);\r\n    return () => {\r\n      socket.off(\"onlineStateChange\", updateOnlineState);\r\n    };\r\n  }, [socket, person]);\r\n\r\n  //open messages\r\n  function openMessages() {\r\n    if (type===\"friend\") return history.push(`/messenger/${person.username}`);\r\n  }\r\n\r\n  //send FriendRequest\r\n  async function sendFriendRequest() {\r\n    try {\r\n      await axios.post(\"/friendrequest\", {\r\n        username: person.username,\r\n        type: \"send\",\r\n      });\r\n      update();\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  }\r\n\r\n  //accept FriendRequest\r\n  async function acceptFriendRequest() {\r\n    try {\r\n      await axios.post(\"/friendrequest\", {\r\n        username: person.username,\r\n        type: \"accept\",\r\n      });\r\n      update();\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  }\r\n\r\n  //reject FriendRequest\r\n  async function rejectFriendRequest() {\r\n    try {\r\n      await axios.post(\"/friendrequest\", {\r\n        username: person.username,\r\n        type: \"reject\",\r\n      });\r\n      update();\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  }\r\n\r\n  //cancel FriendRequest\r\n  async function cancelFriendRequest() {\r\n    try {\r\n      await axios.post(\"/friendrequest\", {\r\n        username: person.username,\r\n        type: \"cancel\",\r\n      });\r\n      update();\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  }\r\n\r\n  //unFriend\r\n  async function unFriend() {\r\n    try {\r\n      await axios.post(\"/friendrequest\", {\r\n        username: person.username,\r\n        type: \"unfriend\",\r\n      });\r\n      update();\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  }\r\n\r\n  //button for friend type\r\n  function FriendUnFriendBtn({ unFriend }) {\r\n    const theme = useTheme();\r\n    const [anchorEl, setAnchorEl] = React.useState(null);\r\n\r\n    const handleClick = (event) => {\r\n      setAnchorEl(event.currentTarget);\r\n    };\r\n\r\n    const handleClose = () => {\r\n      setAnchorEl(null);\r\n    };\r\n\r\n    const open = Boolean(anchorEl);\r\n    const id = open ? \"unfriend\" : undefined;\r\n\r\n    return (\r\n      <>\r\n        <Button\r\n          aria-describedby={id}\r\n          variant=\"outlined\"\r\n          color=\"primary\"\r\n          onClick={handleClick}\r\n          style={{ marginLeft: \"auto\", textTransform: \"capitalize\" }}\r\n        >\r\n          Friends\r\n        </Button>\r\n        <Popover\r\n          id={id}\r\n          open={open}\r\n          anchorEl={anchorEl}\r\n          onClose={handleClose}\r\n          anchorOrigin={{\r\n            vertical: \"bottom\",\r\n            horizontal: \"center\",\r\n          }}\r\n          transformOrigin={{\r\n            vertical: \"top\",\r\n            horizontal: \"center\",\r\n          }}\r\n        >\r\n          <Button\r\n            variant=\"outlined\"\r\n            onClick={unFriend}\r\n            style={{\r\n              marginLeft: \"auto\",\r\n              textTransform: \"capitalize\",\r\n              color: theme.palette.grey[700],\r\n            }}\r\n          >\r\n            Unfriend\r\n          </Button>\r\n        </Popover>\r\n      </>\r\n    );\r\n  }\r\n\r\n  function getButton(type) {\r\n    switch (type) {\r\n      case \"friendRequest\": \r\n        return (\r\n          <Box ml=\"auto\" display=\"flex\">\r\n            {/* accept Button */}\r\n            <IconButton onClick={acceptFriendRequest}>\r\n              <Done htmlColor={blue[600]} />\r\n            </IconButton>\r\n\r\n            {/* reject Button */}\r\n            <IconButton onClick={rejectFriendRequest}>\r\n              <Clear color=\"error\" />\r\n            </IconButton>\r\n          </Box>\r\n        );\r\n      case \"unknown\": //not friend\r\n        return (\r\n          // add friend button\r\n          <IconButton\r\n            onClick={sendFriendRequest}\r\n            style={{ marginLeft: \"auto\" }}\r\n          >\r\n            <PersonAdd />\r\n          </IconButton>\r\n        );\r\n      case \"pendingRequest\":\r\n        return (\r\n          // cancle request button\r\n          <Button\r\n            variant=\"outlined\"\r\n            color=\"primary\"\r\n            onClick={cancelFriendRequest}\r\n            style={{ marginLeft: \"auto\", textTransform: \"capitalize\" }}\r\n          >\r\n            Cancel\r\n          </Button>\r\n        );\r\n      case \"friend\":\r\n        return <FriendUnFriendBtn unFriend={unFriend} />;\r\n      default:\r\n        return null;\r\n    }\r\n  }\r\n\r\n  return (\r\n    <StyledButton\r\n      onClick={openMessages}\r\n      className={classes.button}\r\n      component=\"div\"\r\n    >\r\n      <StyledBadge\r\n        variant=\"dot\"\r\n        overlap=\"circle\"\r\n        anchorOrigin={{ vertical: \"bottom\", horizontal: \"right\" }}\r\n        badgeContent=\" \"\r\n        isonline={online ? 1 : 0}\r\n      >\r\n        <Avatar alt={person.firstName} src={person.profilePic} />\r\n      </StyledBadge>\r\n      <Box ml={2}>\r\n        <Typography\r\n          variant=\"h6\"\r\n          style={{ fontSize: \"1rem\" }}\r\n          color=\"textPrimary\"\r\n        >\r\n          {person.firstName} {person.lastName}\r\n        </Typography>\r\n        {/* mutual friends information*/}\r\n        {type ? <MutualFriendInformation person={person} /> : null}\r\n      </Box>\r\n      {getButton(type)}\r\n    </StyledButton>\r\n  );\r\n}\r\n\r\nexport default People;\r\n","import { makeStyles, Tab, Tabs, Box } from \"@material-ui/core\";\r\nimport { Chat, GroupAdd, People } from \"@material-ui/icons\";\r\nimport React, { createContext, useState } from \"react\";\r\nimport FriendList from \"./FriendList\";\r\nimport FindFriends from \"./FindFriends/index\";\r\nimport ConversationsContainer from \"./ConversationsContainer\";\r\n\r\n//creating the contexts\r\nconst FriendListContext = createContext();\r\nconst MessagesContext = createContext();\r\nconst FriendRequestsContext = createContext();\r\nconst PendingFriendRequestsContext = createContext();\r\nconst PeopleYouMayKnowContext = createContext();\r\n\r\nconst useStyles = makeStyles({\r\n  tab: {\r\n    width: `${(1 / 3) * 100}%`,\r\n    \"@media (min-width: 600px)\": {\r\n      minWidth: \"60px\",\r\n    },\r\n  },\r\n});\r\n\r\nfunction SelectionMenu() {\r\n  const classes = useStyles();\r\n  const [index, setIndex] = useState(0);\r\n\r\n\r\n  const handleChange = (event, newIndex) => {\r\n    setIndex(newIndex);\r\n  };\r\n  return (\r\n    <>\r\n      <Box mt={2} boxShadow=\"rgb(145 158 171 / 24%) 0px 3px 8px 0px\" >\r\n        <Tabs\r\n          value={index}\r\n          onChange={handleChange}\r\n          variant=\"fullWidth\"\r\n          indicatorColor=\"primary\"\r\n          textColor=\"primary\"\r\n          aria-label=\"icon tabs example\"\r\n        >\r\n          <Tab className={classes.tab} icon={<Chat />} aria-label=\"phone\" />\r\n          <Tab\r\n            className={classes.tab}\r\n            icon={<People />}\r\n            aria-label=\"favorite\"\r\n          />\r\n          <Tab\r\n            className={classes.tab}\r\n            icon={<GroupAdd />}\r\n            aria-label=\"person\"\r\n          />\r\n        </Tabs>\r\n      </Box>\r\n      <TabPanel\r\n        components={[\r\n          <ConversationsContainer />,\r\n          <FriendList />,\r\n          <FindFriends />,\r\n        ]}\r\n        index={index}\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nfunction TabPanel({ components, index }) {\r\n  return components[index];\r\n}\r\n\r\nexport default SelectionMenu;\r\nexport {\r\n  MessagesContext,\r\n  FriendListContext,\r\n  FriendRequestsContext,\r\n  PendingFriendRequestsContext,\r\n  PeopleYouMayKnowContext,\r\n};\r\n","import { Box, makeStyles, Typography, useTheme } from \"@material-ui/core\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport axios from \"../../../../api\";\r\nimport axiosMain from \"axios\";\r\nimport People from \"../People\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  searchResultsContainer: {\r\n    position: \"absolute\",\r\n    overflowY: \"scroll\",\r\n    maxHeight: \"50vh\",\r\n    width: \"calc(100% - 2em)\",\r\n    margin: \"0 1em\",\r\n    left: \"0\",\r\n    padding: \"0.5em 0.2em 0.5em 0.5em\",\r\n    backgroundColor: theme.palette.background.paper,\r\n    borderRadius: \"0 0 10px 10px\",\r\n    zIndex: \"1000\",\r\n    boxShadow: \"rgb(145 158 171 / 10%) 0px 2px 5px 3px\",\r\n  },\r\n}));\r\n\r\nfunction SearchResults({ searchText }) {\r\n  const theme = useTheme();\r\n  const classes = useStyles();\r\n  const [searchResults, setSearchResults] = useState([]);\r\n  const [changed, setChanged] = useState();\r\n  const searchResultsContainer = useRef();\r\n\r\n  function update() {\r\n    setChanged(Math.random());\r\n  }\r\n\r\n  useEffect(() => {\r\n    const cancelTokenSource = axiosMain.CancelToken.source();\r\n\r\n    async function getSearchResults(searchTerm) {\r\n      const res = await axios.get(`/search?search_term=${searchTerm}`, {\r\n        cancelToken: cancelTokenSource.token,\r\n      });\r\n      return res.data;\r\n    }\r\n\r\n    if (searchText) {\r\n      getSearchResults(searchText).then((results) => {\r\n        setSearchResults(results);\r\n      });\r\n    }\r\n\r\n    return () => {\r\n      cancelTokenSource.cancel();\r\n    };\r\n  }, [changed, searchText]);\r\n\r\n  return (\r\n    <Box\r\n      className={classes.searchResultsContainer}\r\n      ref={searchResultsContainer}\r\n    >\r\n      {searchText && !searchResults.length ? (\r\n        <Typography\r\n          style={{ margin: \"0.5em\" }}\r\n          align=\"center\"\r\n          color=\"textSecondary\"\r\n        >\r\n          No Results Found!\r\n        </Typography>\r\n      ) : null}\r\n\r\n      {/* friends */}\r\n      {searchResults?.map((person) => {\r\n        if (person.isFriend) {\r\n          return (\r\n            <People\r\n              key={person._id}\r\n              person={person}\r\n              type=\"friend\"\r\n              update={update}\r\n            />\r\n          );\r\n        }\r\n        return null;\r\n      })}\r\n\r\n      {/* more People (unknown persons) */}\r\n      {searchResults.some((person) => {\r\n        return !person.isFriend;\r\n      }) ? (\r\n        <>\r\n          <Typography\r\n            variant=\"body1\"\r\n            style={{\r\n              fontWeight: \"bold\",\r\n              margin: \"0.4em 0\",\r\n              marginLeft: \"0.8em\",\r\n              color: theme.palette.primary.main,\r\n            }}\r\n          >\r\n            More People\r\n          </Typography>\r\n          {searchResults?.map((person) => {\r\n            if (person.isRequestPending)\r\n              return (\r\n                <People\r\n                  key={person._id}\r\n                  type=\"pendingRequest\"\r\n                  person={person}\r\n                  update={update}\r\n                />\r\n              );\r\n            if (person.hasSentFriendRequest)\r\n              return (\r\n                <People\r\n                  key={person._id}\r\n                  type=\"friendRequest\"\r\n                  person={person}\r\n                  update={update}\r\n                />\r\n              );\r\n            if (!person.isFriend) {\r\n              return (\r\n                <People\r\n                  key={person._id}\r\n                  type=\"unknown\"\r\n                  person={person}\r\n                  update={update}\r\n                />\r\n              );\r\n            }\r\n            return null;\r\n          })}\r\n        </>\r\n      ) : null}\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default SearchResults;\r\n","import React, { useEffect, useRef, useState } from \"react\";\r\nimport { Box, IconButton, makeStyles } from \"@material-ui/core\";\r\nimport SearchResults from \"./SearchResults\";\r\nimport { Search } from \"@material-ui/icons\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    margin: \"1em\",\r\n  },\r\n  searchForm: {\r\n    display: \"flex\",\r\n    paddingLeft: \"1em\",\r\n    width: \"100%\",\r\n  },\r\n  searchInput: {\r\n    color: theme.palette.text.primary,\r\n    fontSize: \"1rem\",\r\n    background: \"transparent\",\r\n    outline: \"none\",\r\n    border: \"none\",\r\n    width: \"100%\",\r\n    \"&::placeholder\": {\r\n      color: theme.palette.text.secondary,\r\n      fontSize: \"1rem\",\r\n    },\r\n  },\r\n}));\r\n\r\nfunction SearchBox() {\r\n  const classes = useStyles();\r\n  const [searchText, setSearchText] = useState();\r\n  const [showSearchResults, setShowSearchResults] = useState(false);\r\n  //refs\r\n  const searchBoxRef = useRef();\r\n\r\n  function handleChange(e) {\r\n    setSearchText(e.target.value);\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    searchText && setShowSearchResults(true);\r\n  }\r\n\r\n  function handleClickOutside(e) {\r\n    if (searchBoxRef.current && !searchBoxRef.current.contains(e.target))\r\n      setShowSearchResults(false);\r\n  }\r\n\r\n  useEffect(() => {\r\n    searchText ? setShowSearchResults(true) : setShowSearchResults(false);\r\n  }, [searchText]);\r\n\r\n  useEffect(() => {\r\n    document.addEventListener(\"click\", handleClickOutside);\r\n    return () => {\r\n      document.removeEventListener(\"click\", handleClickOutside);\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <Box\r\n        className={classes.root}\r\n        borderRadius=\"5px\"\r\n        boxShadow=\"rgb(145 158 171 / 10%) 0px 2px 5px 3px\"\r\n        tabIndex=\"-1\"\r\n        onFocus={() => {\r\n          searchText && !showSearchResults && setShowSearchResults(true);\r\n        }}\r\n        ref={searchBoxRef}\r\n      >\r\n        <form className={classes.searchForm} onSubmit={handleSubmit}>\r\n          <input\r\n            className={classes.searchInput}\r\n            placeholder=\"Search...\"\r\n            value={searchText}\r\n            onFocus={() => {\r\n              searchText && setShowSearchResults(true);\r\n            }}\r\n            onChange={(e) => {\r\n              handleChange(e);\r\n            }}\r\n          />\r\n          <IconButton type=\"submit\">\r\n            <Search />\r\n          </IconButton>\r\n        </form>\r\n        {showSearchResults ? <SearchResults searchText={searchText} /> : null}\r\n      </Box>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default SearchBox;\r\n","import React from \"react\";\r\nimport { Box, makeStyles } from \"@material-ui/core\";\r\nimport LogoutButton from \"./LogoutButton\";\r\nimport UserWithAvatar from \"./UserWithAvatar\";\r\nimport SelectionMenu from \"./SelectionMenu\";\r\nimport SearchBox from \"./SearchBox/index.jsx\";\r\nimport { useTheme } from \"@material-ui/styles\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    position: \"relative\",\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    maxWidth: \"400px\",\r\n    minWidth: \"400px\",\r\n    height: \"100vh\",\r\n    [theme.breakpoints.down(\"sm\")]: {\r\n      minWidth: \"100%\",\r\n    },\r\n  },\r\n}));\r\n\r\nfunction SideNavigation({ setShowChangeProfilePicture }) {\r\n  const theme = useTheme();\r\n  const classes = useStyles();\r\n  return (\r\n    <Box\r\n      className={classes.root}\r\n      borderRight={`2px solid ${theme.palette.grey[200]}`}\r\n    >\r\n      <Box\r\n        px={2}\r\n        py={3}\r\n        display=\"flex\"\r\n        alignItems=\"center\"\r\n        justifyContent=\"space-between\"\r\n      >\r\n        <UserWithAvatar\r\n          setShowChangeProfilePicture={setShowChangeProfilePicture}\r\n        />\r\n        <LogoutButton />\r\n      </Box>\r\n      <SearchBox />\r\n      <SelectionMenu />\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default SideNavigation;\r\n","import {\r\n  Avatar,\r\n  Box,\r\n  Button,\r\n  CircularProgress,\r\n  makeStyles,\r\n  Modal,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { Image, Publish } from \"@material-ui/icons\";\r\nimport React, { useContext, useState } from \"react\";\r\nimport axios from \"../../api\";\r\nimport Alert from \"../Utils/Alert\";\r\nimport LoggedInUserContext from \"../../context/LoggedInUserContext\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  modal: {\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n  },\r\n  modal__content: {\r\n    height: \"600px\",\r\n    width: \"400px\",\r\n    borderRadius: \"10px\",\r\n    backgroundColor: theme.palette.background.paper,\r\n    boxShadow: theme.shadows[5],\r\n    outline: \"none\",\r\n  },\r\n  avatar: {\r\n    margin: \"1em 0\",\r\n    height: \"170px\",\r\n    width: \"170px\",\r\n  },\r\n  btnsContainer: {\r\n    margin: \"1.5em 0\",\r\n  },\r\n  greetingText: {\r\n    marginTop: \"0.3em\",\r\n  },\r\n  infoText: {\r\n    fontSize: \"1.2rem\",\r\n  },\r\n  fullNameText: {\r\n    marginTop: \"1.5em\",\r\n    fontSize: \"1.8rem\",\r\n    fontWeight: \"bold\",\r\n    color: \"#2e2e2e\",\r\n  },\r\n  usernameText: {\r\n    marginTop: \"0.3em\",\r\n    marginBottom: \"0.8em\",\r\n    fontSize: \"1.4rem\",\r\n    fontWeight: \"500\",\r\n    color: \"#2e2e2e\",\r\n  },\r\n  btn: {\r\n    margin: \"0.5em 0\",\r\n    padding: \"0.5em\",\r\n    width: \"75%\",\r\n    \"&:last-child\": {\r\n      margin: \"3em 0\",\r\n    },\r\n  },\r\n}));\r\n\r\nfunction ChangeProfilePicture({ greeting, setShowChangeProfilePicture }) {\r\n  const classes = useStyles();\r\n  const { LoggedInUser, setLoggedInUser } = useContext(LoggedInUserContext);\r\n\r\n  //states\r\n  const [profilePicture, setProfilePicture] = useState(LoggedInUser.profilePic);\r\n  const [selectedImage, setSelectedImage] = useState();\r\n  const [open, setOpen] = useState(true);\r\n  const [uploading, setUploading] = useState(false);\r\n  const [alert, setAlert] = useState();\r\n\r\n  const showProfilePicture = (e) => {\r\n    const reader = new FileReader();\r\n    e.target.files[0] && reader.readAsDataURL(e.target.files[0]); //This reads the file as urlencoded base64 string.\r\n    reader.addEventListener(\"load\", () => {\r\n      setSelectedImage(reader.result);\r\n      setProfilePicture(reader.result);\r\n    });\r\n  };\r\n\r\n  async function uploadProfilePicture() {\r\n    if (selectedImage) {\r\n      try {\r\n        setUploading(true); //start the loading spinner\r\n        const res = await axios.post(\"/uploadprofilepic\", {\r\n          data: profilePicture,\r\n        });\r\n        setUploading(false); //stop the loading spinner\r\n        setAlert({\r\n          type: \"success\",\r\n          message: res.data.message,\r\n        });\r\n\r\n        //update the profilePic property of the LoggedInUserContext\r\n        setLoggedInUser((prev) => {\r\n          const userInfo = { ...prev };\r\n          userInfo.profilePic = res.data.profilePicURL;\r\n          return userInfo;\r\n        });\r\n        /*\r\n          alert completes at 2000 so waiting for alert to hide before closing/unmounting the modal.\r\n          After 2000ms the showAlert state is set to false. So if the modal is closed/unmounted\r\n          before the 2000ms, setState will be called after it. So error will occur \r\n          trying to setState of the component after unmount.\r\n        */\r\n        setTimeout(handleClose, 2100);\r\n      } catch (err) {\r\n        setAlert({\r\n          type: \"error\",\r\n          message: err.response?.data.message || err.message,\r\n        });\r\n        setUploading(false);\r\n      }\r\n    } else {\r\n      setAlert({ type: \"warning\", message: \"select image first\" });\r\n    }\r\n  }\r\n\r\n  function handleClose() {\r\n    setOpen(false);\r\n    setShowChangeProfilePicture && setShowChangeProfilePicture(false);\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Modal className={classes.modal} open={open}>\r\n        <Box\r\n          display=\"flex\"\r\n          flexDirection=\"column\"\r\n          alignItems=\"center\"\r\n          className={classes.modal__content}\r\n        >\r\n          {alert ? <Alert type={alert.type}>{alert.message}</Alert> : null}\r\n          <Typography\r\n            className={classes.fullNameText}\r\n            variant=\"h5\"\r\n            align=\"center\"\r\n          >\r\n            {LoggedInUser.firstName} {LoggedInUser.lastName}\r\n          </Typography>\r\n          <Typography\r\n            className={classes.usernameText}\r\n            variant=\"h6\"\r\n            align=\"center\"\r\n          >\r\n            @{LoggedInUser.username}\r\n          </Typography>\r\n          <Typography\r\n            className={`${classes.txtWhite} ${classes.infoText}`}\r\n            align=\"center\"\r\n          >\r\n            {greeting ? (\r\n              <>\r\n                Welcome to Messenger.\r\n                <br />\r\n                Set your Profile Picture to continue.\r\n              </>\r\n            ) : null}\r\n          </Typography>\r\n          <Avatar\r\n            className={classes.avatar}\r\n            src={profilePicture}\r\n            alt=\"avatar\"\r\n          />\r\n\r\n          {uploading ? <CircularProgress size=\"2rem\" /> : null}\r\n\r\n          {/* Image upload Input */}\r\n          <Box\r\n            display=\"flex\"\r\n            flexDirection=\"column\"\r\n            alignItems=\"center\"\r\n            width={1}\r\n            mt=\"auto\"\r\n            mb=\"2em\"\r\n          >\r\n            <input\r\n              accept=\"image/*\"\r\n              style={{ display: \"none\" }}\r\n              id=\"raised-button-file\"\r\n              type=\"file\"\r\n              onChange={showProfilePicture}\r\n            />\r\n\r\n            <Button\r\n              className={classes.btn}\r\n              variant=\"contained\"\r\n              component=\"label\"\r\n              htmlFor=\"raised-button-file\"\r\n              color=\"primary\"\r\n              endIcon={<Image />}\r\n            >\r\n              Choose\r\n            </Button>\r\n            <Button\r\n              className={classes.btn}\r\n              onClick={uploadProfilePicture}\r\n              variant=\"contained\"\r\n              component=\"span\"\r\n              color=\"primary\"\r\n              endIcon={<Publish />}\r\n            >\r\n              Upload\r\n            </Button>\r\n\r\n            {/* skip/close button */}\r\n            <Button\r\n              className={classes.btn}\r\n              variant=\"contained\"\r\n              color=\"secondary\"\r\n              onClick={handleClose}\r\n            >\r\n              {greeting ? \"Skip Now\" : \"Close\"}\r\n            </Button>\r\n          </Box>\r\n        </Box>\r\n      </Modal>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default ChangeProfilePicture;\r\n","export default __webpack_public_path__ + \"static/media/connecting.bbd9a0bf.mp3\";","export default __webpack_public_path__ + \"static/media/connected.2638f3bf.mp3\";","export default __webpack_public_path__ + \"static/media/calling.60d66047.mp3\";","export default __webpack_public_path__ + \"static/media/callFailed.11708baa.mp3\";","export default __webpack_public_path__ + \"static/media/ringing.6cf9231c.mp3\";","export default __webpack_public_path__ + \"static/media/reconnecting.bbd9a0bf.mp3\";","export default __webpack_public_path__ + \"static/media/connectionLost.11708baa.mp3\";","export default __webpack_public_path__ + \"static/media/hangup.abe2a5aa.mp3\";","import {\r\n  Avatar,\r\n  Box,\r\n  IconButton,\r\n  makeStyles,\r\n  Slide,\r\n  Typography,\r\n  useTheme,\r\n} from \"@material-ui/core\";\r\nimport { Call, CallEnd, Mic, MicOff, VideoCall } from \"@material-ui/icons\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { createRef } from \"react\";\r\nimport Timer from \"./CallTimer\";\r\n// import Sounds from \"./Sounds\";\r\nimport { CALLSTATES } from \".\"; //STRING CONSTANTS\r\nimport useCallSounds from \"./useCallSounds\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  call_alert: {\r\n    width: \"fit-content\",\r\n    padding: \"1em\",\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    position: \"absolute\",\r\n    top: \"5px\",\r\n    left: \"50%\",\r\n    transform: \"translate(-50%)\",\r\n    zIndex: \"2000\",\r\n    borderRadius: \"20px\",\r\n    backgroundColor: theme.palette.background.paper,\r\n  },\r\n\r\n  //ripple animation around Avatar\r\n  call_animation: {\r\n    width: \"3em\",\r\n    height: \"3em\",\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    position: \"relative\",\r\n    borderRadius: \"50%\",\r\n    animation: \"$ripple 2s ease infinite\",\r\n    webkitBackfaceVisibility: \"hidden\",\r\n    mozBackfaceVisibility: \"hidden\",\r\n    msBackfaceVisibility: \"hidden\",\r\n    backfaceVisibility: \"hidden\",\r\n  },\r\n\r\n  \"@keyframes ripple\": {\r\n    \"0%\": {\r\n      transform: \" scale(1)\",\r\n    },\r\n    \"15%\": {\r\n      boxShadow:\r\n        \"0 0 0 3px\" +\r\n        (theme.palette.type === \"dark\" ? \"#ffffff66\" : \"#aadff866\"),\r\n    },\r\n    \"25%\": {\r\n      boxShadow:\r\n        \" 0 0 0 5px\" +\r\n        (theme.palette.type === \"dark\" ? \"#ffffff66\" : \"#aadff866\") +\r\n        \", 0 0 0 10px\" +\r\n        (theme.palette.type === \"dark\" ? \"#ffffff33\" : \"#aadff833\"),\r\n    },\r\n  },\r\n  avatar: {\r\n    height: \"2.5em\",\r\n    width: \"2.5em\",\r\n  },\r\n  callerName: {\r\n    fontSize: \"1.1rem\",\r\n  },\r\n}));\r\n\r\nconst useButtonStyles = makeStyles((theme) => ({\r\n  button: {\r\n    marginLeft: \"0.2em\",\r\n    backgroundColor: theme.palette.background.default,\r\n  },\r\n  button_incoming: {\r\n    margin: \"0 0.2em\",\r\n    backgroundColor: theme.palette.background.default,\r\n    animation: \"$vibrate 100ms infinite alternate ease-in-out\",\r\n  },\r\n  \"@keyframes vibrate\": {\r\n    from: {\r\n      transform: \"rotateZ(-5deg) translateY(0px)\",\r\n    },\r\n    to: {\r\n      transform: \"rotateZ(5deg) translateY(1px)\",\r\n    },\r\n  },\r\n}));\r\n\r\nfunction CallStatus({ callState, callStartedTime }) {\r\n  const theme = useTheme();\r\n\r\n  const getTextColor = () => {\r\n    switch (callState) {\r\n      case CALLSTATES.CALLFAILED:\r\n      case CALLSTATES.CONNECTIONLOST:\r\n      case \"hangup\":\r\n        return theme.palette.error.main;\r\n      case CALLSTATES.NOANSWER:\r\n      case CALLSTATES.BUSY:\r\n        return theme.palette.warning.main;\r\n\r\n      default:\r\n        return theme.palette.text.secondary;\r\n    }\r\n  };\r\n  return (\r\n    <Typography\r\n      style={{ color: getTextColor() || theme.palette.text.secondary }}\r\n      variant=\"body1\"\r\n    >\r\n      {\r\n        {\r\n          connecting: \"connecting. . .\",\r\n          connected: \"connected\",\r\n          callFailed: \"call Failed!\",\r\n          calling: \"calling. . .\",\r\n          ringing: \"Incoming Call. . .\",\r\n          noAnswer: \"No Answer!\",\r\n          busy: \"Busy!\",\r\n          ongoing: (\r\n            <Timer callStartedTime={callStartedTime} callState={callState} />\r\n          ),\r\n          reconnecting: \"Reconnecting. . .\",\r\n          connectionLost: (\r\n            <span>\r\n              <Timer callStartedTime={callStartedTime} callState={callState} />\r\n              {\"\\tConnection Lost!\"}\r\n            </span>\r\n          ),\r\n          hangup: (\r\n            <span>\r\n              <Timer callStartedTime={callStartedTime} callState={callState} />\r\n              {\"\\tcall Ended!\"}\r\n            </span>\r\n          ),\r\n        }[callState]\r\n      }\r\n    </Typography>\r\n  );\r\n}\r\n\r\nfunction MicButton({ disabled, muted, setMuted }) {\r\n  const theme = useTheme();\r\n  const classes = useButtonStyles();\r\n  return (\r\n    <IconButton\r\n      className={classes.button}\r\n      disabled={disabled}\r\n      onClick={() => {\r\n        setMuted(!muted);\r\n      }}\r\n    >\r\n      {muted ? (\r\n        <MicOff htmlColor={theme.palette.grey[500]} />\r\n      ) : (\r\n        <Mic htmlColor={theme.palette.grey[500]} />\r\n      )}\r\n    </IconButton>\r\n  );\r\n}\r\n\r\nfunction RecallButton({ callType, callingUser }) {\r\n  const theme = useTheme();\r\n  const classes = useButtonStyles();\r\n  return (\r\n    <IconButton\r\n      className={classes.button_incoming}\r\n      onClick={() => {\r\n        const call = new CustomEvent(\"call\", {\r\n          detail: { callingUser, callType },\r\n        });\r\n        document.dispatchEvent(call);\r\n      }}\r\n    >\r\n      <Call htmlColor={theme.palette.success.main} />\r\n    </IconButton>\r\n  );\r\n}\r\nfunction AcceptCallButton({ callType }) {\r\n  const theme = useTheme();\r\n  const classes = useButtonStyles();\r\n  return (\r\n    <IconButton\r\n      className={classes.button_incoming}\r\n      onClick={() => {\r\n        const callAccepted = new CustomEvent(\"callAccepted\");\r\n        document.dispatchEvent(callAccepted);\r\n      }}\r\n    >\r\n      {\r\n        {\r\n          AudioCall: <Call htmlColor={theme.palette.success.main} />,\r\n          VideoCall: <VideoCall htmlColor={theme.palette.success.main} />,\r\n        }[callType]\r\n      }\r\n    </IconButton>\r\n  );\r\n}\r\n\r\nfunction EndCallButton() {\r\n  const theme = useTheme();\r\n  const classes = useButtonStyles();\r\n  return (\r\n    <IconButton\r\n      className={classes.button}\r\n      onClick={() => {\r\n        const callEnd = new CustomEvent(\"callEnd\");\r\n        document.dispatchEvent(callEnd);\r\n      }}\r\n    >\r\n      <CallEnd htmlColor={theme.palette.error.main} />\r\n    </IconButton>\r\n  );\r\n}\r\n\r\nfunction ActionButtons({ callType, callState, callingUser, muted, setMuted }) {\r\n  switch (true) {\r\n    case [\r\n      CALLSTATES.CONNECTING,\r\n      CALLSTATES.CONNECTED,\r\n      CALLSTATES.CALLING,\r\n      CALLSTATES.ONGOING,\r\n      CALLSTATES.RECONNECTING,\r\n    ].some((state) => state === callState):\r\n      return (\r\n        <>\r\n          <MicButton\r\n            disabled={callState !== CALLSTATES.ONGOING}\r\n            muted={muted}\r\n            setMuted={setMuted}\r\n          />\r\n          <EndCallButton />\r\n        </>\r\n      );\r\n\r\n    case [\r\n      CALLSTATES.CALLFAILED,\r\n      CALLSTATES.NOANSWER,\r\n      CALLSTATES.BUSY,\r\n      CALLSTATES.CONNECTIONLOST,\r\n    ].some((state) => state === callState):\r\n      return <RecallButton callType={callType} callingUser={callingUser} />;\r\n\r\n    case callState === CALLSTATES.RINGING:\r\n      return (\r\n        <>\r\n          <AcceptCallButton callType={callType} />\r\n          <EndCallButton />\r\n        </>\r\n      );\r\n    default:\r\n      return null;\r\n  }\r\n}\r\n\r\nfunction CallAlert({\r\n  direction,\r\n  callType,\r\n  callState,\r\n  callingUser,\r\n  remoteStream,\r\n  localStream,\r\n  callStartedTime,\r\n}) {\r\n  const classes = useStyles();\r\n  //refs\r\n  const alertRef = createRef(null);\r\n  const audioRef = useRef();\r\n  //states\r\n  const [muted, setMuted] = useState(false);\r\n\r\n  // call Sounds\r\n  useCallSounds(callState);\r\n\r\n  useEffect(() => {\r\n    if (localStream) {\r\n      localStream.getAudioTracks().forEach((track) => (track.enabled = !muted)); //toggle mic\r\n    }\r\n  }, [muted, localStream]);\r\n\r\n  useEffect(() => {\r\n    if (remoteStream) {\r\n      audioRef.current.srcObject = remoteStream;\r\n      audioRef.current.play();\r\n    }\r\n  }, [remoteStream]);\r\n\r\n  return (\r\n    <Slide direction=\"down\" in={true} timeout={{ enter: 200, exit: 500 }}>\r\n      <Box className={classes.call_alert} boxShadow={5} ref={alertRef}>\r\n        {remoteStream && <audio ref={audioRef} autoPlay={true} />}\r\n\r\n        {/* <CallSounds callState={callState} /> */}\r\n\r\n        <div className={classes.call_animation}>\r\n          <Avatar\r\n            className={classes.avatar}\r\n            src={callingUser.profilePic}\r\n            alt=\"user\"\r\n          />\r\n        </div>\r\n\r\n        <Box\r\n          mx=\"1em\"\r\n          style={{\r\n            //makes text unselectable\r\n            WebkitUserSelect: \"none\" /* Chrome all / Safari all */,\r\n            MozUserSelect: \"none\" /* Firefox all */,\r\n            msUserSelect: \"none\" /* IE 10+ */,\r\n            userSelect: \"none\",\r\n          }}\r\n        >\r\n          <CallStatus callState={callState} callStartedTime={callStartedTime} />\r\n\r\n          <Typography color=\"textPrimary\" style={{ fontSize: \"1.1em\" }}>\r\n            {callingUser.firstName} {callingUser.lastName}\r\n          </Typography>\r\n        </Box>\r\n\r\n        <ActionButtons\r\n          callState={callState}\r\n          callType={callType}\r\n          direction={direction}\r\n          muted={muted}\r\n          setMuted={setMuted}\r\n        />\r\n      </Box>\r\n    </Slide>\r\n  );\r\n}\r\n\r\nexport default CallAlert;\r\n","import { Box, IconButton, makeStyles } from \"@material-ui/core\";\r\nimport {\r\n  CallEnd,\r\n  Mic,\r\n  MicOff,\r\n  Videocam,\r\n  VideocamOff,\r\n} from \"@material-ui/icons\";\r\nimport React, { useRef } from \"react\";\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    position: \"absolute\",\r\n    top: \"100%\",\r\n    transform: \"translateY(-100%)\",\r\n    marginTop: \"-2em\",\r\n  },\r\n  actionBtn: {\r\n    height: \"2.5em\",\r\n    width: \"2.5em\",\r\n    margin: \"0 0.8em\",\r\n    \"&:nth-child(1),&:nth-child(2)\": {\r\n      backgroundColor: \"#7c7c7c62\",\r\n      backdropFilter: \"blur(5px)\",\r\n      webkitBackdropFilter: \"blur(5px)\",\r\n    },\r\n    \"&:last-child\": {\r\n      backgroundColor: \"#ff0000\",\r\n      backdropFilter: \"blur(5px)\",\r\n      webkitBackdropFilter: \"blur(5px)\",\r\n    },\r\n  },\r\n});\r\n\r\nfunction ActionButtons({ muted, cameraEnabled, setMuted, setCameraEnabled }) {\r\n  const classes = useStyles();\r\n  const callEndRef = useRef(new Event(\"callEnd\"));\r\n\r\n  function endCall() {\r\n    const callEnd = callEndRef.current;\r\n    document.dispatchEvent(callEnd);\r\n  }\r\n\r\n  return (\r\n    <Box className={classes.root}>\r\n      <Box className={classes.ActionButtons}>\r\n        <IconButton\r\n          className={classes.actionBtn}\r\n          onClick={() => {\r\n            setCameraEnabled(!cameraEnabled);\r\n          }}\r\n        >\r\n          {cameraEnabled ? (\r\n            <Videocam htmlColor=\"white\" />\r\n          ) : (\r\n            <VideocamOff htmlColor=\"white\" />\r\n          )}\r\n        </IconButton>\r\n        <IconButton\r\n          className={classes.actionBtn}\r\n          onClick={() => {\r\n            setMuted(!muted);\r\n          }}\r\n        >\r\n          {muted ? <MicOff htmlColor=\"white\" /> : <Mic htmlColor=\"white\" />}\r\n        </IconButton>\r\n        <IconButton className={classes.actionBtn} onClick={endCall}>\r\n          <CallEnd htmlColor=\"white\" />\r\n        </IconButton>\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default ActionButtons;\r\n","import {\r\n  Avatar,\r\n  Box,\r\n  IconButton,\r\n  makeStyles,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { Fullscreen, FullscreenExit } from \"@material-ui/icons\";\r\nimport React, { useState } from \"react\";\r\nimport { CALLSTATES } from \".\";\r\nimport Timer from \"./CallTimer\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  videoCallHeader: {\r\n    position: \"absolute\",\r\n    zIndex: \"1000\",\r\n    backgroundColor: \"#7c7c7c62\",\r\n    backdropFilter: \"blur(5px)\",\r\n    webkitBackdropFilter: \"blur(5px)\",\r\n    width: \"100%\",\r\n    padding: \"0.8em\",\r\n    alignSelf: \"stretch\",\r\n    display: \"flex\",\r\n    justifyContent: \"space-between\",\r\n  },\r\n  userInfoContainer: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    margin: \"0 0.5em\",\r\n  },\r\n  headerBtn: {\r\n    margin: \"0 0.5em\",\r\n  },\r\n  wrapper: {\r\n    color: \"#fff\",\r\n    marginLeft: \"1em\",\r\n  },\r\n  timer: {\r\n    color: theme.palette.grey[300],\r\n  },\r\n  avatar: {\r\n    height: \"2.3em\",\r\n    width: \"2.3em\",\r\n  },\r\n}));\r\n\r\nfunction VideoCallHeader({ callState, callingUser, callStartedTime }) {\r\n  const classes = useStyles();\r\n\r\n  const [fullScreen, setFullScreen] = useState(false);\r\n\r\n  function toggleFullScreen() {\r\n    if (!document.fullscreenElement) {\r\n      document.documentElement.requestFullscreen();\r\n      setFullScreen(true);\r\n    } else {\r\n      if (document.exitFullscreen) {\r\n        document.exitFullscreen();\r\n        setFullScreen(false);\r\n      }\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Box className={classes.videoCallHeader}>\r\n      <Box className={classes.userInfoContainer}>\r\n        <Avatar className={classes.avatar} src={callingUser.profilePic} />\r\n        <Box className={classes.wrapper}>\r\n          <Typography variant=\"h6\" className={classes.username}>\r\n            {callingUser.firstName} {callingUser.lastName}\r\n          </Typography>\r\n          {callState === CALLSTATES.ONGOING && (\r\n            <Typography variant=\"subtitle2\" className={classes.timer}>\r\n              <Timer callStartedTime={callStartedTime} callState={callState} />\r\n            </Typography>\r\n          )}\r\n        </Box>\r\n      </Box>\r\n      <Box className={classes.headerBtnsContainer}>\r\n        <IconButton className={classes.headerBtn} onClick={toggleFullScreen}>\r\n          {fullScreen ? (\r\n            <FullscreenExit htmlColor=\"white\" />\r\n          ) : (\r\n            <Fullscreen htmlColor=\"white\" />\r\n          )}\r\n        </IconButton>\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default VideoCallHeader;\r\n","import { Box, makeStyles } from \"@material-ui/core\";\r\nimport React from \"react\";\r\n\r\nconst useStyles = makeStyles({\r\n  videoContainer: {\r\n    height: \"100%\",\r\n    width: \"100%\",\r\n    \"&>video\": {\r\n      width: \"100%\",\r\n      height: \"100%\",\r\n      objectFit: \"contain\",\r\n    },\r\n  },\r\n  localVideoContainer: {\r\n    position: \"absolute\",\r\n    height: \"20vh\",\r\n    top: \"6em\",\r\n    right: \"1em\",\r\n    backgroundColor: \"white\",\r\n    \"&>video\": {\r\n      height: \"100%\",\r\n      width: \"100%\",\r\n      objectFit: \"contain\",\r\n    },\r\n  },\r\n});\r\n\r\nfunction VideoContainer({ localVideo, remoteVideo }) {\r\n  const classes = useStyles();\r\n  return (\r\n    <Box className={classes.videoContainer}>\r\n      <Box className={classes.localVideoContainer}>\r\n        <video ref={localVideo} autoPlay={true} muted={true} />\r\n      </Box>\r\n      <video ref={remoteVideo} autoPlay={true} />\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default VideoContainer;\r\n","import { Box, makeStyles } from \"@material-ui/core\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport ActionButtons from \"./ActionButtons\";\r\nimport VideoCallHeader from \"./VideoCallHeader\";\r\nimport VideoContainer from \"./VideoContainer\";\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    position: \"absolute\",\r\n    zIndex: \"1000\",\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    alignItems: \"center\",\r\n    left: 0,\r\n    width: \"100%\",\r\n    height: \"100%\",\r\n    backgroundColor: \"black\",\r\n  },\r\n});\r\n\r\nfunction VideoCallScreen({\r\n  localStream,\r\n  remoteStream,\r\n  callState,\r\n  callingUser,\r\n  callStartedTime,\r\n}) {\r\n  const classes = useStyles();\r\n  const localVideo = useRef();\r\n  const remoteVideo = useRef();\r\n  const [muted, setMuted] = useState(false);\r\n  const [cameraEnabled, setCameraEnabled] = useState(true);\r\n\r\n  useEffect(() => {\r\n    remoteVideo.current.srcObject = remoteStream;\r\n    localVideo.current.srcObject = localStream;\r\n  }, [remoteStream, localStream]);\r\n\r\n  useEffect(() => {\r\n    function toggleMic() {\r\n      localStream.getAudioTracks().forEach((track) => (track.enabled = !muted));\r\n    }\r\n    toggleMic();\r\n  }, [muted, localStream]);\r\n\r\n  useEffect(() => {\r\n    function toggleCamera() {\r\n      localStream\r\n        .getVideoTracks()\r\n        .forEach((track) => (track.enabled = cameraEnabled));\r\n    }\r\n    toggleCamera();\r\n  }, [cameraEnabled, localStream]);\r\n\r\n  return (\r\n    <Box className={classes.root}>\r\n      <VideoCallHeader\r\n        callState={callState}\r\n        callingUser={callingUser}\r\n        callStartedTime={callStartedTime}\r\n      />\r\n      <VideoContainer localVideo={localVideo} remoteVideo={remoteVideo} />\r\n      <ActionButtons\r\n        muted={muted}\r\n        cameraEnabled={cameraEnabled}\r\n        setMuted={setMuted}\r\n        setCameraEnabled={setCameraEnabled}\r\n      />\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default VideoCallScreen;\r\n","import { useEffect, useState } from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport MessengerPage from \"../MessengerPage\";\r\nimport authenticateLoginToken from \"./authenticateUser\";\r\n\r\nfunction ProtectedRoute({ children }) {\r\n  const [loggedIn, setLoggedIn] = useState(false);\r\n  const [checked, setChecked] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      try {\r\n        const valid = await authenticateLoginToken();\r\n        setLoggedIn(valid);//vaid object contains loggein in user \r\n        setChecked(true);\r\n      } catch (err) {\r\n        setError(err.response?.data || err.message);\r\n      }\r\n    })();\r\n  }, []);\r\n\r\n  if (error) {\r\n    return (\r\n      <Redirect\r\n        to={{\r\n          pathname: \"/login\",\r\n          state: { alert: { type: \"error\", message: error } },\r\n        }}\r\n      />\r\n    );\r\n  }\r\n\r\n  if (checked && loggedIn) {\r\n    return <MessengerPage user={loggedIn.user} />;\r\n  }\r\n  if (checked && !loggedIn) {\r\n    return <Redirect to=\"/login\" />;\r\n  }\r\n  return null;\r\n}\r\n\r\nexport default ProtectedRoute;\r\n","import { createMuiTheme } from \"@material-ui/core\";\r\nimport { ThemeProvider } from \"@material-ui/styles\";\r\nimport React from \"react\";\r\nimport { BrowserRouter, Route, Switch } from \"react-router-dom\";\r\nimport LoginPage from \"./components/LoginPage\";\r\nimport MessengerPage from \"./components/MessengerPage\";\r\nimport ProtectedRoute from \"./components/ProtectedRoute\";\r\n\r\nconst theme = createMuiTheme({\r\n  palette: {\r\n    type: \"light\",\r\n    primary: {\r\n      main: \"#00ab55\",\r\n    },\r\n    background: {\r\n      paper: \"#fff\",\r\n      default: \"#fff\",\r\n    },\r\n  },\r\n  breakpoints: {\r\n    values: {\r\n      xs: 0,\r\n      sm: 600,\r\n      md: 900,\r\n      lg: 1280,\r\n      xl: 1920,\r\n    },\r\n  },\r\n});\r\n\r\nexport default function App() {\r\n  return (\r\n    <BrowserRouter>\r\n      <ThemeProvider theme={theme}>\r\n        <Switch>\r\n          {/* <Route path={[\"/\", \"/login\", \"/signup\"]} exact> */}\r\n          <Route path=\"/\" exact>\r\n            <LoginPage />\r\n          </Route>\r\n          {/* <Route path=\"/messenger\">\r\n            <ProtectedRoute>\r\n              <MessengerPage />\r\n            </ProtectedRoute>\r\n          </Route> */}\r\n        </Switch>\r\n      </ThemeProvider>\r\n    </BrowserRouter>\r\n  );\r\n}\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}