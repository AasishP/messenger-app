{"version":3,"sources":["../node_modules/peerjs/dist sync","backendConfig.js","api/index.js","components/LoginPage/InputFields.jsx","components/Utils/Alert.jsx","components/LoginPage/LoginForm.jsx","components/LoginPage/SignUpForm.jsx","assets/loginPageBackground.svg","components/ProtectedRoute/authenticateUser.js","components/LoginPage/index.jsx","context/SocketContext.js","components/MessengerPage/SideNavigation/Conversation.jsx","components/MessengerPage/ChatSection/Header.jsx","components/MessengerPage/ChatSection/MediaContent.jsx","components/MessengerPage/ChatSection/Message.jsx","context/LoggedInUserContext.js","components/MessengerPage/ChatSection/MessageInput.jsx","assets/videoIconOverlay.png","components/MessengerPage/ChatSection/TypingIndicator.jsx","components/MessengerPage/ChatSection/MessagesContainer.jsx","components/MessengerPage/ChatSection/index.jsx","components/MessengerPage/SideNavigation/LogoutButton.jsx","components/MessengerPage/SideNavigation/UserWithAvatar.jsx","components/MessengerPage/SideNavigation/People.jsx","components/MessengerPage/SideNavigation/FriendList.jsx","components/MessengerPage/SideNavigation/FindFriends/FriendRequests.jsx","components/MessengerPage/SideNavigation/FindFriends/PendingFriendRequests.jsx","components/MessengerPage/SideNavigation/FindFriends/PeopleYouMayKnow.jsx","components/MessengerPage/SideNavigation/FindFriends/index.jsx","components/MessengerPage/SideNavigation/ConversationsContainer.jsx","components/MessengerPage/SideNavigation/SelectionMenu.jsx","components/MessengerPage/SideNavigation/SearchBox/SearchResults.jsx","components/MessengerPage/SideNavigation/SearchBox/index.jsx","components/MessengerPage/SideNavigation/index.jsx","components/MessengerPage/ChangeProfilePicture.jsx","components/MessengerPage/CallSection/CallTimer.jsx","components/MessengerPage/CallSection/useCallSounds.js","assets/sounds/connecting.mp3","assets/sounds/connected.mp3","assets/sounds/calling.mp3","assets/sounds/callFailed.mp3","assets/sounds/ringing.mp3","assets/sounds/reconnecting.mp3","assets/sounds/connectionLost.mp3","assets/sounds/hangup.mp3","components/MessengerPage/CallSection/CallAlert.jsx","components/MessengerPage/CallSection/ActionButtons.jsx","components/MessengerPage/CallSection/VideoCallHeader.jsx","components/MessengerPage/CallSection/VideoContainer.jsx","components/MessengerPage/CallSection/VideoCallScreen.jsx","components/MessengerPage/CallSection/index.jsx","components/MessengerPage/index.jsx","components/ProtectedRoute/index.jsx","App.js","index.js"],"names":["webpackEmptyContext","req","e","Error","code","keys","resolve","module","exports","id","config","address","wsAddress","baseURL","axiosInstance","axios","create","headers","interceptors","request","use","url","includes","data","localStorage","getItem","useStyles","makeStyles","form","width","maxWidth","minWidth","formTitle","margin","btn","padding","textTransform","link","textDecoration","alignSelf","divider","height","marginBottom","spinner","position","right","StyledTextField","withStyles","root","TextField","Form","formik","children","classes","onSubmit","handleSubmit","className","Box","display","flexDirection","alignItems","p","bgcolor","boxShadow","borderRadius","FormHeading","Typography","variant","color","align","InputField","name","inputProps","fullWidth","placeholder","aria-label","getFieldProps","error","Boolean","touched","errors","helperText","PasswordField","passwordVisible","setPasswordVisible","type","password","InputProps","endAdornment","InputAdornment","IconButton","onClick","Visibility","VisibilityOff","SubmitButton","loading","Button","CircularProgress","size","FormFooter","linkTo","linkText","Divider","light","to","component","Alert","theme","useTheme","useState","show","setShow","setTimeout","Slide","direction","in","timeout","enter","exit","top","marginRight","palette","main","CheckCircleOutline","htmlColor","InfoOutlined","WarningOutlined","ErrorOutlineOutlined","style","marginLeft","initialValues","username","values","a","setLoggedIn","setLoading","setFormError","post","res","status","window","setItem","accesstoken","state","message","response","validationSchema","yup","required","min","max","matches","trim","LoginForm","alert","formError","loggedIn","useFormik","autoFocus","FormHelperText","firstName","lastName","setRegistered","console","log","SignUpForm","registered","pathname","justifyContent","user","authenticateLoginToken","useStyle","background","backgroundImage","backgroundSize","backgroundPositionY","LoginPage","checked","setChecked","location","useLocation","useEffect","isValid","checkLoggedIn","path","SocketContext","createContext","StyledBadge","badge","border","backgroundColor","isonline","Badge","messageBadge","StyledButton","buttonRipple","primary","transform","props","ButtonBase","TouchRippleProps","MessageTime","msgTimestamp","formatMessageTimestamp","msgTime","setMsgTime","timestamp","moment","fromNow","replace","x","updateInterval","setInterval","clearInterval","fontSize","Conversation","lastMessage","conversationWith","history","useHistory","socket","useContext","userInfo","setUserInfo","online","setOnline","recentMessage","setRecentMessage","get","updateOnlineState","on","off","updateRecentMessage","msg","from","detail","recipient","listener","getUserInfo","document","addEventListener","removeEventListener","offMessageSend","push","overlap","badgeContent","anchorOrigin","vertical","horizontal","Avatar","alt","src","profilePic","px","seen","noWrap","fontWeight","text","media","images","length","videos","files","header","backdropFilter","zIndex","largeAvatar","buttonIcon","menu","marginTop","Header","callHandler","callType","call","CustomEvent","dispatchEvent","toUpperCase","mx","mt","ml","Phone","VideoCall","mediaContainer","flexWrap","progressBarContainer","CircularProgressWithLabel","progressPercent","setProgressPercent","updateProgress","progressEvent","msgtempid","msgTempId","amount","value","left","bottom","Image","image","srcURL","secure_url","URL","createObjectURL","revokeObjectURL","objectFit","flexGrow","maxHeight","Video","video","controls","File","file","fileContainer","fileName","default","fileIcon","Description","paper","href","download","MediaContent","isUploading","map","index","avatar","Message","prevMsgTimestamp","otherEndUser","setMessage","mediaMessageResponse","then","msgDirection","showTimestamp","day","halfHour","timeDifferenceBetweenMsg","diff","timeDifferenceFromNow","format","getColor","getContrastText","my","getBorderRadius","wordBreak","overflowWrap","wordWrap","LoggedInUserContext","selectedItemsContainer","overflowY","selectedMediasContainer","seperateImagesAndVideos","medias","split","links","this","tempMsgId","uuidv4","Date","useStyles_selectedMediaPreviewer","previewContainer","selectedImage","removeBtn","all","textAlign","videoContainer","content","backgroundPosition","SelectedMediasPreviewer","removeSelectedMedia","mediaObjectURL","Close","useStyles_selectedFilePreviewer","selectedFilePreviewContainer","SelectedFilesPreviewer","removeSelectedFile","MessageInput","updateMessages","Socket","loggedInUser","useParams","textFieldValue","setTextFieldValue","selectedImages","setSelectedImages","selectedVideos","setSelectedVideos","selectedFiles","setSelectedFiles","fileInputError","setFileInputError","typing","setTyping","dispatchSendMessage","sendMessage","dispatchUploadProgress","progress","uploadProgress","preventDefault","messageForClientSide","formData","FormData","append","forEach","onUploadProgress","Math","round","loaded","total","messageId","_id","recipientId","emit","target","removeSelectedImage","prevImages","splice","removeSelectedVideo","prevVideos","prevFiles","accept","multiple","onChange","htmlFor","ImageRounded","Attachment","Send","container","dot","animation","opacity","TypingIndicator","MessagesContainer","messageContainer","useRef","messages","setMessages","otherSide","prev","addMessage","current","scrollTo","scrollHeight","getMessages","removeAllListeners","ref","ChatSection","logoutText","LogoutButton","loggingOut","setLoggingOut","delete","LogoutType","clear","PowerSettingsNew","userAvatar","cursor","UserWithAvatar","setShowChangeProfilePicture","LoggedInUser","button","MutualFriendInformation","person","info","mutualFriends","grey","People","update","sendFriendRequest","acceptFriendRequest","rejectFriendRequest","cancelFriendRequest","unFriend","FriendUnFriendBtn","React","anchorEl","setAnchorEl","open","undefined","aria-describedby","event","currentTarget","Popover","onClose","transformOrigin","Done","blue","Clear","PersonAdd","getButton","FriendList","friendList","setFriendList","overflowX","FriendRequests","changed","friendRequests","setFriendRequests","Requester","PendingFriendRequests","pendingFriendRequests","setPendingFriendRequests","HourglassEmptyOutlined","Requested","PeopleYouMayKnow","peopleYouMayKnow","setPeopleYouMayKnow","EmojiPeople","Person","FindFriends","setChanged","random","getConversations","source","cancelToken","token","ConversationsContainer","conversations","setConversations","moveRecentConversationToTop","prevConversations","findIndex","conversation","with","recentConversation","axiosMain","CancelToken","cancel","tab","TabPanel","components","SelectionMenu","setIndex","Tabs","newIndex","indicatorColor","textColor","Tab","icon","Chat","GroupAdd","searchResultsContainer","SearchResults","searchText","searchResults","setSearchResults","cancelTokenSource","searchTerm","getSearchResults","results","isFriend","some","isRequestPending","hasSentFriendRequest","searchForm","paddingLeft","searchInput","outline","secondary","SearchBox","setSearchText","showSearchResults","setShowSearchResults","searchBoxRef","handleClickOutside","contains","tabIndex","onFocus","handleChange","Search","breakpoints","down","SideNavigation","borderRight","py","modal","modal__content","shadows","btnsContainer","greetingText","infoText","fullNameText","usernameText","ChangeProfilePicture","greeting","setLoggedInUser","profilePicture","setProfilePicture","setSelectedImage","setOpen","uploading","setUploading","setAlert","profilePicURL","handleClose","Modal","txtWhite","mb","reader","FileReader","readAsDataURL","result","endIcon","Publish","updateTimer","startTime","timeNow","timerHrs","getHours","timerMin","getMinutes","timerSec","sec","getSeconds","slice","CallTimer","callStartedTime","callState","timer","setTimer","CALLSTATES","HANGUP","CONNECTIONLOST","sounds","connecting","connected","calling","callFailed","ringing","reconnecting","connectionLost","hangup","useCallSounds","audio","Audio","load","loop","play","pause","call_alert","call_animation","webkitBackfaceVisibility","mozBackfaceVisibility","msBackfaceVisibility","backfaceVisibility","callerName","useButtonStyles","button_incoming","CallStatus","CALLFAILED","NOANSWER","BUSY","warning","getTextColor","noAnswer","busy","ongoing","MicButton","disabled","muted","setMuted","MicOff","Mic","RecallButton","callingUser","Call","success","AcceptCallButton","callAccepted","AudioCall","EndCallButton","callEnd","CallEnd","ActionButtons","CONNECTING","CONNECTED","CALLING","ONGOING","RECONNECTING","RINGING","CallAlert","remoteStream","localStream","alertRef","createRef","audioRef","getAudioTracks","track","enabled","srcObject","autoPlay","WebkitUserSelect","MozUserSelect","msUserSelect","userSelect","actionBtn","webkitBackdropFilter","cameraEnabled","setCameraEnabled","callEndRef","Event","Videocam","VideocamOff","videoCallHeader","userInfoContainer","headerBtn","wrapper","VideoCallHeader","fullScreen","setFullScreen","headerBtnsContainer","fullscreenElement","exitFullscreen","documentElement","requestFullscreen","FullscreenExit","Fullscreen","localVideoContainer","VideoContainer","localVideo","remoteVideo","VideoCallScreen","getVideoTracks","CALLDIRECTION","CALLTYPE","CallSection","setRemoteStream","setLocalStream","showVideoScreen","setShowVideoScreen","setCallState","setDirection","setCallType","setCallingUser","setCallStartedTime","showCallAlert","resetStates","handleCall","useCallback","callDirection","caller","peer","Peer","peerId","remotePeerId","receiver","ackCallType","navigator","mediaDevices","getUserMedia","stream","catch","err","answer","acceptCall","stopStreams","getTracks","tracks","stop","endCall","callFailTimeOut","noAnswerTimeOut","clearTimeout","busyUser","MessengerPage","io","auth","showChangeProfilePicture","notMediumScreen","useMediaQuery","disconnect","Provider","minHeight","newUser","exact","ProtectedRoute","setError","valid","createMuiTheme","xs","sm","md","lg","xl","App","ThemeProvider","ReactDOM","render","StrictMode","getElementById"],"mappings":"6HAAA,SAASA,EAAoBC,GAC5B,IAAIC,EAAI,IAAIC,MAAM,uBAAyBF,EAAM,KAEjD,MADAC,EAAEE,KAAO,mBACHF,EAEPF,EAAoBK,KAAO,WAAa,MAAO,IAC/CL,EAAoBM,QAAUN,EAC9BO,EAAOC,QAAUR,EACjBA,EAAoBS,GAAK,K,4MCHVC,EALA,CACbC,QAAS,iDACTC,UAAW,gDCCPC,EAAO,UAAMH,EAAOC,QAAb,QAEPG,EAAgBC,IAAMC,OAAO,CACjCH,UACAI,QAAS,CAAE,mBAAoB,oBAGjCH,EAAcI,aAAaC,QAAQC,KAAI,SAACD,GACtC,OAAIA,EAAQE,IAAIC,SAAS,WAAaH,EAAQI,MAIzCJ,EAAQE,IAAIC,SAAS,eACxBH,EAAQF,QAAR,+BAA6CO,aAAaC,QACxD,iBAJKN,KAUIL,Q,uGCPTY,EAAYC,YAAW,CAC3BC,KAAM,CACJC,MAAO,MACPC,SAAU,QACVC,SAAU,SAEZC,UAAW,CACTC,OAAQ,SAEVC,IAAK,CACHL,MAAO,cACPI,OAAQ,UACRE,QAAS,YACTC,cAAe,cAEjBC,KAAM,CACJC,eAAgB,OAChBC,UAAW,YAEbC,QAAS,CACPX,MAAO,OACPY,OAAQ,QACRC,aAAc,SAEhBC,QAAS,CACPC,SAAU,WACVC,MAAO,SAILC,EAAkBC,YAAW,CACjCC,KAAM,CACJ,wBAAyB,CACvBb,QAAS,WAHSY,CAMrBE,KAEH,SAASC,EAAT,GAAqC,IAArBC,EAAoB,EAApBA,OAAQC,EAAY,EAAZA,SAChBC,EAAU3B,IAChB,OACE,sBAAM4B,SAAUH,EAAOI,aAAcC,UAAWH,EAAQzB,KAAxD,SACE,cAAC6B,EAAA,EAAD,CACEC,QAAQ,OACRC,cAAc,SACdC,WAAW,SACXC,EAAE,UACFC,QAAQ,QACRC,UAAU,yCACVC,aAAc,GAPhB,SASGZ,MAMT,SAASa,EAAT,GAAoC,IAAbb,EAAY,EAAZA,SACfC,EAAU3B,IAChB,OACE,cAACwC,EAAA,EAAD,CACEV,UAAWH,EAAQrB,UACnBmC,QAAQ,KACRC,MAAM,UACNC,MAAM,SAJR,SAMGjB,IAKP,SAASkB,EAAT,GAAsD,IAAhCnB,EAA+B,EAA/BA,OAAQoB,EAAuB,EAAvBA,KAASC,EAAc,iCACnD,OACE,cAAC1B,EAAD,yBACE0B,WAAYA,EACZL,QAAQ,WACRM,WAAS,EACTxC,OAAO,SACPsC,KAAMA,EACNG,YAAaH,EACbI,aAAYJ,GACRpB,EAAOyB,cAAcL,IAR3B,IASEM,MAAOC,QAAQ3B,EAAO4B,QAAQR,IAASpB,EAAO6B,OAAOT,IACrDU,WAAY9B,EAAO4B,QAAQR,GAAQpB,EAAO6B,OAAOT,GAAQ,MAK/D,SAASW,EAAT,GAKI,IAJF/B,EAIC,EAJDA,OACAgC,EAGC,EAHDA,gBACAC,EAEC,EAFDA,mBACGZ,EACF,iEACD,OACE,cAAC1B,EAAD,yBACE0B,WAAYA,EACZL,QAAQ,WACRM,WAAS,EACTxC,OAAO,SACPoD,KAAMF,EAAkB,OAAS,WACjCZ,KAAK,WACLG,YAAY,WACZC,aAAW,YACPxB,EAAOyB,cAAc,aAT3B,IAUEC,MAAOC,QAAQ3B,EAAO4B,QAAQO,UAAYnC,EAAO6B,OAAOM,UACxDL,WAAY9B,EAAO4B,QAAQO,SAAWnC,EAAO6B,OAAOM,SAAW,GAC/DC,WAAY,CACVC,aACE,cAACC,EAAA,EAAD,UACE,cAACC,EAAA,EAAD,CAAYC,QAAS,kBAAMP,GAAoBD,IAA/C,SACGA,EACC,cAACS,EAAA,EAAD,CAAYxB,MAAM,YAElB,cAACyB,EAAA,EAAD,CAAezB,MAAM,oBAUrC,SAAS0B,EAAT,GAAsD,IAA9B1C,EAA6B,EAA7BA,SAAkB2C,GAAW,EAAnB5C,OAAmB,EAAX4C,SAClC1C,EAAU3B,IAChB,OACE,eAACsE,EAAA,EAAD,CACEX,KAAK,SACL7B,UAAWH,EAAQnB,IACnBiC,QAAQ,YACRC,MAAM,UACNO,aAAW,eALb,UAOGvB,EACA2C,EACC,cAACE,EAAA,EAAD,CACEzC,UAAWH,EAAQV,QACnByB,MAAM,UACN8B,KAAK,UAEL,QAKV,SAASC,EAAT,GAAqD,IAA/BC,EAA8B,EAA9BA,OAAQhD,EAAsB,EAAtBA,SAAUiD,EAAY,EAAZA,SAChChD,EAAU3B,IAChB,OACE,qCACE,cAAC4E,EAAA,EAAD,CAASnC,QAAQ,SAASoC,OAAO,EAAM/C,UAAWH,EAAQb,UAC1D,eAAC0B,EAAA,EAAD,CAAYC,QAAQ,QAAQC,MAAM,gBAAlC,UACGhB,EAAU,IACX,eAAC,IAAD,CAAMoD,GAAIJ,EAAQ5C,UAAWH,EAAQhB,KAArC,UACE,cAAC6B,EAAA,EAAD,CAAYC,QAAQ,UAAUC,MAAM,UAAUqC,UAAU,OAAxD,SACGJ,IACW,OALlB,cAaSvD,I,qDCzIA4D,MAlCf,YAAoC,IAAD,EAAlBrB,EAAkB,EAAlBA,KAAMjC,EAAY,EAAZA,SACfuD,EAAQC,cACd,EAAwBC,oBAAS,GAAjC,mBAAOC,EAAP,KAAaC,EAAb,KAIA,OAHAC,YAAW,WACTD,GAAQ,KACP,KAED,cAACE,EAAA,EAAD,CAAOC,UAAU,OAAOC,GAAIL,EAAMM,QAAS,CAAEC,MAAO,IAAKC,KAAM,KAA/D,SACE,eAAC7D,EAAA,EAAD,CACEb,SAAS,WACTc,QAAQ,OACR6D,IAAI,KACJC,YAAY,OACZ3D,EAAE,MACFG,aAAc,EACdD,UAAW,EACXD,QAAO,UAAE6C,EAAMc,eAAR,aAAE,EAAgBpC,GAAMqC,KARjC,UAUY,YAATrC,EAAqB,cAACsC,EAAA,EAAD,CAAoBC,UAAU,UAAa,KACvD,SAATvC,EAAkB,cAACwC,EAAA,EAAD,CAAcD,UAAU,UAAa,KAC9C,YAATvC,EAAqB,cAACyC,EAAA,EAAD,CAAiBF,UAAU,UAAa,KACpD,UAATvC,EAAmB,cAAC0C,EAAA,EAAD,CAAsBH,UAAU,UAAa,KAEjE,cAAC1D,EAAA,EAAD,CACEC,QAAQ,QACR6D,MAAO,CAAEC,WAAY,QAAS7D,MAAO,SAFvC,SAIGhB,U,iBClBL8E,GAAgB,CACpBC,SAAU,GACV7C,SAAU,IAINhC,GAAQ,uCAAG,WAAO8E,EAAP,0BAAAC,EAAA,6DAAiBC,EAAjB,EAAiBA,YAAaC,EAA9B,EAA8BA,WAAYC,EAA1C,EAA0CA,aACzDD,GAAW,GADI,kBAGKxH,EAAM0H,KAAK,SAAUL,GAH1B,OAIM,OADbM,EAHO,QAILC,SACNC,OAAOpH,aAAaqH,QAAQ,cAAeH,EAAInH,KAAKuH,aACpDR,GAAY,IAND,gDASbC,GAAW,GACXC,EAAa,CAAEO,OAAO,EAAMC,SAAS,eAAIC,gBAAJ,eAAc1H,OAAQ,KAAIyH,UAVlD,yDAAH,wDAcRE,GAAmBC,IAAW,CAClChB,SAAUgB,MAEPC,SAAS,6BACTC,IAAI,EAAG,2CACPC,IAAI,IAAK,0CACTC,QACC,wBACA,sDAEJjE,SAAU6D,MAEPK,OACAJ,SAAS,6BACTC,IAAI,EAAG,6CACPC,IAAI,IAAK,0CACTC,QACC,eACA,sDAmESE,OA/Df,YAA+B,IAAVC,EAAS,EAATA,MACnB,EAAkC7C,mBAAS,CACzCkC,OAAO,EACPC,QAAS,KAFX,mBAAOW,EAAP,KAAkBnB,EAAlB,KAIA,EAA8C3B,oBAAS,GAAvD,mBAAO1B,EAAP,KAAwBC,EAAxB,KACA,EAA8ByB,oBAAS,GAAvC,mBAAOd,EAAP,KAAgBwC,EAAhB,KACA,EAAgC1B,oBAAS,GAAzC,mBAAO+C,EAAP,KAAiBtB,EAAjB,KAEMnF,EAAS0G,YAAU,CACvB3B,iBACA5E,SAAU,SAAC8E,GACT9E,GAAS8E,EAAQ,CAAEE,cAAaC,aAAYC,kBAE9CU,sBAEI7F,EAAU3B,IAEhB,OAAIkI,EACK,cAAC,IAAD,CAAUpD,GAAG,eAGpB,qCACGkD,EAAQ,cAAC,EAAD,CAAOrE,KAAMqE,EAAMrE,KAAnB,SAA0BqE,EAAMV,UAAmB,KAE5D,eAAC9F,EAAD,CAAMC,OAAQA,EAAd,UAEE,cAACc,EAAD,2BAGA,cAACK,EAAD,CAAYC,KAAK,WAAWpB,OAAQA,EAAQ2G,WAAS,IAGrD,cAAC5E,EAAD,CACE/B,OAAQA,EACRgC,gBAAiBA,EACjBC,mBAAoBA,IAGtB,cAAC2E,EAAA,EAAD,CAAgBlF,MAAO8E,EAAUZ,MAAjC,SACGY,EAAUX,UAIb,cAAC,IAAD,CAAMxC,GAAG,IAAIhD,UAAWH,EAAQhB,KAAhC,SACE,cAAC6B,EAAA,EAAD,CAAYC,QAAQ,YAAYC,MAAM,UAAtC,gCAMF,cAAC0B,EAAD,CAAc3C,OAAQA,EAAQ4C,QAASA,EAAvC,qBAIA,cAACI,EAAD,CAAYC,OAAO,UAAUC,SAAS,UAAtC,4CCnGF6B,GAAgB,CACpB8B,UAAW,GACXC,SAAU,GACV9B,SAAU,GACV7C,SAAU,IAGNhC,GAAQ,uCAAG,WAAO8E,EAAP,wBAAAC,EAAA,6DAAgB6B,EAAhB,EAAgBA,cAAc3B,EAA9B,EAA8BA,WAAYC,EAA1C,EAA0CA,aACzDD,GAAW,GADI,kBAGKxH,EAAM0H,KAAK,YAAaL,GAH7B,OAIM,MAJN,OAILO,QACNuB,GAAc,GALH,gDAQbC,QAAQC,IAAR,MACA5B,EAAa,CAAEO,OAAO,EAAMC,SAAS,eAAIC,gBAAJ,eAAc1H,OAAQ,KAAIyH,UAC/DT,GAAW,GAVE,yDAAH,wDAcRW,GAAmBC,IAAW,CAClCa,UAAWb,MAERC,SAAS,8BACTC,IAAI,EAAG,4CACPC,IAAI,IAAK,2CACTC,QAAQ,mBAAoB,0CAC/BU,SAAUd,MAEPC,SAAS,6BACTC,IAAI,EAAG,2CACPC,IAAI,IAAK,0CACTC,QAAQ,mBAAoB,0CAC/BpB,SAAUgB,MAEPC,SAAS,6BACTC,IAAI,EAAG,2CACPC,IAAI,IAAK,0CACTC,QACC,wBACA,sDAEJjE,SAAU6D,MAEPK,OACAJ,SAAS,6BACTC,IAAI,EAAG,6CACPC,IAAI,IAAK,0CACTC,QACC,eACA,sDA6DSc,OAzDf,WACE,MAA8CxD,oBAAS,GAAvD,mBAAO1B,EAAP,KAAwBC,EAAxB,KACA,EAA8ByB,oBAAS,GAAvC,mBAAOd,EAAP,KAAgBwC,EAAhB,KACA,EAAkC1B,mBAAS,CACzCkC,OAAO,EACPC,QAAS,KAFX,mBAAOW,EAAP,KAAkBnB,EAAlB,KAIA,EAAoC3B,oBAAS,GAA7C,mBAAOyD,EAAP,KAAmBJ,EAAnB,KAEM/G,EAAS0G,YAAU,CACvB3B,iBACA5E,SAAU,SAAC8E,GACT9E,GAAS8E,EAAO,CAAC8B,gBAAe3B,aAAYC,kBAE9CU,sBAGF,OAAGoB,EACM,cAAC,IAAD,CAAU9D,GAAI,CAAE+D,SAAS,SAASxB,MAAM,CAAEW,MAAM,CAACrE,KAAM,UAAW2D,QAAQ,oCAIjF,eAAC9F,EAAD,CAAMC,OAAQA,EAAd,UACE,cAACc,EAAD,gCAGA,eAACR,EAAA,EAAD,CAAKC,QAAQ,OAAO8G,eAAe,gBAAnC,UACE,cAAClG,EAAD,CAAYC,KAAK,YAAYpB,OAAQA,IACrC,qBAAK6E,MAAO,CAAEnG,MAAO,SACrB,cAACyC,EAAD,CAAYC,KAAK,WAAWpB,OAAQA,OAItC,cAACmB,EAAD,CAAYC,KAAK,WAAWpB,OAAQA,IAEpC,cAAC+B,EAAD,CACEC,gBAAiBA,EACjBC,mBAAoBA,EACpBjC,OAAQA,IAIV,cAAC4G,EAAA,EAAD,CAAgBlF,MAAO8E,EAAUZ,MAAjC,SACGY,EAAUX,UAGb,cAAClD,EAAD,CAAc3C,OAAQA,EAAQ4C,QAASA,EAAvC,qBAIA,cAACI,EAAD,CAAYC,OAAO,SAASC,SAAS,UAArC,2CCzHS,OAA0B,gD,8CCEzC,4BAAAgC,EAAA,0DACsBO,OAAOpH,aAAaC,QAAQ,eADlD,gCAIwBV,EAAM0H,KAAK,UAJnC,UAKyB,OADbC,EAJZ,QAKcC,OALd,yCAMe,CAAC8B,KAAM/B,EAAInH,OAN1B,wDAYW,GAZX,6C,sBAgBemJ,O,4CCVTC,GAAWhJ,YAAW,CAC1BqB,KAAM,CACJ4H,WAAW,OAAD,OAASC,GAAT,KACVC,eAAgB,QAChBC,oBAAqB,UA0DVC,OAtDf,WAAsB,IAAD,EACnB,EAAgCnE,oBAAS,GAAzC,mBAAO+C,EAAP,KAAiBtB,EAAjB,KACA,EAA6BzB,oBAAS,GAAtC,mBAAOoE,EAAP,KAAeC,EAAf,KACM7H,EAAUsH,KACVQ,EAAWC,cAiBjB,OAdAC,qBAAU,WAAM,4CACd,8BAAAhD,EAAA,+EAEwBqC,KAFxB,QAEQY,EAFR,SAGahD,EAAYgD,GACvBJ,GAAW,GAJb,gDAMIC,EAASpC,MAAM,CAACW,MAAM,CAAErE,KAAM,QAAS2D,SAAS,eAAIC,gBAAJ,eAAc1H,OAAQ,KAAIyH,UAC1EkC,GAAW,GAPf,0DADc,uBAAC,WAAD,wBAWdK,KACC,CAACJ,IAEAvB,EACK,cAAC,IAAD,CAAUpD,GAAG,eAElByE,EAIF,eAACxH,EAAA,EAAD,CACED,UAAWH,EAAQL,KACnBU,QAAQ,OACR8G,eAAe,SACf5G,WAAW,SACXnB,OAAO,QACPZ,MAAM,QANR,UAQE,cAAC,IAAD,CAAO2J,KAAK,IAAZ,SACE,cAAC,IAAD,CACEhF,GAAI,CACF+D,SAAU,SACVxB,MAAOoC,EAASpC,WAItB,cAAC,IAAD,CAAOyC,KAAK,SAAZ,SACE,cAAC,GAAD,CAAW9B,MAAK,UAAEyB,EAASpC,aAAX,aAAE,EAAgBW,UAEpC,cAAC,IAAD,CAAO8B,KAAK,UAAZ,SACE,cAAC,GAAD,SAvBG,M,sECrCIC,GAFKC,0BCaPC,GAAc5I,aAAW,iBAAO,CAC3C6I,MAAO,CACLnJ,OAAQ,QACRZ,MAAO,QACPmC,aAAc,MACd6H,OAAO,iBACPC,gBAAiB,YACf,OADiC,EAAfC,SACA,QAAU,YAPPhJ,CAUvBiJ,MAEEtK,GAAYC,YAAW,CAC3BsK,aAAc,CACZhE,WAAY,SAmBViE,GAAenJ,aAfN,SAAC4D,GAAD,MAAY,CACzBwF,aAAc,CACZ/H,MAAOuC,EAAMc,QAAQ2E,QAAQ1E,MAE/BA,KAAM,CACJvF,QAAS,MACTN,MAAO,OACP2I,eAAgB,QAChB,UAAW,CACT6B,UAAW,cACXtI,UAAW,+CAKIhB,EAAmB,SAACuJ,GAAD,OACtC,cAACC,GAAA,EAAD,CACE/I,UAAW8I,EAAMjJ,QAAQqE,KACzB8E,iBAAkB,CAAEnJ,QAAS,CAAEL,KAAMsJ,EAAMjJ,QAAQ8I,eACnD1F,UAAU,MACVd,QAAS2G,EAAM3G,QAJjB,SAMG2G,EAAMlJ,cAIX,SAASqJ,GAAT,GAAwC,IAAjBC,EAAgB,EAAhBA,aAErB,EAA8B7F,oBAAS,WACrC8F,EAAuBD,MADzB,mBAAOE,EAAP,KAAgBC,EAAhB,KAIA,SAASF,EAAuBG,GAC9B,OAAOC,KAAOD,GACXE,SAAQ,GACRC,QACC,gEACA,SAAUC,GACR,OAAQA,GACN,IAAK,SACH,MAAO,IACT,IAAK,WACH,MAAO,IACT,IAAK,QACH,MAAO,IACT,IAAK,UACH,MAAO,MACT,IAAK,gBACH,MAAO,WACT,IAAK,WACH,MAAO,KACT,IAAK,UACH,MAAO,KACT,IAAK,QACH,MAAO,KACT,QACE,OAAOA,MAgBnB,OAVA7B,qBAAU,WACRwB,EAAWF,EAAuBD,IAClC,IAAMS,EAAiBC,aAAY,WACjCP,EAAWF,EAAuBD,MACjC,KACH,OAAO,WACLW,cAAcF,MAEf,CAACT,IAGF,cAACxI,EAAA,EAAD,CAAYE,MAAM,gBAAgB4D,MAAO,CAAEsF,SAAU,UAArD,SACGV,IA8HQW,OAzHf,YAA0D,IAAlCC,EAAiC,EAAjCA,YAAaC,EAAoB,EAApBA,iBAC7BpK,EAAU3B,KACVgM,EAAUC,cAEVC,EAASC,qBAAWpC,IAG1B,EAAgC5E,mBAAS,IAAzC,mBAAOiH,EAAP,KAAiBC,EAAjB,KACA,EAA4BlH,oBAAS,GAArC,mBAAOmH,EAAP,KAAeC,EAAf,KACA,EAA0CpH,mBAAS2G,GAAnD,mBAAOU,EAAP,KAAsBC,EAAtB,KATuD,4CAsBvD,WAA2BhG,GAA3B,eAAAE,EAAA,sEACoBtH,EAAMqN,IAAN,oBAAuBjG,IAD3C,OACQO,EADR,OAEEqF,EAAYrF,EAAInH,MAFlB,4CAtBuD,sBAsEvD,OApCA8J,qBAAU,WAER,SAASgD,EAAkBlG,EAAUY,GACnCZ,KAAQ,OAAK2F,QAAL,IAAKA,OAAL,EAAKA,EAAU3F,WAAY8F,EAAUlF,GAI/C,OADA6E,EAAOU,GAAG,oBAAqBD,GACxB,WACLT,EAAOW,IAAI,oBAAqBF,MAEjC,CAACT,EAAQE,IAEZzC,qBAAU,WACR4C,EAAUH,EAASE,UAClB,CAACF,EAASE,SAEb3C,qBAAU,WAER,SAASmD,EAAoBC,GAAM,IAAD,EAChCA,EAAIC,OAASjB,GAAoBU,EAAiBM,IAElD,UAAAA,EAAIE,cAAJ,eAAYC,aAAcnB,GACxBU,EAAiBM,EAAIE,QA3C3B,IAAuBE,EAmDrB,OAhEqD,oCA2DrDC,CAAYrB,GAEZG,EAAOU,GAAG,kBAAmBE,GAhDRK,EAiDPL,EAhDdO,SAASC,iBAAiB,cAAeH,GAkDlC,WACLjB,EAAOW,IAAI,kBAAmBC,GA/ClC,SAAwBK,GACtBE,SAASE,oBAAoB,cAAeJ,GA+C1CK,CAAeV,MAEhB,CAAChB,EAAaC,EAAkBG,IAGjC,eAAC1B,GAAD,CAAcvG,QA3ChB,WACE+H,EAAQyB,KAAR,qBAA2B1B,KA0C3B,UACE,cAAC9B,GAAD,CACEI,SAAUiC,EAAS,EAAI,EACvBoB,QAAQ,SACRC,aAAa,GACblL,QAAQ,MACRmL,aAAc,CAAEC,SAAU,SAAUC,WAAY,SALlD,SAOE,cAACC,GAAA,EAAD,CAAQC,IAAK5B,EAAS3F,SAAUwH,IAAK7B,EAAS8B,eAGhD,eAACnM,EAAA,EAAD,CAAKoM,GAAG,QAAR,UACE,eAAC3L,EAAA,EAAD,CACEE,MAAM,cACND,QAAQ,KACR6D,MAAO,CAAEsF,SAAU,UAHrB,UAKGQ,EAAS9D,UALZ,IAKwB8D,EAAS7D,YAGjC,eAAC/F,EAAA,EAAD,CACEE,MAAO8J,EAAc4B,KAAO,gBAAkB,cAC9CrJ,UAAU,IACVsJ,QAAM,EACN/H,MAAO,CACLnG,MAAO,UACPmO,WAAY9B,EAAc4B,KAAO,SAAW,QANhD,UASG5B,EAAcQ,OAASZ,EAAS3F,SAAhC,UACM2F,EAAS9D,UADf,MAEG,QAGHkE,EAAc+B,OACX/B,EAAcgC,MAAMC,OAAOC,OAAQ,GACnClC,EAAcgC,MAAMG,OAAOD,OAAQ,GACnClC,EAAcgC,MAAMI,MAAMF,OAAO,IACjC,6BAIR,eAAC3M,EAAA,EAAD,CAAKwE,WAAW,OAAOvE,QAAQ,OAAOE,WAAW,SAAjD,UACE,cAAC6I,GAAD,CAAaC,aAAcwB,EAAcpB,YACzC,cAACd,GAAA,EAAD,CAAOxI,UAAWH,EAAQ4I,aAAc7H,MAAM,UAAUD,QAAQ,e,oBCtNlEzC,GAAYC,YAAW,CAC3B4O,OAAQ,CACN3N,SAAU,WACV4N,eAAgB,YAChB1E,gBAAiB,YACjB2E,OAAQ,KACR5O,MAAO,OACP6B,QAAS,OACTE,WAAY,SACZzB,QAAS,UACT6B,aAAc,cACdD,UAAW,2CAEb2M,YAAa,CACXjO,OAAQ,QACRZ,MAAO,SAET8O,WAAY,CACV1O,OAAQ,WAEV2O,KAAM,CACJC,UAAW,SAgHAC,OA5Gf,YAA+B,IAAD,EAAZhD,EAAY,EAAZA,SACVzK,EAAU3B,KAEVkM,EAASC,qBAAWpC,IAG1B,EAA4B5E,mBAASiH,EAASE,QAA9C,mBAAOA,EAAP,KAAeC,EAAf,KAmBA,SAAS8C,EAAYC,GACnB,IAAMC,EAAO,IAAIC,YAAY,OAAQ,CAAEvC,OAAQ,CAAEb,WAAUkD,cAC3DjC,SAASoC,cAAcF,GAGzB,OAtBA5F,qBAAU,WAER,SAASgD,EAAkBlG,EAAUY,GACnCoB,QAAQC,IAAI,YACZjC,KAAQ,OAAK2F,QAAL,IAAKA,OAAL,EAAKA,EAAU3F,WAAY8F,EAAUlF,GAI/C,OADA6E,EAAOU,GAAG,oBAAqBD,GACxB,WACLT,EAAOW,IAAI,oBAAqBF,MAEjC,CAACT,EAAQE,IAEZzC,qBAAU,WACR4C,EAAUH,EAASE,UAClB,CAACF,EAASE,SAQX,eAACvK,EAAA,EAAD,CAAKD,UAAWH,EAAQkN,OAAxB,UACE,cAAC5E,GAAD,CACExH,QAAQ,MACRkL,aAAa,IACbD,QAAQ,SACRrD,SAAUiC,EAAS,EAAI,EACvBsB,aAAc,CAAEC,SAAU,SAAUC,WAAY,SALlD,SAOE,cAACC,GAAA,EAAD,CACEjM,UAAWH,EAAQqN,YACnBhB,IAAG,UAAE5B,EAAS3F,gBAAX,aAAE,EAAmBiJ,cACxBzB,IAAK7B,EAAS8B,eAGlB,cAACnM,EAAA,EAAD,CAAK4N,GAAG,MAAR,SACE,eAAC5N,EAAA,EAAD,CAAKC,QAAQ,OAAOC,cAAc,SAAS6G,eAAe,SAA1D,UACE,eAACtG,EAAA,EAAD,CAAYC,QAAQ,KAAKC,MAAM,cAA/B,UACG0J,EAAS9D,UADZ,IACwB8D,EAAS7D,YAEjC,cAAC/F,EAAA,EAAD,CAAYC,QAAQ,YAAYC,MAAM,cAAtC,SACG0J,EAAS3F,SAAT,WAAwB2F,EAAS3F,UAAa,UAKrD,cAAC1E,EAAA,EAAD,CAAK4N,GAAG,OAAOC,GAAG,OAAlB,SACE,cAACpN,EAAA,EAAD,CAAYC,QAAQ,YAAYC,MAAM,gBAAtC,SACG4J,EAAS,aAAe,cAI7B,eAACvK,EAAA,EAAD,CAAK8N,GAAG,OAAR,UACE,cAAC7L,EAAA,EAAD,CACElC,UAAWH,EAAQsN,WACnBhL,QAAS,WACPoL,EAAY,cAHhB,SAME,cAACS,GAAA,EAAD,CAAOlE,SAAS,QAAQlJ,MAAM,cAEhC,cAACsB,EAAA,EAAD,CACElC,UAAWH,EAAQsN,WACnBhL,QAAS,WACPoL,EAAY,cAHhB,SAME,cAACU,GAAA,EAAD,CAAWnE,SAAS,QAAQlJ,MAAM,qB,mBCzGtC1C,GAAYC,aAAW,SAACgF,GAAD,MAAY,CACvC+K,eAAgB,CACd9O,SAAU,WACVc,QAAS,OACTiO,SAAU,QAEZC,qBAAsB,CACpBlO,QAAS,OACTE,WAAY,SACZ4G,eAAgB,SAChB5H,SAAU,WACVH,OAAQ,OACRZ,MAAO,OACPmC,aAAc,OACd4G,WAAY,iBAIhB,SAASiH,GAA0BvF,GACjC,MAA8CzF,mBAAS,GAAvD,mBAAOiL,EAAP,KAAwBC,EAAxB,KAcA,OAZA1G,qBAAU,WACR,SAAS2G,EAAeC,GAClB3F,EAAM4F,YAAcD,EAActD,OAAOwD,WAC3CJ,EAAmBE,EAActD,OAAOyD,QAI5C,OADArD,SAASC,iBAAiB,iBAAkBgD,GACrC,WACLjD,SAASE,oBAAoB,iBAAkB+C,MAEhD,CAAC1F,EAAM4F,YAGR,eAACzO,EAAA,EAAD,CAAKb,SAAS,WAAWc,QAAQ,cAAjC,UACE,cAACuC,EAAA,EAAD,aACEoM,MAAOP,EACP3N,QAAQ,eACJmI,IAEN,cAAC7I,EAAA,EAAD,CACE8D,IAAK,EACL+K,KAAM,EACNC,OAAQ,EACR1P,MAAO,EACPD,SAAS,WACTc,QAAQ,OACRE,WAAW,SACX4G,eAAe,SARjB,SAUE,cAACtG,EAAA,EAAD,CACEC,QAAQ,UACRsC,UAAU,MACVuB,MAAO,CAAE5D,MAAO,QAASkJ,SAAU,SAHrC,mBAIKwE,EAJL,YAUR,SAASU,GAAT,GAA2B,IAAVC,EAAS,EAATA,MACTC,EAASD,EAAME,YAAcC,IAAIC,gBAAgBJ,GAMvD,OALApH,qBAAU,WACR,OAAO,WACLuH,IAAIE,gBAAgBJ,MAErB,CAACA,IAEF,qBACE1K,MAAO,CACL+K,UAAW,QACX9Q,OAAQ,QACRJ,MAAO,sBACPmR,SAAU,IACVC,UAAW,QACXjP,aAAc,QAEhB2L,IAAK+C,EACLhD,IAAI,cAKV,SAASwD,GAAT,GAA2B,IAAVC,EAAS,EAATA,MACTT,EAASS,EAAMR,YAAcC,IAAIC,gBAAgBM,GAMvD,OALA9H,qBAAU,WACR,OAAO,WACLuH,IAAIE,gBAAgBJ,MAErB,CAACA,IAEF,uBACE1K,MAAO,CACL/F,OAAQ,QACRJ,MAAO,sBACPmR,SAAU,IACVC,UAAW,OACXjP,aAAc,QAEhB2L,IAAK+C,EACLU,UAAU,IAKhB,SAASC,GAAT,GAAyB,IAATC,EAAQ,EAARA,KACR3M,EAAQC,cACRvD,EAAU1B,aAAW,SAACgF,GAAD,MAAY,CACrC4M,cAAe,CACb7P,QAAS,OACTE,WAAY,UAEd4P,SAAU,CACR1R,SAAU,OACVsC,MAAOuC,EAAMc,QAAQmD,WAAW6I,SAElCC,SAAU,MATI/R,GAYV6R,EAAWF,EAAK/O,KAChBmO,EAASY,EAAKX,YAAcC,IAAIC,gBAAgBS,GAOtD,OANAjI,qBAAU,WACR,OAAO,WACLuH,IAAIE,gBAAgBJ,MAErB,CAACA,IAGF,sBAAKlP,UAAWH,EAAQkQ,cAAxB,UACE,cAACI,GAAA,EAAD,CACEnQ,UAAWH,EAAQqQ,SACnB9L,UAAWjB,EAAMc,QAAQmD,WAAWgJ,QAEtC,cAAC1P,EAAA,EAAD,CACEV,UAAWH,EAAQmQ,SACnBrP,QAAQ,QACR4L,QAAM,EACNtJ,UAAU,IACVoN,KAAMnB,EACNoB,SAAUN,EANZ,SAQGA,OAsCMO,OAhCf,YAA0D,IAAlC7D,EAAiC,EAAjCA,MAAO8D,EAA0B,EAA1BA,YAAa7B,EAAa,EAAbA,UACpC9O,EAAU3B,KAEhB,OACE,eAAC+B,EAAA,EAAD,CAAKD,UAAWH,EAAQqO,eAAxB,UACGsC,GACC,qBAAKxQ,UAAWH,EAAQuO,qBAAxB,SACE,cAACC,GAAD,CAA2B3L,KAAK,MAAMgM,UAAWC,MAGpDjC,EAAMC,OAAO8D,KAAI,SAACxB,EAAOyB,GACxB,OACE,cAAC1B,GAAD,CAEEhP,UAAWH,EAAQoP,MACnBA,MAAOA,EACP/C,IAAI,aAHCwE,MAOVhE,EAAMG,OAAO4D,KAAI,SAACd,EAAOe,GACxB,OAAO,cAAC,GAAD,CAAmBf,MAAOA,GAAde,MAEpBhE,EAAMI,MAAM2D,KAAI,SAACX,EAAMY,GACtB,OACE,cAACb,GAAD,CAAkBC,KAAMA,EAAM9P,UAAWH,EAAQkQ,eAAtCW,UC3KfxS,GAAYC,aAAW,SAACgF,GAAD,MAAY,CACvCwN,OAAQ,CACN1R,OAAQ,MACRZ,MAAO,OAETiL,UAAW,CACT+D,UAAW,WAmIAuD,OA/Hf,YAA2D,IAAxCC,EAAuC,EAAvCA,iBAAkB5F,EAAqB,EAArBA,IAAK6F,EAAgB,EAAhBA,aAClC3N,EAAQC,cACRvD,EAAU3B,KAChB,EAA8BmF,mBAAS4H,GAAvC,mBAAOzF,EAAP,KAAgBuL,EAAhB,KAEAlJ,qBAAU,WACJoD,EAAI+F,sBACN/F,EAAI+F,qBAAqBC,MAAK,SAACxL,GAC7BsL,EAAWtL,EAAS1H,WAGvB,CAACkN,IAEJ,IAAMiG,EAAejG,EAAIC,OAAS4F,EAAanM,SAAW,OAAS,KAEnE,SAASwM,IACP,IAAMC,EAAM,MACNC,EAAW,KACXC,EAA2B/H,KAAO0B,EAAI3B,WAAWiI,KACrDhI,KAAOsH,IAEHW,EAAwBjI,OAASgI,KAAKhI,KAAO0B,EAAI3B,YAEvD,QAAQ,GACN,KAAKgI,EAA2BD,EAC9B,OAAO,EACT,KAAKG,EAAwBH,EAC3B,OAAO9H,KAAO0B,EAAI3B,WAAWE,UAC/B,KAAKgI,EAAwBJ,EAC3B,OAAO7H,KAAO0B,EAAI3B,WAAWmI,OAAO,WACtC,KAAKD,EAAwB,EAAIJ,EAC/B,MAAM,GAAN,OAAU7H,KAAO0B,EAAI3B,WAAWmI,OAAO,OAAvC,eAAoDlI,KAClD0B,EAAI3B,WACJmI,OAAO,YACX,KAAKD,EAAwB,IAAMJ,EACjC,MAAM,GAAN,OAAU7H,KAAO0B,EAAI3B,WAAWmI,OAAO,SAAvC,eAAsDlI,KACpD0B,EAAI3B,WACJmI,OAAO,YACX,QACE,MAAM,GAAN,OAAUlI,KAAO0B,EAAI3B,WAAWmI,OAAO,eAAvC,eAA4DlI,KAC1D0B,EAAI3B,WACJmI,OAAO,aAUf,SAASC,EAASR,GAChB,MAAqB,OAAjBA,EACK,CACL9J,WAAYjE,EAAMc,QAAQ2E,QAAQ1E,KAClCuI,KAAMtJ,EAAMc,QAAQ0N,gBAAgBxO,EAAMc,QAAQ2E,QAAQ1E,OAGvDf,EAAMc,QAAQmD,WAAWgJ,MAElC,OACE,eAACnQ,EAAA,EAAD,CAAK2R,GAAG,MAAR,UACGT,IACC,cAACzQ,EAAA,EAAD,CACEV,UAAWH,EAAQyJ,UACnB3I,QAAQ,YACRC,MAAM,gBACNC,MAAM,SAJR,SAMGsQ,MAED,KAEJ,eAAClR,EAAA,EAAD,CACEC,QAAQ,OACR8G,eAAiC,OAAjBkK,EAAwB,WAAa,aACrDrD,GAAG,MACH+D,GAAG,QACHxR,WAAW,WALb,UAOoB,SAAjB8Q,GACC,cAACjF,GAAA,EAAD,CACEjM,UAAWH,EAAQ8Q,OACnBzE,IAAK4E,EAAanM,SAASiJ,cAC3BzB,IAAK2E,EAAa1E,aAItB,eAACnM,EAAA,EAAD,CACE3B,SAAS,MACTkC,aA7CR,SAAyB0Q,GACvB,MAAqB,OAAjBA,EACK,qBAEF,qBAyCaW,CAAgBX,GAC9B3Q,UAAU,0CACVD,QAASoR,EAASR,GAAc9J,WAChCyG,GAAqB,SAAjBqD,EAA0B,MAAQ,EACtC7Q,EAAE,MANJ,UAQE,cAACK,EAAA,EAAD,CACEuC,UAAU,IACVtC,QAAQ,QACR6D,MAAO,CACLsF,SAAU,SACVgI,UAAW,aACXC,aAAc,aACdC,SAAU,aACVpR,MACmB,OAAjBsQ,EACIQ,EAASR,GAAczE,KACvBtJ,EAAMc,QAAQwI,KAAK7D,SAX7B,SAcGqC,EAAIwB,QAELjH,EAAQkH,MAAMC,OAAOC,OAAS,GAC9BpH,EAAQkH,MAAMG,OAAOD,OAAS,GAC9BpH,EAAQkH,MAAMI,MAAMF,OAAS,IAC7B,cAAC,GAAD,CACEF,MAAOlH,EAAQkH,MACf8D,cAAehL,EAAQwL,qBACvBrC,UAAWnJ,EAAQmJ,sB,mECvIlBsD,GAFa/J,wBAAc,ICqBpChK,GAAYC,YAAW,CAC3BqB,KAAM,CACJnB,MAAO,MACPE,SAAU,QACV8O,UAAW,OACX7M,aAAc,OACd/B,OAAQ,aACRE,QAAS,MACT4B,UAAW,2CAEbnC,KAAM,CACJ8B,QAAS,OACTE,WAAY,UAEd8R,uBAAwB,CACtBvT,QAAS,QACT8Q,UAAW,OACX0C,UAAW,UAEbC,wBAAyB,CACvBlS,QAAS,OACTiO,SAAU,UAId,SAASkE,GAAwBC,GAC/B,IADuC,EACjC3F,EAAS,GACTE,EAAS,GAFwB,eAGnByF,GAHmB,IAGvC,2BAA4B,CAAC,IAAlB5F,EAAiB,QACpB7K,EAAO6K,EAAM7K,KAAK0Q,MAAM,KAAK,GAC1B,UAAT1Q,GAAoB8K,EAAOhB,KAAKe,GACvB,UAAT7K,GAAoBgL,EAAOlB,KAAKe,IANK,8BAQvC,OAAsB,IAAlBC,EAAOC,QAAkC,IAAlBC,EAAOD,OAAqB,CAAC,KAAM,MACvD,CAACD,EAAQE,G,IAGZ+D,GACJ,cAQI,IAAD,IAPD1F,YAOC,MAPM,GAON,EANDE,EAMC,EANDA,UAMC,IALDuB,cAKC,MALQ,GAKR,MAJDE,cAIC,MAJQ,GAIR,MAHD2F,aAGC,MAHO,GAGP,MAFD1F,aAEC,MAFO,GAEP,MADDL,YACC,MADM,GACN,uBACDgG,KAAKC,UAAYC,eACjBF,KAAKvH,KAAOA,EACZuH,KAAKrH,UAAYA,EACjBqH,KAAK/F,MAAQ,CACXC,OAAQA,EACRE,OAAQA,EACR2F,MAAOA,EACP1F,MAAOA,GAET2F,KAAKhG,KAAOA,EACZgG,KAAKnJ,UAAY,IAAIsJ,MAiRzB,IAAMC,GAAmC1U,YAAW,CAClD2U,iBAAkB,CAChB1T,SAAU,WACVf,MAAO,OACPY,OAAQ,OACR+E,YAAa,QACb9E,aAAc,SAEhB6T,cAAe,CACb1U,MAAO,OACPY,OAAQ,OACRsQ,UAAW,QACX/O,aAAc,OAEhBwS,UAAW,CACTC,IAAK,QACL7T,SAAU,WACV2E,IAAK,OACL1E,MAAO,OACPa,QAAS,OACTE,WAAY,SACZ4G,eAAgB,SAChB/H,OAAQ,OACRZ,MAAO,OACP6U,UAAW,SACXpJ,SAAU,OACV0C,WAAY,OACZlE,gBAAiB,YACjB9H,aAAc,MACdyM,OAAQ,MACR,UAAW,CACTpE,UAAW,cAEb,WAAY,CACVA,UAAW,aAGfsK,eAAgB,CACd/T,SAAU,WACVf,MAAO,OACPY,OAAQ,OACR+E,YAAa,QACb9E,aAAc,QACd,UAAW,CACTD,OAAQ,OACRZ,MAAO,OACPkR,UAAW,QACX/O,aAAc,OAEhB,YAAa,CACX4S,QAAS,KACT/L,gBAAgB,OAAD,OCpZN,yqFDoZM,KACfgM,mBAAoB,SACpB/L,eAAgB,UAChBrI,OAAQ,OACRZ,MAAO,OACPe,SAAU,WACV6N,OAAQ,SAKd,SAASqG,GAAT,GAAyE,IAAtC5G,EAAqC,EAArCA,MAAO6G,EAA8B,EAA9BA,oBAAqB7C,EAAS,EAATA,MACvD7Q,EAAUgT,KACVW,EAAiBpE,IAAIC,gBAAgB3C,GAE3C,OACE,sBAAK1M,UAAWH,EAAQiT,iBAAxB,UACE,wBACE9S,UAAWH,EAAQmT,UACnB7Q,QAAS,WACPiN,IAAIE,gBAAgBkE,GACpBD,EAAoB7C,IAJxB,SAOE,cAAC+C,GAAA,EAAD,CAAOrP,UAAU,QAAQ0F,SAAS,cAGN,UAA7B4C,EAAM7K,KAAK0Q,MAAM,KAAK,GACrB,qBAAKvS,UAAWH,EAAQkT,cAAe5G,IAAKqH,EAAgBtH,IAAI,QAEhE,qBAAKlM,UAAWH,EAAQsT,eAAxB,SACE,uBAAOhH,IAAKqH,SAOtB,IAAME,GAAkCvV,YAAW,CACjDwV,6BAA8B,CAC5BzT,QAAS,OACTE,WAAY,SACZzB,QAAS,OAEXuR,SAAU,CACRlM,YAAa,SAEfgM,SAAU,CACR3R,MAAO,QAET2U,UAAW,CACTC,IAAK,QACL/S,QAAS,OACTE,WAAY,SACZ4G,eAAgB,SAChB/H,OAAQ,OACRZ,MAAO,OACPI,OAAQ,aACRyU,UAAW,SACXpJ,SAAU,OACV0C,WAAY,OACZlE,gBAAiB,YACjB9H,aAAc,MACd,UAAW,CACTqI,UAAW,cAEb,WAAY,CACVA,UAAW,eAKjB,SAAS+K,GAAT,GAAsE,IAApC9D,EAAmC,EAAnCA,KAAM+D,EAA6B,EAA7BA,mBAAoBnD,EAAS,EAATA,MACpDvN,EAAQC,cACRvD,EAAU6T,KAChB,OACE,sBAAK1T,UAAWH,EAAQ8T,6BAAxB,UACE,cAACxD,GAAA,EAAD,CACEnQ,UAAWH,EAAQqQ,SACnB9L,UAAWjB,EAAMc,QAAQ2E,QAAQ1E,OAEnC,cAACxD,EAAA,EAAD,CAAYV,UAAWH,EAAQmQ,SAAUrP,QAAQ,QAAQ4L,QAAM,EAA/D,SACGuD,EAAK/O,OAER,wBACEf,UAAWH,EAAQmT,UACnB7Q,QAAS,WACP0R,EAAmBnD,IAHvB,SAME,cAAC+C,GAAA,EAAD,CAAOrP,UAAU,QAAQ0F,SAAS,iBAM3BgK,OAhaf,YAA2C,IAAnBC,EAAkB,EAAlBA,eAChBlU,EAAU3B,KACV8V,EAAS3J,qBAAWpC,IACpBgM,EAAe5J,qBAAW4H,IAC1B7G,EAAY8I,cAAYvP,SAG9B,EAA4CtB,mBAAS,IAArD,mBAAO8Q,EAAP,KAAuBC,EAAvB,KACA,EAA4C/Q,mBAAS,IAArD,mBAAOgR,EAAP,KAAuBC,EAAvB,KACA,EAA4CjR,mBAAS,IAArD,mBAAOkR,EAAP,KAAuBC,EAAvB,KACA,EAA0CnR,mBAAS,IAAnD,mBAAOoR,EAAP,KAAsBC,EAAtB,KACA,EAA4CrR,oBAAS,GAArD,mBAAOsR,EAAP,KAAuBC,EAAvB,KACA,EAA4BvR,mBAAS,IAArC,mBAAOwR,EAAP,KAAeC,EAAf,KAGA,SAASC,EAAoBvP,GAC3B,IAAMwP,EAAc,IAAItH,YAAY,cAAe,CAAEvC,OAAQ3F,IAC7D+F,SAASoC,cAAcqH,GAEzB,SAASC,EAAuBC,GAC9B,IAAMC,EAAiB,IAAIzH,YAAY,iBAAkB,CACvDvC,OAAQ+J,IAEV3J,SAASoC,cAAcwH,GAvBe,4CA0CxC,WAA2BzY,GAA3B,uBAAAmI,EAAA,yDACEnI,EAAE0Y,iBAKEjB,GACAE,EAAezH,OAAS,GACxB2H,EAAe3H,OAAS,GACxB6H,EAAc7H,OAAS,EAT7B,iDAgBIyH,EAAezH,QACf2H,EAAe3H,QACf6H,EAAc7H,QAGRyI,EAAuB,IAAIzE,GAAQ,CACvC1F,KAAM+I,EAAatP,SACnByG,YACAuB,OAAQ0H,EACRxH,OAAQ0H,EACR/B,MAAO,GACP1F,MAAO2H,EACPhI,KAAM0H,KAIFmB,EAAW,IAAIC,UACZC,OAAO,YAAapK,GAC7BkK,EAASE,OAAO,OAAQrB,GAExBE,EAAeoB,SAAQ,SAACxG,GAAD,OAAWqG,EAASE,OAAO,SAAUvG,MAC5DsF,EAAekB,SAAQ,SAAC9F,GAAD,OAAW2F,EAASE,OAAO,SAAU7F,MAC5D8E,EAAcgB,SAAQ,SAAC3F,GAAD,OAAUwF,EAASE,OAAO,QAAS1F,MAEnD5S,EAAS,CACbwY,iBAAkB,SAAUjH,GAI1BwG,EAAuB,CACrBrG,OAJqB+G,KAAKC,MACF,IAAvBnH,EAAcoH,OAAgBpH,EAAcqH,OAI7CpD,UAAW2C,EAAqB3C,eAUhC1B,EAAuBzT,EAAM0H,KACjC,oBACAqQ,EACApY,IAGmB+T,MAAK,SAACxL,GACzB,IAAMsQ,EAAYtQ,EAAS1H,KAAKiY,IAC1BC,EAAcxQ,EAAS1H,KAAKkY,YAClCjC,EAAOkC,KAAK,2BAA4BH,EAAWE,MAGrDZ,EAAqBrE,qBAAuBA,EAE5C+D,EAAoBM,GACpBtB,EAAesB,EAAsBjK,GAGrCgJ,EAAkB,IAClBU,GAAU,GACVR,EAAkB,IAClBE,EAAkB,IAClBE,EAAiB,MAEXlP,EAAU,IAAIoL,GAAQ,CAC1BxF,YACAqB,KAAM0H,IAERC,EAAkB,IAClBU,GAAU,GACVf,EAAevO,EAAS4F,GACxB4I,EAAOkC,KAAK,eAAgB1Q,GAC5BuP,EAAoBvP,IAzFxB,4CA1CwC,kEAuIxC,WAAsC9I,GAAtC,qBAAAmI,EAAA,wDAC2BwN,GAAwB3V,EAAEyZ,OAAOrJ,OAD5D,mBACSH,EADT,KACiBE,EADjB,KAEQF,GAAUE,GAGdyH,EAAkB3H,GAClB6H,EAAkB3H,IAHlB+H,GAAkB,GAKpBlY,EAAEyZ,OAAOtH,MAAQ,GARnB,4CAvIwC,sBAuJxC,SAASuH,EAAoB1F,GAC3B4D,GAAkB,SAAC+B,GAEjB,OADAA,EAAWC,OAAO5F,EAAO,GAClB,aAAI2F,MAGf,SAASE,EAAoB7F,GAC3B8D,GAAkB,SAACgC,GAEjB,OADAA,EAAWF,OAAO5F,EAAO,GAClB,aAAI8F,MAIf,SAAS3C,EAAmBnD,GAC1BgE,GAAiB,SAAC+B,GAEhB,OADAA,EAAUH,OAAO5F,EAAO,GACjB,aAAI+F,MAIf,OAjJA5O,qBAAU,WACRgN,EACIb,EAAOkC,KAAK,SAAU9K,EAAW,SACjC4I,EAAOkC,KAAK,SAAU9K,EAAW,UACpC,CAACyJ,EAAQzJ,EAAW4I,IAEvBnM,qBAAU,WAERuM,EAAkB,MACjB,CAAChJ,IAyIF,eAACnL,EAAA,EAAD,CAAKD,UAAWH,EAAQL,KAAxB,UACGmV,GACC,cAACjU,EAAA,EAAD,CAAYC,QAAQ,QAAQC,MAAM,QAAQC,MAAM,SAAhD,oCAIF,eAACZ,EAAA,EAAD,CAAKD,UAAWH,EAAQqS,uBAAxB,WACImC,EAAezH,OAAS,GAAK2H,EAAe3H,OAAS,IACrD,eAAC3M,EAAA,EAAD,CAAKD,UAAWH,EAAQuS,wBAAxB,UACGiC,EAAe5D,KAAI,SAACxB,EAAOyB,GAC1B,OACE,cAAC4C,GAAD,CACE5G,MAAOuC,EAEPsE,oBAAqB6C,EACrB1F,MAAOA,GAFFA,MAMV6D,EAAe9D,KAAI,SAACf,EAAOgB,GAC1B,OACE,cAAC4C,GAAD,CACE5G,MAAOgD,EAEP6D,oBAAqBgD,EACrB7F,MAAOA,GAFFA,SASd+D,EAAc7H,OAAS,GACtB,cAAC3M,EAAA,EAAD,UACGwU,EAAchE,KAAI,SAACX,EAAMY,GACxB,OACE,cAACkD,GAAD,CACE9D,KAAMA,EAEN+D,mBAAoBA,EACpBnD,MAAOA,GAFFA,WAUjB,uBAAM1Q,UAAWH,EAAQzB,KAAM0B,SA5NK,4CA4NpC,UACE,uBACE4W,OAAO,kBACPlS,MAAO,CAAEtE,QAAS,QAClBjD,GAAG,YACH4E,KAAK,OACL8U,UAAQ,EACRC,SAnOgC,8CAqOlC,cAAC1U,EAAA,EAAD,CACEvB,QAAQ,YACRsC,UAAU,QACV4T,QAAQ,YACRjW,MAAM,UAJR,SAME,cAACkW,GAAA,EAAD,CAAclW,MAAM,cAEtB,uBACE8V,OAAO,4BACPlS,MAAO,CAAEtE,QAAS,QAClBjD,GAAG,iBACH4E,KAAK,OACL8U,UAAQ,EACRC,SAjGR,SAAgCla,GAC9BgY,EAAiB,aAAIhY,EAAEyZ,OAAOrJ,QAC9BpQ,EAAEyZ,OAAOtH,MAAQ,MAiGb,cAAC3M,EAAA,EAAD,CACEvB,QAAQ,YACRsC,UAAU,QACV4T,QAAQ,iBACRjW,MAAM,UAJR,SAME,cAACmW,GAAA,EAAD,CAAYnW,MAAM,cAEpB,cAACnB,EAAA,EAAD,CACEwB,WAAS,EACTC,YAAY,4BACZoF,WAAS,EACTnF,aAAW,oBACX0N,MAAOsF,EACPyC,SA9NR,SAA+Bla,GAC7BA,EAAEyZ,OAAOtH,MAAQiG,GAAU,GAAQA,GAAU,GAC7CV,EAAkB1X,EAAEyZ,OAAOtH,UA8NvB,cAAC3M,EAAA,EAAD,CAAYL,KAAK,SAAjB,SACE,cAACmV,GAAA,EAAD,CAAMpW,MAAM,qBEvVhB1C,GAAYC,YAAW,CAC3B8Y,UAAW,CACT/W,QAAS,OACT7B,MAAO,cACPI,OAAQ,MACRE,QAAS,QACT6B,aAAc,oBAEhB0W,IAAK,CACHjY,OAAQ,QACRZ,MAAO,QACPI,OAAQ,QACR+B,aAAc,MACd8H,gBAAiB,YACjB,iBAAkB,CAChB6O,UAAW,yDAEb,iBAAkB,CAChBA,UAAW,yDAEb,iBAAkB,CAChBA,UAAW,0DAGf,oBAAqB,CACnBjM,KAAM,CACJkM,QAAS,MACTvO,UAAW,+BAEb7F,GAAI,CACFoU,QAAS,QAgBAC,OAXf,WACE,IAAMxX,EAAU3B,KAChB,OACE,eAAC+B,EAAA,EAAD,CAAKD,UAAWH,EAAQoX,UAAW1W,UAAW,EAA9C,UACE,qBAAKP,UAAWH,EAAQqX,MACxB,qBAAKlX,UAAWH,EAAQqX,MACxB,qBAAKlX,UAAWH,EAAQqX,UCuDfI,OA3Ff,YAA8C,IAAjBxG,EAAgB,EAAhBA,aACrByG,EAAmBC,mBAGnBpN,EAASC,qBAAWpC,IAE1B,EAAgC5E,mBAAS,IAAzC,mBAAOoU,EAAP,KAAiBC,EAAjB,KACA,EAA4BrU,mBAAS,CAAEkC,MAAO,GAAI0B,KAAM,KAAxD,mBAAO4N,EAAP,KAAeC,EAAf,KAEA,SAASf,EAAe9I,EAAK0M,GACvB1M,EAAIC,OAASyM,GAAa1M,EAAIG,YAAcuM,GAC9CD,GAAY,SAACE,GACX,MAAM,GAAN,oBAAWA,GAAX,CAAiB3M,OAZoB,4CAiB3C,WAA2B0M,GAA3B,iBAAA9S,EAAA,yDACO8S,EADP,iEAEoBpa,EAAMqN,IAAN,oBAAuB+M,IAF3C,OAEQzS,EAFR,QAGQuS,EAAWvS,EAAInH,KAAK0Z,WAExBC,GAAY,SAACE,GACX,MAAM,GAAN,oBAAWA,GAAX,aAAoBH,OAN1B,4CAjB2C,sBAgE3C,OAjCA5P,qBAAU,WAER,SAASgQ,EAAW5M,GAClB8I,EAAe9I,EAAK6F,EAAanM,UAKnC,OAFAyF,EAAOU,GAAG,kBAAmB+M,GAEtB,WACLzN,EAAOW,IAAI,kBAAmB8M,MAE/B,CAACzN,EAAQ0G,IAEZjJ,qBAAU,WAER0P,EAAiBO,QAAQC,SAAS,EAAGR,EAAiBO,QAAQE,gBAC7D,CAACP,EAAU5C,IAEdhN,qBAAU,WAQR,OAPAiJ,GAlDyC,oCAkDzBmH,CAAYnH,EAAanM,UACzCyF,EAAOU,GAAG,UAAU,SAACvF,EAAO0B,GACtBA,IAAS6J,EAAanM,UACxBmQ,EAAU,CAAEvP,QAAO0B,YAIhB,WACLmD,EAAO8N,mBAAmB,UA9B5BR,EAAY,OAkCX,CAAC5G,EAAc1G,IAGhB,qCACE,eAACnK,EAAA,EAAD,CACEkY,IAAKZ,EACL/S,MAAO,CACL2N,UAAW,UAHf,UAMGsF,EAAShH,KAAI,SAACxF,EAAKyF,GAAW,IAAD,EAC5B,OACE,cAAC,GAAD,CAEEzF,IAAKA,EACL4F,kBAAkB,UAAA4G,EAAS/G,EAAQ,UAAjB,eAAqBpH,YAAa,EACpDwH,aAAcA,GAHT7F,EAAI+K,KAAO/K,EAAIyH,cAOR,UAAjBmC,EAAOtP,OAAqBsP,EAAO5N,OAAS6J,EAAanM,SACxD,cAAC,GAAD,IACE,QAEN,cAAC,GAAD,CAAcoP,eAAgBA,QC5CrBqE,OA3Cf,WACE,IAAMjV,EAAQC,cACNuB,EAAauP,cAAbvP,SACR,EAAgCtB,mBAAS,IAAzC,mBAAOiH,EAAP,KAAiBC,EAAjB,KAWA,OATA1C,qBAAU,WACJlD,GACF,sBAAC,4BAAAE,EAAA,sEACmBtH,EAAMqN,IAAN,mBAAsBjG,IADzC,OACOO,EADP,OAECqF,EAAYrF,EAAInH,MAFjB,0CAAD,KAKD,CAAC4G,IAECA,EAeH,eAAC1E,EAAA,EAAD,CACE5B,MAAO,EACPmG,MAAO,CAAEvF,OAAQ,SACjBiB,QAAQ,OACRC,cAAc,SACdf,SAAS,WACTkB,QAAS6C,EAAMc,QAAQmD,WAAW6I,QANpC,UAQE,cAAC,GAAD,CAAQ3F,SAAUA,IAClB,cAAC,GAAD,CAAmBwG,aAAcxG,OAtBjC,cAACrK,EAAA,EAAD,CACEC,QAAQ,OACRsP,SAAS,IACTxI,eAAe,SACf5G,WAAW,SAJb,SAME,cAACM,EAAA,EAAD,CAAYC,QAAQ,KAAKE,MAAM,SAASD,MAAM,gBAA9C,+C,mBCjBF1C,GAAYC,YAAW,CAC3Bka,WAAY,CACVvO,SAAU,SACV0C,WAAY,UAmDD8L,OA/Cf,WACE,IAAMzY,EAAU3B,KAChB,EAAgCmF,oBAAS,GAAzC,mBAAO+C,EAAP,KAAiBtB,EAAjB,KACA,EAAoCzB,oBAAS,GAA7C,mBAAOkV,EAAP,KAAmBC,EAAnB,KAHsB,4CAKtB,WAAsB3W,GAAtB,SAAAgD,EAAA,sEAEI2T,GAAc,GAFlB,SAGsBjb,EAAMkb,OAAO,UAAW,CACxChb,QAAS,CAAEib,WAAY7W,KAJ7B,OAMuB,MANvB,OAMYsD,SACNC,OAAOpH,aAAa2a,QACpBhS,QAAQC,IAAI,4BACZ9B,GAAY,IATlB,gDAYI0T,GAAc,GAZlB,0DALsB,sBAqBtB,OAAKpS,EAaH,mCACE,eAACnG,EAAA,EAAD,CAAKC,QAAQ,OAAOE,WAAW,SAA/B,UACE,cAACM,EAAA,EAAD,CAAYV,UAAWH,EAAQwY,WAAYzX,MAAM,gBAAjD,oBAGA,cAACsB,EAAA,EAAD,CAAYC,QAvCI,4CAuCaO,KAAK,QAAQvB,aAAW,SAArD,SACGoX,EAAa,cAAC9V,EAAA,EAAD,CAAkBC,KAAK,QAAW,cAACkW,GAAA,EAAD,WAjBpD,cAAC,IAAD,CACE5V,GAAI,CACF+D,SAAU,SACVxB,MAAO,CACLW,MAAO,CAAErE,KAAM,UAAW2D,QAAS,+BCzCzCtH,GAAYC,YAAW,CAC3BwG,SAAU,CACR6H,WAAY,SACZ/H,WAAY,SAEdoU,WAAY,CACV,UAAW,CACTC,OAAQ,cAyBCC,OApBf,YAA0D,IAAhCC,EAA+B,EAA/BA,4BAClBnZ,EAAU3B,KACR+a,EAAiB5O,qBAAW4H,IAA5BgH,aACR,OACE,eAAChZ,EAAA,EAAD,CAAKC,QAAQ,OAAOE,WAAW,SAA/B,UACE,cAAC6L,GAAA,EAAD,CACE9J,QAAS,WACP6W,GAA4B,IAE9BhZ,UAAWH,EAAQgZ,WACnB3M,IAAK+M,EAAatU,SAClBwH,IAAK8M,EAAa7M,aAEpB,eAAC1L,EAAA,EAAD,CAAYV,UAAWH,EAAQ8E,SAAUhE,QAAQ,KAAKC,MAAM,cAA5D,UACGqY,EAAazS,UADhB,IAC4ByS,EAAaxS,gB,8GCXzCvI,GAAYC,YAAW,CAC3B+a,OAAQ,CACNhZ,QAAS,OACTvB,QAAS,MACTyB,WAAY,YAmBVsI,GAAenJ,aAfN,SAAC4D,GAAD,MAAY,CACzBwF,aAAc,CACZ/H,MAAOuC,EAAMc,QAAQ2E,QAAQ1E,MAE/BA,KAAM,CACJvF,QAAS,QACTN,MAAO,OACP2I,eAAgB,QAChB,UAAW,CACT6B,UAAW,cACXtI,UAAW,+CAKIhB,EAAmB,SAACuJ,GAAD,OACtC,cAACC,GAAA,EAAD,CACE5G,QAAS2G,EAAM3G,QACfnC,UAAW8I,EAAMjJ,QAAQqE,KACzB8E,iBAAkB,CAAEnJ,QAAS,CAAEL,KAAMsJ,EAAMjJ,QAAQ8I,eACnD1F,UAAU,MAJZ,SAMG6F,EAAMlJ,cAIX,SAASuZ,GAAT,GAA8C,IAAXC,EAAU,EAAVA,OAC3BjW,EAAQC,eACViW,EAAO,GACX,QAAQ,GACN,KAAqC,IAAhCD,EAAOE,cAAc1M,OACxB,OAAO,KACT,KAAqC,IAAhCwM,EAAOE,cAAc1M,OACxByM,EAAI,UAAMD,EAAOE,cAAc,GAA3B,cACJ,MACF,KAAqC,IAAhCF,EAAOE,cAAc1M,OACxByM,EAAI,UAAMD,EAAOE,cAAc,GAA3B,gBAAqCF,EAAOE,cAAc,GAA1D,eACJ,MACF,QACED,EAAI,UAAMD,EAAOE,cAAc1M,OAA3B,qCAA8DwM,EAAOE,cAAc,GAAnF,gBAA6FF,EAAOE,cAAc,IAI1H,OACE,cAAC5Y,EAAA,EAAD,CAAYC,QAAQ,QAAQ6D,MAAO,CAAE5D,MAAOuC,EAAMc,QAAQsV,KAAK,MAA/D,SACGF,IAsOQG,OAjOf,YAA2C,IAAzBJ,EAAwB,EAAxBA,OAAQvX,EAAgB,EAAhBA,KAAM4X,EAAU,EAAVA,OACxBvP,EAAUC,cACVtK,EAAU3B,KAGVkM,EAASC,qBAAWpC,IAG1B,EAA4B5E,mBAAS+V,EAAO5O,QAA5C,mBAAOA,EAAP,KAAeC,EAAf,KARwC,SA4BzBiP,IA5ByB,2EA4BxC,sBAAA7U,EAAA,+EAEUtH,EAAM0H,KAAK,iBAAkB,CACjCN,SAAUyU,EAAOzU,SACjB9C,KAAM,SAJZ,OAMI4X,IANJ,+CAQI9S,QAAQC,IAAR,MARJ,yDA5BwC,+BAyCzB+S,IAzCyB,2EAyCxC,sBAAA9U,EAAA,+EAEUtH,EAAM0H,KAAK,iBAAkB,CACjCN,SAAUyU,EAAOzU,SACjB9C,KAAM,WAJZ,OAMI4X,IANJ,+CAQI9S,QAAQC,IAAR,MARJ,yDAzCwC,+BAsDzBgT,IAtDyB,2EAsDxC,sBAAA/U,EAAA,+EAEUtH,EAAM0H,KAAK,iBAAkB,CACjCN,SAAUyU,EAAOzU,SACjB9C,KAAM,WAJZ,OAMI4X,IANJ,+CAQI9S,QAAQC,IAAR,MARJ,yDAtDwC,+BAmEzBiT,IAnEyB,2EAmExC,sBAAAhV,EAAA,+EAEUtH,EAAM0H,KAAK,iBAAkB,CACjCN,SAAUyU,EAAOzU,SACjB9C,KAAM,WAJZ,OAMI4X,IANJ,+CAQI9S,QAAQC,IAAR,MARJ,yDAnEwC,+BAgFzBkT,IAhFyB,2EAgFxC,sBAAAjV,EAAA,+EAEUtH,EAAM0H,KAAK,iBAAkB,CACjCN,SAAUyU,EAAOzU,SACjB9C,KAAM,aAJZ,OAMI4X,IANJ,+CAQI9S,QAAQC,IAAR,MARJ,yDAhFwC,sBA6FxC,SAASmT,EAAT,GAA0C,IAAbD,EAAY,EAAZA,SACrB3W,EAAQC,eACd,EAAgC4W,IAAM3W,SAAS,MAA/C,mBAAO4W,EAAP,KAAiBC,EAAjB,KAUMC,EAAO7Y,QAAQ2Y,GACfhd,EAAKkd,EAAO,gBAAaC,EAE/B,OACE,qCACE,cAAC5X,EAAA,EAAD,CACE6X,mBAAkBpd,EAClB0D,QAAQ,WACRC,MAAM,UACNuB,QAjBc,SAACmY,GACnBJ,EAAYI,EAAMC,gBAiBd/V,MAAO,CAAEC,WAAY,OAAQ7F,cAAe,cAL9C,qBASA,cAAC4b,GAAA,EAAD,CACEvd,GAAIA,EACJkd,KAAMA,EACNF,SAAUA,EACVQ,QAtBc,WAClBP,EAAY,OAsBRpO,aAAc,CACZC,SAAU,SACVC,WAAY,UAEd0O,gBAAiB,CACf3O,SAAU,MACVC,WAAY,UAXhB,SAcE,cAACxJ,EAAA,EAAD,CACE7B,QAAQ,WACRwB,QAAS2X,EACTtV,MAAO,CACLC,WAAY,OACZ7F,cAAe,aACfgC,MAAOuC,EAAMc,QAAQsV,KAAK,MAN9B,2BA6DR,OAxLA1R,qBAAU,WAER,SAASgD,EAAkBlG,EAAUY,GACnCZ,KAAQ,OAAKyU,QAAL,IAAKA,OAAL,EAAKA,EAAQzU,WAAY8F,EAAUlF,GAI7C,OADA6E,EAAOU,GAAG,oBAAqBD,GACxB,WACLT,EAAOW,IAAI,oBAAqBF,MAEjC,CAACT,EAAQgP,IA+KV,eAAC,GAAD,CACEjX,QA7KJ,WACE,GAAW,WAAPN,EAAiB,OAAOqI,EAAQyB,KAAR,qBAA2ByN,EAAOzU,YA6K5D3E,UAAWH,EAAQqZ,OACnBjW,UAAU,MAHZ,UAKE,cAACkF,GAAD,CACExH,QAAQ,MACRiL,QAAQ,SACRE,aAAc,CAAEC,SAAU,SAAUC,WAAY,SAChDH,aAAa,IACbtD,SAAUiC,EAAS,EAAI,EALzB,SAOE,cAACyB,GAAA,EAAD,CAAQC,IAAKkN,EAAO5S,UAAW2F,IAAKiN,EAAOhN,eAE7C,eAACnM,EAAA,EAAD,CAAK8N,GAAI,EAAT,UACE,eAACrN,EAAA,EAAD,CACEC,QAAQ,KACR6D,MAAO,CAAEsF,SAAU,QACnBlJ,MAAM,cAHR,UAKGwY,EAAO5S,UALV,IAKsB4S,EAAO3S,YAG5B5E,EAAO,cAACsX,GAAD,CAAyBC,OAAQA,IAAa,QArE5D,SAAmBvX,GACjB,OAAQA,GACN,IAAK,gBACH,OACE,eAAC5B,EAAA,EAAD,CAAK8N,GAAG,OAAO7N,QAAQ,OAAvB,UAEE,cAACgC,EAAA,EAAD,CAAYC,QAASwX,EAArB,SACE,cAACgB,GAAA,EAAD,CAAMvW,UAAWwW,KAAK,SAIxB,cAAC1Y,EAAA,EAAD,CAAYC,QAASyX,EAArB,SACE,cAACiB,GAAA,EAAD,CAAOja,MAAM,eAIrB,IAAK,UACH,OAEE,aADA,CACCsB,EAAA,EAAD,CACEC,QAASuX,EACTlV,MAAO,CAAEC,WAAY,QAFvB,SAIE,cAACqW,GAAA,EAAD,MAGN,IAAK,iBACH,OAEE,aADA,CACCtY,EAAA,EAAD,CACE7B,QAAQ,WACRC,MAAM,UACNuB,QAAS0X,EACTrV,MAAO,CAAEC,WAAY,OAAQ7F,cAAe,cAJ9C,oBASJ,IAAK,SACH,OAAO,cAACmb,EAAD,CAAmBD,SAAUA,IACtC,QACE,OAAO,MA8BRiB,CAAUlZ,OCxPFmZ,OA7Cf,WACE,MAAoC3X,mBAAS,IAA7C,mBAAO4X,EAAP,KAAmBC,EAAnB,KACA,EAA8B7X,oBAAS,GAAvC,mBAAOd,EAAP,KAAgBwC,EAAhB,KAFoB,SAIL0U,IAJK,2EAIpB,4BAAA5U,EAAA,sEACoBtH,EAAMqN,IAAI,eAD9B,OACQ1F,EADR,OAEEgW,EAAchW,EAAInH,MAClBgH,GAAW,GAHb,4CAJoB,sBAcpB,OAJA8C,qBAAU,WACR4R,MACC,IAGD,sBACEjV,MAAO,CACLnG,MAAO,OACP8T,UAAW,SACXgJ,UAAW,UAJf,WAOI5Y,GAAiC,IAAtB0Y,EAAWrO,QACtB,cAAC3M,EAAA,EAAD,CAAKI,EAAG,EAAR,SACE,cAACK,EAAA,EAAD,CAAYC,QAAQ,QAAQE,MAAM,SAASD,MAAM,gBAAjD,oEAKF2B,GACsB,IAAtB0Y,EAAWrO,QACXqO,EAAWxK,KAAI,SAAC2I,GACd,OACE,cAAC,GAAD,CAEEA,OAAQA,EACRvX,KAAK,SACL4X,OAAQA,GAHHL,EAAOpD,YCQXoF,OAzCf,YAA8C,IAApB3B,EAAmB,EAAnBA,OAAQ4B,EAAW,EAAXA,QAChC,EAA4ChY,mBAAS,IAArD,mBAAOiY,EAAP,KAAuBC,EAAvB,KACA,EAA8BlY,oBAAS,GAAvC,mBAAOd,EAAP,KAAgBwC,EAAhB,KAUA,OARA8C,qBAAU,WACR,sBAAC,4BAAAhD,EAAA,sEACmBtH,EAAMqN,IAAI,kBAD7B,OACO1F,EADP,OAECqW,EAAkBrW,EAAInH,MACtBgH,GAAW,GAHZ,0CAAD,KAKC,CAACsW,IAGF,eAACpb,EAAA,EAAD,CAAK2R,GAAG,MAAR,UACE,eAAClR,EAAA,EAAD,CAAYC,QAAQ,KAAKE,MAAM,SAASD,MAAM,UAA9C,UACE,cAACka,GAAA,EAAD,CAAWtW,MAAO,CAAER,YAAa,WADnC,sBAIEzB,GAAqC,IAA1B+Y,EAAe1O,QAC1B,cAAC3M,EAAA,EAAD,CAAKoM,GAAI,EAAT,SACE,cAAC3L,EAAA,EAAD,CAAYC,QAAQ,QAAQE,MAAM,SAASD,MAAM,gBAAjD,oFAKF2B,GAC0B,IAA1B+Y,EAAe1O,QACf0O,EAAe7K,KAAI,SAAC+K,GAClB,OACE,cAAC,GAAD,CAEEpC,OAAQoC,EACR3Z,KAAK,gBACL4X,OAAQA,GAHH+B,EAAUxF,Y,UCadyF,OA1Cf,YAAkD,IAAlBhC,EAAiB,EAAjBA,OAAO4B,EAAU,EAAVA,QACrC,EAA0DhY,mBAAS,IAAnE,mBAAOqY,EAAP,KAA8BC,EAA9B,KACA,EAA8BtY,oBAAS,GAAvC,mBAAOd,EAAP,KAAgBwC,EAAhB,KAWA,OATA8C,qBAAU,WACR,sBAAC,4BAAAhD,EAAA,sEACmBtH,EAAMqN,IAAI,0BAD7B,OACO1F,EADP,OAECyW,EAAyBzW,EAAInH,MACvBgH,GAAW,GAHlB,0CAAD,KAMC,CAACsW,IAGF,eAACpb,EAAA,EAAD,CAAK2R,GAAG,MAAR,UACE,eAAClR,EAAA,EAAD,CAAYC,QAAQ,KAAKE,MAAM,SAASD,MAAM,UAA9C,UACE,cAACgb,GAAA,EAAD,IADF,8BAIErZ,GAA4C,IAAjCmZ,EAAsB9O,QACjC,cAAC3M,EAAA,EAAD,CAAKoM,GAAI,EAAT,SACE,cAAC3L,EAAA,EAAD,CAAYC,QAAQ,QAAQE,MAAM,SAASD,MAAM,gBAAjD,6EAKF2B,GACiC,IAAjCmZ,EAAsB9O,QACtB8O,EAAsBjL,KAAI,SAACoL,GACzB,OACE,cAAC,GAAD,CAEEzC,OAAQyC,EACRha,KAAK,iBACL4X,OAAQA,GAHHoC,EAAU7F,Y,UCSd8F,OAzCf,YAAgD,IAApBrC,EAAmB,EAAnBA,OAAQ4B,EAAW,EAAXA,QAClC,EAAgDhY,mBAAS,IAAzD,mBAAO0Y,EAAP,KAAyBC,EAAzB,KACA,EAA8B3Y,oBAAS,GAAvC,mBAAOd,EAAP,KAAgBwC,EAAhB,KAUA,OARA8C,qBAAU,WACR,sBAAC,4BAAAhD,EAAA,sEACmBtH,EAAMqN,IAAI,qBAD7B,OACO1F,EADP,OAEC8W,EAAoB9W,EAAInH,MACxBgH,GAAW,GAHZ,0CAAD,KAKC,CAACsW,IAGF,eAACpb,EAAA,EAAD,CAAK6N,GAAG,MAAR,UACE,eAACpN,EAAA,EAAD,CAAYC,QAAQ,KAAKE,MAAM,SAASD,MAAM,UAA9C,UACE,cAACqb,GAAA,EAAD,IADF,0BAIE1Z,GAAuC,IAA5BwZ,EAAiBnP,QAC5B,cAAC3M,EAAA,EAAD,CAAKoM,GAAI,EAAT,SACE,cAAC3L,EAAA,EAAD,CAAYC,QAAQ,QAAQE,MAAM,SAASD,MAAM,gBAAjD,0EAKF2B,GAC4B,IAA5BwZ,EAAiBnP,QACjBmP,EAAiBtL,KAAI,SAACyL,GACpB,OACE,cAAC,GAAD,CAEE9C,OAAQ8C,EACRra,KAAK,UACL4X,OAAQA,GAHHyC,EAAOlG,YCPXmG,OAvBf,WACE,MAA8B9Y,qBAA9B,mBAAOgY,EAAP,KAAgBe,EAAhB,KAEA,SAAS3C,IACP2C,EAAWzG,KAAK0G,UAElB,OACE,sBACE7X,MAAO,CACLnG,MAAO,OACP8T,UAAW,SACXgJ,UAAW,UAJf,UAOE,cAAC,GAAD,CAAgBE,QAASA,EAAS5B,OAAQA,IAC1C,cAAC3W,EAAA,EAAD,CAASnC,QAAQ,WACjB,cAAC,GAAD,CAAuB0a,QAASA,EAAS5B,OAAQA,IACjD,cAAC3W,EAAA,EAAD,CAASnC,QAAQ,WACjB,cAAC,GAAD,CAAkB0a,QAASA,EAAS5B,OAAQA,Q,SClBnC6C,G,iFAAf,WAAgCC,GAAhC,eAAA1X,EAAA,sEACoBtH,EAAMqN,IAAN,iBAA4B,CAC5C4R,YAAW,OAAED,QAAF,IAAEA,OAAF,EAAEA,EAAQE,QAFzB,cACQvX,EADR,yBAISA,EAAInH,MAJb,4C,sBAuFe2e,OAhFf,WAEE,IAAMtS,EAASC,qBAAWpC,IAG1B,EAA0C5E,mBAAS,IAAnD,mBAAOsZ,EAAP,KAAsBC,EAAtB,KASA,SAASC,EAA4B5R,GACnC,IAAMzF,EAAUyF,EAAIE,OAASF,EAAIE,OAASF,EAE1C2R,GAAiB,SAACE,GAChB,GAAiC,IAA7BA,EAAkBlQ,OAIpB,OAHA0P,KAAmBrL,MAAK,SAAC0L,GACvBC,EAAiBD,MAEZ,GAET,IAAMjM,EAAQoM,EAAkBC,WAAU,SAACC,GACzC,OAAgB,OAAZA,QAAY,IAAZA,OAAA,EAAAA,EAAcC,QAASzX,EAAQ4F,aAK/B8R,EAAqBJ,EAAkBxG,OAAO5F,EAAO,GAAG,GAE9D,OADAoM,EAAkBxG,OAAO,EAAG,EAAG4G,GACxB,aAAIJ,MAwBf,OApBAjV,qBAAU,WACR,IA9BqBwD,EA+BfkR,EADcY,IAAUC,YACHb,SAU3B,OARAD,GAAiBC,GAAQtL,MAAK,SAAC0L,GAC7BC,EAAiBD,MAlCEtR,EAqCPwR,EApCdtR,SAASC,iBAAiB,cAAeH,GAsCzCjB,EAAOU,GAAG,kBAAmB+R,GAEtB,WAELN,EAAOc,SAxCX,SAAwBhS,GACtBE,SAASE,oBAAoB,cAAeJ,GAwC1CK,CAAemR,GACfzS,EAAOW,IAAI,kBAAmB8R,MAE/B,CAACzS,IAGF,qBACE5F,MAAO,CACLnG,MAAO,OACPY,OAAQ,OACRoO,UAAW,QACX8E,UAAW,SACXgJ,UAAW,UANf,SASGwB,EAAclM,KAAI,SAACuM,GAAD,OACjB,cAAC,GAAD,CAEEhT,YACEgT,EAAavF,SAAS7K,QACtBoQ,EAAavF,SAASuF,EAAavF,SAAS7K,OAAS,GAEvD3C,iBAAkB+S,EAAaC,MAL1BD,EAAahH,WCnEtB9X,GAAYC,YAAW,CAC3Bmf,IAAK,CACHjf,MAAM,GAAD,OAAM,EAAI,EAAK,IAAf,KACL,4BAA6B,CAC3BE,SAAU,WAiDhB,SAASgf,GAAT,GACE,OADuC,EAArBC,WAAqB,EAAT9M,OAIjB+M,OAhDf,WACE,IAAM5d,EAAU3B,KAChB,EAA0BmF,mBAAS,GAAnC,mBAAOqN,EAAP,KAAcgN,EAAd,KAMA,OACE,qCACE,cAACzd,EAAA,EAAD,CAAK6N,GAAI,EAAGvN,UAAU,yCAAtB,SACE,eAACod,GAAA,EAAD,CACE9O,MAAO6B,EACPkG,SARa,SAAC0D,EAAOsD,GAC3BF,EAASE,IAQHjd,QAAQ,YACRkd,eAAe,UACfC,UAAU,UACV3c,aAAW,oBANb,UAQE,cAAC4c,GAAA,EAAD,CAAK/d,UAAWH,EAAQyd,IAAKU,KAAM,cAACC,GAAA,EAAD,IAAU9c,aAAW,UACxD,cAAC4c,GAAA,EAAD,CACE/d,UAAWH,EAAQyd,IACnBU,KAAM,cAACxE,GAAA,EAAD,IACNrY,aAAW,aAEb,cAAC4c,GAAA,EAAD,CACE/d,UAAWH,EAAQyd,IACnBU,KAAM,cAACE,GAAA,EAAD,IACN/c,aAAW,gBAIjB,cAACoc,GAAD,CACEC,WAAY,CACV,cAAC,GAAD,IACA,cAAC,GAAD,IACA,cAAC,GAAD,KAEF9M,MAAOA,QCvDTxS,GAAYC,aAAW,SAACgF,GAAD,MAAY,CACvCgb,uBAAwB,CACtB/e,SAAU,WACV+S,UAAW,SACX1C,UAAW,OACXpR,MAAO,mBACPI,OAAQ,QACRqQ,KAAM,IACNnQ,QAAS,0BACT2J,gBAAiBnF,EAAMc,QAAQmD,WAAWgJ,MAC1C5P,aAAc,gBACdyM,OAAQ,OACR1M,UAAW,8CAuHA6d,OAnHf,YAAwC,IAAfC,EAAc,EAAdA,WACjBlb,EAAQC,cACRvD,EAAU3B,KAChB,EAA0CmF,mBAAS,IAAnD,mBAAOib,EAAP,KAAsBC,EAAtB,KACA,EAA8Blb,qBAA9B,mBAAOgY,EAAP,KAAgBe,EAAhB,KACM+B,EAAyB3G,mBAE/B,SAASiC,IACP2C,EAAWzG,KAAK0G,UAwBlB,OArBAxU,qBAAU,WACR,IAAM2W,EAAoBrB,IAAUC,YAAYb,SADlC,4CAGd,WAAgCkC,GAAhC,eAAA5Z,EAAA,sEACoBtH,EAAMqN,IAAN,8BAAiC6T,GAAc,CAC/DjC,YAAagC,EAAkB/B,QAFnC,cACQvX,EADR,yBAISA,EAAInH,MAJb,4CAHc,sBAgBd,OANIsgB,GAVU,2CAWZK,CAAiBL,GAAYpN,MAAK,SAAC0N,GACjCJ,EAAiBI,MAId,WACLH,EAAkBnB,YAEnB,CAAChC,EAASgD,IAGX,eAACpe,EAAA,EAAD,CACED,UAAWH,EAAQse,uBACnBhG,IAAKgG,EAFP,UAIGE,IAAeC,EAAc1R,OAC5B,cAAClM,EAAA,EAAD,CACE8D,MAAO,CAAE/F,OAAQ,SACjBoC,MAAM,SACND,MAAM,gBAHR,+BAOE,KAZN,OAeG0d,QAfH,IAeGA,OAfH,EAeGA,EAAe7N,KAAI,SAAC2I,GACnB,OAAIA,EAAOwF,SAEP,cAAC,GAAD,CAEExF,OAAQA,EACRvX,KAAK,SACL4X,OAAQA,GAHHL,EAAOpD,KAOX,QAIRsI,EAAcO,MAAK,SAACzF,GACnB,OAAQA,EAAOwF,YAEf,qCACE,cAACle,EAAA,EAAD,CACEC,QAAQ,QACR6D,MAAO,CACLgI,WAAY,OACZ/N,OAAQ,UACRgG,WAAY,QACZ7D,MAAOuC,EAAMc,QAAQ2E,QAAQ1E,MANjC,yBADF,OAYGoa,QAZH,IAYGA,OAZH,EAYGA,EAAe7N,KAAI,SAAC2I,GACnB,OAAIA,EAAO0F,iBAEP,cAAC,GAAD,CAEEjd,KAAK,iBACLuX,OAAQA,EACRK,OAAQA,GAHHL,EAAOpD,KAMdoD,EAAO2F,qBAEP,cAAC,GAAD,CAEEld,KAAK,gBACLuX,OAAQA,EACRK,OAAQA,GAHHL,EAAOpD,KAMboD,EAAOwF,SAUL,KARH,cAAC,GAAD,CAEE/c,KAAK,UACLuX,OAAQA,EACRK,OAAQA,GAHHL,EAAOpD,WAUpB,S,UC/HJ9X,GAAYC,aAAW,SAACgF,GAAD,MAAY,CACvC3D,KAAM,CACJf,OAAQ,OAEVugB,WAAY,CACV9e,QAAS,OACT+e,YAAa,MACb5gB,MAAO,QAET6gB,YAAa,CACXte,MAAOuC,EAAMc,QAAQwI,KAAK7D,QAC1BkB,SAAU,OACV1C,WAAY,cACZ+X,QAAS,OACT9W,OAAQ,OACRhK,MAAO,OACP,iBAAkB,CAChBuC,MAAOuC,EAAMc,QAAQwI,KAAK2S,UAC1BtV,SAAU,aAuEDuV,OAlEf,WACE,IAAMxf,EAAU3B,KAChB,EAAoCmF,qBAApC,mBAAOgb,EAAP,KAAmBiB,EAAnB,KACA,EAAkDjc,oBAAS,GAA3D,mBAAOkc,EAAP,KAA0BC,EAA1B,KAEMC,EAAejI,mBAWrB,SAASkI,EAAmBhjB,GACtB+iB,EAAa3H,UAAY2H,EAAa3H,QAAQ6H,SAASjjB,EAAEyZ,SAC3DqJ,GAAqB,GAczB,OAXA3X,qBAAU,WACK2X,IAAbnB,KACC,CAACA,IAEJxW,qBAAU,WAER,OADA0D,SAASC,iBAAiB,QAASkU,GAC5B,WACLnU,SAASE,oBAAoB,QAASiU,MAEvC,IAGD,mCACE,eAACzf,EAAA,EAAD,CACED,UAAWH,EAAQL,KACnBgB,aAAa,MACbD,UAAU,yCACVqf,SAAS,KACTC,QAAS,WACPxB,IAAekB,GAAqBC,GAAqB,IAE3DrH,IAAKsH,EARP,UAUE,uBAAMzf,UAAWH,EAAQmf,WAAYlf,SAjC3C,SAAsBpD,GACpBA,EAAE0Y,iBACFiJ,GAAcmB,GAAqB,IA+B/B,UACE,uBACExf,UAAWH,EAAQqf,YACnBhe,YAAY,YACZ2N,MAAOwP,EACPwB,QAAS,WACPxB,GAAcmB,GAAqB,IAErC5I,SAAU,SAACla,IA7CrB,SAAsBA,GACpB4iB,EAAc5iB,EAAEyZ,OAAOtH,OA6CbiR,CAAapjB,MAGjB,cAACwF,EAAA,EAAD,CAAYL,KAAK,SAAjB,SACE,cAACke,GAAA,EAAD,SAGHR,EAAoB,cAAC,GAAD,CAAelB,WAAYA,IAAiB,WChFnEngB,GAAYC,aAAW,SAACgF,GAAD,MAAY,CACvC3D,KAAK,cACHJ,SAAU,WACVc,QAAS,OACTC,cAAe,SACf7B,SAAU,QACVC,SAAU,QACVU,OAAQ,SACPkE,EAAM6c,YAAYC,KAAK,MAAQ,CAC9B1hB,SAAU,aA+BD2hB,OA1Bf,YAA0D,IAAhClH,EAA+B,EAA/BA,4BAClB7V,EAAQC,eACRvD,EAAU3B,KAChB,OACE,eAAC+B,EAAA,EAAD,CACED,UAAWH,EAAQL,KACnB2gB,YAAW,oBAAehd,EAAMc,QAAQsV,KAAK,MAF/C,UAIE,eAACtZ,EAAA,EAAD,CACEoM,GAAI,EACJ+T,GAAI,EACJlgB,QAAQ,OACRE,WAAW,SACX4G,eAAe,gBALjB,UAOE,cAAC,GAAD,CACEgS,4BAA6BA,IAE/B,cAAC,GAAD,OAEF,cAAC,GAAD,IACA,cAAC,GAAD,Q,8BC5BA9a,GAAYC,aAAW,SAACgF,GAAD,MAAY,CACvCkd,MAAO,CACLngB,QAAS,OACT8G,eAAgB,SAChB5G,WAAY,UAEdkgB,eAAgB,CACdrhB,OAAQ,QACRZ,MAAO,QACPmC,aAAc,OACd8H,gBAAiBnF,EAAMc,QAAQmD,WAAWgJ,MAC1C7P,UAAW4C,EAAMod,QAAQ,GACzBpB,QAAS,QAEXxO,OAAQ,CACNlS,OAAQ,QACRQ,OAAQ,QACRZ,MAAO,SAETmiB,cAAe,CACb/hB,OAAQ,WAEVgiB,aAAc,CACZpT,UAAW,SAEbqT,SAAU,CACR5W,SAAU,UAEZ6W,aAAc,CACZtT,UAAW,QACXvD,SAAU,SACV0C,WAAY,OACZ5L,MAAO,WAETggB,aAAc,CACZvT,UAAW,QACXnO,aAAc,QACd4K,SAAU,SACV0C,WAAY,MACZ5L,MAAO,WAETlC,IAAK,CACHD,OAAQ,UACRE,QAAS,QACTN,MAAO,MACP,eAAgB,CACdI,OAAQ,cAsKCoiB,OAjKf,YAA0E,IAA1CC,EAAyC,EAAzCA,SAAU9H,EAA+B,EAA/BA,4BAClCnZ,EAAU3B,KAChB,EAA0CmM,qBAAW4H,IAA7CgH,EAAR,EAAQA,aAAc8H,EAAtB,EAAsBA,gBAGtB,EAA4C1d,mBAAS4V,EAAa7M,YAAlE,mBAAO4U,EAAP,KAAuBC,EAAvB,KACA,EAA0C5d,qBAA1C,mBAAO0P,EAAP,KAAsBmO,EAAtB,KACA,EAAwB7d,oBAAS,GAAjC,mBAAO8W,EAAP,KAAagH,EAAb,KACA,EAAkC9d,oBAAS,GAA3C,mBAAO+d,EAAP,KAAkBC,EAAlB,KACA,EAA0Bhe,qBAA1B,mBAAO6C,EAAP,KAAcob,EAAd,KATuE,4CAoBvE,8BAAAzc,EAAA,0DACMkO,EADN,iCAGMsO,GAAa,GAHnB,SAIwB9jB,EAAM0H,KAAK,oBAAqB,CAChDlH,KAAMijB,IALd,OAIY9b,EAJZ,OAOMmc,GAAa,GACbC,EAAS,CACPzf,KAAM,UACN2D,QAASN,EAAInH,KAAKyH,UAIpBub,GAAgB,SAACnJ,GACf,IAAMtN,EAAQ,eAAQsN,GAEtB,OADAtN,EAAS8B,WAAalH,EAAInH,KAAKwjB,cACxBjX,KAQT9G,WAAWge,EAAa,MAzB9B,kDA2BMF,EAAS,CACPzf,KAAM,QACN2D,SAAS,eAAIC,gBAAJ,eAAc1H,KAAKyH,UAAW,KAAIA,UAE7C6b,GAAa,GA/BnB,gCAkCIC,EAAS,CAAEzf,KAAM,UAAW2D,QAAS,uBAlCzC,2DApBuE,sBA0DvE,SAASgc,IACPL,GAAQ,GACRnI,GAA+BA,GAA4B,GAG7D,OACE,mCACE,cAACyI,GAAA,EAAD,CAAOzhB,UAAWH,EAAQwgB,MAAOlG,KAAMA,EAAvC,SACE,eAACla,EAAA,EAAD,CACEC,QAAQ,OACRC,cAAc,SACdC,WAAW,SACXJ,UAAWH,EAAQygB,eAJrB,UAMGpa,EAAQ,cAAC,EAAD,CAAOrE,KAAMqE,EAAMrE,KAAnB,SAA0BqE,EAAMV,UAAmB,KAC5D,eAAC9E,EAAA,EAAD,CACEV,UAAWH,EAAQ8gB,aACnBhgB,QAAQ,KACRE,MAAM,SAHR,UAKGoY,EAAazS,UALhB,IAK4ByS,EAAaxS,YAEzC,eAAC/F,EAAA,EAAD,CACEV,UAAWH,EAAQ+gB,aACnBjgB,QAAQ,KACRE,MAAM,SAHR,cAKIoY,EAAatU,YAEjB,cAACjE,EAAA,EAAD,CACEV,UAAS,UAAKH,EAAQ6hB,SAAb,YAAyB7hB,EAAQ6gB,UAC1C7f,MAAM,SAFR,SAIGigB,EACC,6DAEE,uBAFF,2CAKE,OAEN,cAAC7U,GAAA,EAAD,CACEjM,UAAWH,EAAQ8Q,OACnBxE,IAAK6U,EACL9U,IAAI,WAGLkV,EAAY,cAAC3e,EAAA,EAAD,CAAkBC,KAAK,SAAY,KAGhD,eAACzC,EAAA,EAAD,CACEC,QAAQ,OACRC,cAAc,SACdC,WAAW,SACX/B,MAAO,EACPyP,GAAG,OACH6T,GAAG,MANL,UAQE,uBACEjL,OAAO,UACPlS,MAAO,CAAEtE,QAAS,QAClBjD,GAAG,qBACH4E,KAAK,OACL+U,SA9Ge,SAACla,GAC1B,IAAMklB,EAAS,IAAIC,WACnBnlB,EAAEyZ,OAAOrJ,MAAM,IAAM8U,EAAOE,cAAcplB,EAAEyZ,OAAOrJ,MAAM,IACzD8U,EAAOpW,iBAAiB,QAAQ,WAC9B0V,EAAiBU,EAAOG,QACxBd,EAAkBW,EAAOG,cA4GnB,cAACvf,EAAA,EAAD,CACExC,UAAWH,EAAQnB,IACnBiC,QAAQ,YACRsC,UAAU,QACV4T,QAAQ,qBACRjW,MAAM,UACNohB,QAAS,cAAC,KAAD,IANX,oBAUA,cAACxf,EAAA,EAAD,CACExC,UAAWH,EAAQnB,IACnByD,QAxI2D,2CAyI3DxB,QAAQ,YACRsC,UAAU,OACVrC,MAAM,UACNohB,QAAS,cAACC,GAAA,EAAD,IANX,oBAYA,cAACzf,EAAA,EAAD,CACExC,UAAWH,EAAQnB,IACnBiC,QAAQ,YACRC,MAAM,YACNuB,QAASqf,EAJX,SAMGV,EAAW,WAAa,qB,wCCvNvC,SAASoB,GAAYC,GACnB,IAAIC,EAAU,IAAIxP,KACdyP,EAAWD,EAAQE,WAAaH,EAAUG,WAC1CC,EAAY,WACd,IAAI1c,EAAMuc,EAAQI,aAAeL,EAAUK,aAK3C,OAJI3c,EAAM,IACRA,GAAY,GACZwc,KAEKxc,EANO,GAQZ4c,EAAY,WACd,IAAIC,EAAMN,EAAQO,aAAeR,EAAUQ,aAK3C,OAJID,EAAM,IACRA,GAAY,GACZH,KAEKG,EANO,GAQhB,MAAM,GAAN,OAAUL,EAAW,GAAK,IAAMA,GAAUO,OAAO,GAAK,IAAM,IAA5D,QACE,IAAML,GACNK,OAAO,GAFT,aAEgB,IAAMH,GAAUG,OAAO,IAwB1BC,OArBf,YAAoD,IAA/BC,EAA8B,EAA9BA,gBAAiBC,EAAa,EAAbA,UACpC,EAA0B1f,qBAA1B,mBAAO2f,EAAP,KAAcC,EAAd,KAiBA,OAfApb,qBAAU,WACR,GAAIib,IACFG,EAASf,GAAYY,KAChB,CAACI,GAAWC,OAAQD,GAAWE,gBAAgBtlB,SAASilB,IAAY,CACvE,IAAMpZ,EAAiBC,aAAY,WACjCqZ,EAASf,GAAYY,MACpB,KAEH,OAAO,WACLjZ,cAAcF,OAInB,CAACmZ,EAAiBC,IAEd,mCAAGC,KClCNK,GAAS,CACbC,WCZa,IAA0B,uCDavCC,UEba,IAA0B,sCFcvCC,QGda,IAA0B,oCHevCC,WIfa,IAA0B,uCJgBvCC,QKhBa,IAA0B,oCLiBvCC,aMjBa,IAA0B,yCNkBvCC,eOlBa,IAA0B,2CPmBvCC,OQnBa,IAA0B,oCR8C1BC,OAxBf,SAAuBf,GACrBlb,qBAAU,WACR,GACEkb,GACc,aAAdA,GACc,SAAdA,GACc,YAAdA,EACA,CACA,IAAIgB,EAAQ,IAAIC,MAAMX,GAAON,IAC7BgB,EAAME,OAEU,eAAdlB,GACc,YAAdA,GACc,iBAAdA,IAEAgB,EAAMG,MAAO,GACfH,EAAMI,OAER,OAAO,WACDJ,GAAOA,EAAMK,WAElB,CAACrB,KS1BA7kB,GAAYC,aAAW,SAACgF,GAAD,MAAY,CACvCkhB,WAAY,CACVhmB,MAAO,cACPM,QAAS,MACTuB,QAAS,OACTE,WAAY,SACZhB,SAAU,WACV2E,IAAK,MACL+K,KAAM,MACNjG,UAAW,kBACXoE,OAAQ,OACRzM,aAAc,OACd8H,gBAAiBnF,EAAMc,QAAQmD,WAAWgJ,OAI5CkU,eAAgB,CACdjmB,MAAO,MACPY,OAAQ,MACRiB,QAAS,OACT8G,eAAgB,SAChB5G,WAAY,SACZhB,SAAU,WACVoB,aAAc,MACd2W,UAAW,2BACXoN,yBAA0B,SAC1BC,sBAAuB,SACvBC,qBAAsB,SACtBC,mBAAoB,UAGtB,oBAAqB,CACnB,KAAM,CACJ7b,UAAW,aAEb,MAAO,CACLtI,UACE,aACwB,SAAvB4C,EAAMc,QAAQpC,KAAkB,YAAc,cAEnD,MAAO,CACLtB,UACE,cACwB,SAAvB4C,EAAMc,QAAQpC,KAAkB,YAAc,aAC/C,gBACwB,SAAvBsB,EAAMc,QAAQpC,KAAkB,YAAc,eAGrD8O,OAAQ,CACN1R,OAAQ,QACRZ,MAAO,SAETsmB,WAAY,CACV7a,SAAU,cAIR8a,GAAkBzmB,aAAW,SAACgF,GAAD,MAAY,CAC7C+V,OAAQ,CACNzU,WAAY,QACZ6D,gBAAiBnF,EAAMc,QAAQmD,WAAW6I,SAE5C4U,gBAAiB,CACfpmB,OAAQ,UACR6J,gBAAiBnF,EAAMc,QAAQmD,WAAW6I,QAC1CkH,UAAW,iDAEb,qBAAsB,CACpBjM,KAAM,CACJrC,UAAW,kCAEb7F,GAAI,CACF6F,UAAW,sCAKjB,SAASic,GAAT,GAAqD,IAA/B/B,EAA8B,EAA9BA,UAAWD,EAAmB,EAAnBA,gBACzB3f,EAAQC,cAgBd,OACE,cAAC1C,EAAA,EAAD,CACE8D,MAAO,CAAE5D,MAhBQ,WACnB,OAAQmiB,GACN,KAAKG,GAAW6B,WAChB,KAAK7B,GAAWE,eAChB,IAAK,SACH,OAAOjgB,EAAMc,QAAQ5C,MAAM6C,KAC7B,KAAKgf,GAAW8B,SAChB,KAAK9B,GAAW+B,KACd,OAAO9hB,EAAMc,QAAQihB,QAAQhhB,KAE/B,QACE,OAAOf,EAAMc,QAAQwI,KAAK2S,WAKZ+F,IAAkBhiB,EAAMc,QAAQwI,KAAK2S,WACrDze,QAAQ,QAFV,SAKI,CACE2iB,WAAY,kBACZC,UAAW,YACXE,WAAY,eACZD,QAAS,eACTE,QAAS,qBACT0B,SAAU,aACVC,KAAM,QACNC,QACE,cAAC,GAAD,CAAOxC,gBAAiBA,EAAiBC,UAAWA,IAEtDY,aAAc,oBACdC,eACE,iCACE,cAAC,GAAD,CAAOd,gBAAiBA,EAAiBC,UAAWA,IACnD,wBAGLc,OACE,iCACE,cAAC,GAAD,CAAOf,gBAAiBA,EAAiBC,UAAWA,IACnD,oBAGLA,KAMV,SAASwC,GAAT,GAAmD,IAA9BC,EAA6B,EAA7BA,SAAUC,EAAmB,EAAnBA,MAAOC,EAAY,EAAZA,SAC9BviB,EAAQC,cACRvD,EAAU+kB,KAChB,OACE,cAAC1iB,EAAA,EAAD,CACElC,UAAWH,EAAQqZ,OACnBsM,SAAUA,EACVrjB,QAAS,WACPujB,GAAUD,IAJd,SAOGA,EACC,cAACE,GAAA,EAAD,CAAQvhB,UAAWjB,EAAMc,QAAQsV,KAAK,OAEtC,cAACqM,GAAA,EAAD,CAAKxhB,UAAWjB,EAAMc,QAAQsV,KAAK,SAM3C,SAASsM,GAAT,GAAkD,IAA1BrY,EAAyB,EAAzBA,SAAUsY,EAAe,EAAfA,YAC1B3iB,EAAQC,cACRvD,EAAU+kB,KAChB,OACE,cAAC1iB,EAAA,EAAD,CACElC,UAAWH,EAAQglB,gBACnB1iB,QAAS,WACP,IAAMsL,EAAO,IAAIC,YAAY,OAAQ,CACnCvC,OAAQ,CAAE2a,cAAatY,cAEzBjC,SAASoC,cAAcF,IAN3B,SASE,cAACsY,GAAA,EAAD,CAAM3hB,UAAWjB,EAAMc,QAAQ+hB,QAAQ9hB,SAI7C,SAAS+hB,GAAT,GAAyC,IAAbzY,EAAY,EAAZA,SACpBrK,EAAQC,cACRvD,EAAU+kB,KAChB,OACE,cAAC1iB,EAAA,EAAD,CACElC,UAAWH,EAAQglB,gBACnB1iB,QAAS,WACP,IAAM+jB,EAAe,IAAIxY,YAAY,gBACrCnC,SAASoC,cAAcuY,IAJ3B,SAQI,CACEC,UAAW,cAACJ,GAAA,EAAD,CAAM3hB,UAAWjB,EAAMc,QAAQ+hB,QAAQ9hB,OAClD+J,UAAW,cAACA,GAAA,EAAD,CAAW7J,UAAWjB,EAAMc,QAAQ+hB,QAAQ9hB,QACvDsJ,KAMV,SAAS4Y,KACP,IAAMjjB,EAAQC,cACRvD,EAAU+kB,KAChB,OACE,cAAC1iB,EAAA,EAAD,CACElC,UAAWH,EAAQqZ,OACnB/W,QAAS,WACP,IAAMkkB,EAAU,IAAI3Y,YAAY,WAChCnC,SAASoC,cAAc0Y,IAJ3B,SAOE,cAACC,GAAA,EAAD,CAASliB,UAAWjB,EAAMc,QAAQ5C,MAAM6C,SAK9C,SAASqiB,GAAT,GAA+E,IAAtD/Y,EAAqD,EAArDA,SAAUuV,EAA2C,EAA3CA,UAAW+C,EAAgC,EAAhCA,YAAaL,EAAmB,EAAnBA,MAAOC,EAAY,EAAZA,SAChE,QAAQ,GACN,IAAK,CACHxC,GAAWsD,WACXtD,GAAWuD,UACXvD,GAAWwD,QACXxD,GAAWyD,QACXzD,GAAW0D,cACX/H,MAAK,SAACtZ,GAAD,OAAWA,IAAUwd,KAC1B,OACE,qCACE,cAACwC,GAAD,CACEC,SAAUzC,IAAcG,GAAWyD,QACnClB,MAAOA,EACPC,SAAUA,IAEZ,cAACU,GAAD,OAIN,IAAK,CACHlD,GAAW6B,WACX7B,GAAW8B,SACX9B,GAAW+B,KACX/B,GAAWE,gBACXvE,MAAK,SAACtZ,GAAD,OAAWA,IAAUwd,KAC1B,OAAO,cAAC8C,GAAD,CAAcrY,SAAUA,EAAUsY,YAAaA,IAExD,KAAK/C,IAAcG,GAAW2D,QAC5B,OACE,qCACE,cAACZ,GAAD,CAAkBzY,SAAUA,IAC5B,cAAC4Y,GAAD,OAGN,QACE,OAAO,MAgFEU,OA5Ef,YAQI,IAPFpjB,EAOC,EAPDA,UACA8J,EAMC,EANDA,SACAuV,EAKC,EALDA,UACA+C,EAIC,EAJDA,YACAiB,EAGC,EAHDA,aACAC,EAEC,EAFDA,YACAlE,EACC,EADDA,gBAEMjjB,EAAU3B,KAEV+oB,EAAWC,oBAAU,MACrBC,EAAW3P,mBAEjB,EAA0BnU,oBAAS,GAAnC,mBAAOoiB,EAAP,KAAcC,EAAd,KAkBA,OAfA5B,GAAcf,GAEdlb,qBAAU,WACJmf,GACFA,EAAYI,iBAAiB3R,SAAQ,SAAC4R,GAAD,OAAYA,EAAMC,SAAW7B,OAEnE,CAACA,EAAOuB,IAEXnf,qBAAU,WACJkf,IACFI,EAASrP,QAAQyP,UAAYR,EAC7BI,EAASrP,QAAQqM,UAElB,CAAC4C,IAGF,cAACtjB,EAAA,EAAD,CAAOC,UAAU,OAAOC,IAAI,EAAMC,QAAS,CAAEC,MAAO,IAAKC,KAAM,KAA/D,SACE,eAAC7D,EAAA,EAAD,CAAKD,UAAWH,EAAQwkB,WAAY9jB,UAAW,EAAG4X,IAAK8O,EAAvD,UACGF,GAAgB,uBAAO5O,IAAKgP,EAAUK,UAAU,IAIjD,qBAAKxnB,UAAWH,EAAQykB,eAAxB,SACE,cAACrY,GAAA,EAAD,CACEjM,UAAWH,EAAQ8Q,OACnBxE,IAAK2Z,EAAY1Z,WACjBF,IAAI,WAIR,eAACjM,EAAA,EAAD,CACE4N,GAAG,MACHrJ,MAAO,CAELijB,iBAAkB,OAClBC,cAAe,OACfC,aAAc,OACdC,WAAY,QAPhB,UAUE,cAAC9C,GAAD,CAAY/B,UAAWA,EAAWD,gBAAiBA,IAEnD,eAACpiB,EAAA,EAAD,CAAYE,MAAM,cAAc4D,MAAO,CAAEsF,SAAU,SAAnD,UACGgc,EAAYtf,UADf,IAC2Bsf,EAAYrf,eAIzC,cAAC8f,GAAD,CACExD,UAAWA,EACXvV,SAAUA,EACV9J,UAAWA,EACX+hB,MAAOA,EACPC,SAAUA,U,yCChUdxnB,GAAYC,YAAW,CAC3BqB,KAAM,CACJJ,SAAU,WACV2E,IAAK,OACL8E,UAAW,oBACXwE,UAAW,QAEbwa,UAAW,CACT5oB,OAAQ,QACRZ,MAAO,QACPI,OAAQ,UACR,gCAAiC,CAC/B6J,gBAAiB,YACjB0E,eAAgB,YAChB8a,qBAAsB,aAExB,eAAgB,CACdxf,gBAAiB,UACjB0E,eAAgB,YAChB8a,qBAAsB,gBA6CbvB,OAxCf,YAA8E,IAArDd,EAAoD,EAApDA,MAAOsC,EAA6C,EAA7CA,cAAerC,EAA8B,EAA9BA,SAAUsC,EAAoB,EAApBA,iBACjDnoB,EAAU3B,KACV+pB,EAAazQ,iBAAO,IAAI0Q,MAAM,YAOpC,OACE,cAACjoB,EAAA,EAAD,CAAKD,UAAWH,EAAQL,KAAxB,SACE,eAACS,EAAA,EAAD,CAAKD,UAAWH,EAAQ0mB,cAAxB,UACE,cAACrkB,EAAA,EAAD,CACElC,UAAWH,EAAQgoB,UACnB1lB,QAAS,WACP6lB,GAAkBD,IAHtB,SAMGA,EACC,cAACI,GAAA,EAAD,CAAU/jB,UAAU,UAEpB,cAACgkB,GAAA,EAAD,CAAahkB,UAAU,YAG3B,cAAClC,EAAA,EAAD,CACElC,UAAWH,EAAQgoB,UACnB1lB,QAAS,WACPujB,GAAUD,IAHd,SAMGA,EAAQ,cAACE,GAAA,EAAD,CAAQvhB,UAAU,UAAa,cAACwhB,GAAA,EAAD,CAAKxhB,UAAU,YAEzD,cAAClC,EAAA,EAAD,CAAYlC,UAAWH,EAAQgoB,UAAW1lB,QA5BhD,WACE,IAAMkkB,EAAU4B,EAAWnQ,QAC3BvM,SAASoC,cAAc0Y,IA0BnB,SACE,cAACC,GAAA,EAAD,CAASliB,UAAU,kB,oBCvDvBlG,GAAYC,aAAW,SAACgF,GAAD,MAAY,CACvCklB,gBAAiB,CACfjpB,SAAU,WACV6N,OAAQ,OACR3E,gBAAiB,YACjB0E,eAAgB,YAChB8a,qBAAsB,YACtBzpB,MAAO,OACPM,QAAS,QACTI,UAAW,UACXmB,QAAS,OACT8G,eAAgB,iBAElBshB,kBAAmB,CACjBpoB,QAAS,OACTE,WAAY,SACZ3B,OAAQ,WAEV8pB,UAAW,CACT9pB,OAAQ,WAEV+pB,QAAS,CACP5nB,MAAO,OACP6D,WAAY,OAEdue,MAAO,CACLpiB,MAAOuC,EAAMc,QAAQsV,KAAK,MAE5B5I,OAAQ,CACN1R,OAAQ,QACRZ,MAAO,aAiDIoqB,OA7Cf,YAAuE,IAA5C1F,EAA2C,EAA3CA,UAAW+C,EAAgC,EAAhCA,YAAahD,EAAmB,EAAnBA,gBAC3CjjB,EAAU3B,KAEhB,EAAoCmF,oBAAS,GAA7C,mBAAOqlB,EAAP,KAAmBC,EAAnB,KAcA,OACE,eAAC1oB,EAAA,EAAD,CAAKD,UAAWH,EAAQwoB,gBAAxB,UACE,eAACpoB,EAAA,EAAD,CAAKD,UAAWH,EAAQyoB,kBAAxB,UACE,cAACrc,GAAA,EAAD,CAAQjM,UAAWH,EAAQ8Q,OAAQxE,IAAK2Z,EAAY1Z,aACpD,eAACnM,EAAA,EAAD,CAAKD,UAAWH,EAAQ2oB,QAAxB,UACE,eAAC9nB,EAAA,EAAD,CAAYC,QAAQ,KAAKX,UAAWH,EAAQ8E,SAA5C,UACGmhB,EAAYtf,UADf,IAC2Bsf,EAAYrf,YAEtCsc,IAAcG,GAAWyD,SACxB,cAACjmB,EAAA,EAAD,CAAYC,QAAQ,YAAYX,UAAWH,EAAQmjB,MAAnD,SACE,cAAC,GAAD,CAAOF,gBAAiBA,EAAiBC,UAAWA,YAK5D,cAAC9iB,EAAA,EAAD,CAAKD,UAAWH,EAAQ+oB,oBAAxB,SACE,cAAC1mB,EAAA,EAAD,CAAYlC,UAAWH,EAAQ0oB,UAAWpmB,QA5BhD,WACOoJ,SAASsd,kBAIRtd,SAASud,iBACXvd,SAASud,iBACTH,GAAc,KALhBpd,SAASwd,gBAAgBC,oBACzBL,GAAc,KAyBZ,SACGD,EACC,cAACO,GAAA,EAAD,CAAgB7kB,UAAU,UAE1B,cAAC8kB,GAAA,EAAD,CAAY9kB,UAAU,kBChF5BlG,GAAYC,YAAW,CAC3BgV,eAAgB,CACdlU,OAAQ,OACRZ,MAAO,OACP,UAAW,CACTA,MAAO,OACPY,OAAQ,OACRsQ,UAAW,YAGf4Z,oBAAqB,CACnB/pB,SAAU,WACVH,OAAQ,OACR8E,IAAK,MACL1E,MAAO,MACPiJ,gBAAiB,QACjB,UAAW,CACTrJ,OAAQ,OACRZ,MAAO,OACPkR,UAAW,cAiBF6Z,OAZf,YAAsD,IAA5BC,EAA2B,EAA3BA,WAAYC,EAAe,EAAfA,YAC9BzpB,EAAU3B,KAChB,OACE,eAAC+B,EAAA,EAAD,CAAKD,UAAWH,EAAQsT,eAAxB,UACE,cAAClT,EAAA,EAAD,CAAKD,UAAWH,EAAQspB,oBAAxB,SACE,uBAAOhR,IAAKkR,EAAY7B,UAAU,EAAM/B,OAAO,MAEjD,uBAAOtN,IAAKmR,EAAa9B,UAAU,QC5BnCtpB,GAAYC,YAAW,CAC3BqB,KAAM,CACJJ,SAAU,WACV6N,OAAQ,OACR/M,QAAS,OACTC,cAAe,SACfC,WAAY,SACZ0O,KAAM,EACNzQ,MAAO,OACPY,OAAQ,OACRqJ,gBAAiB,WAwDNihB,OApDf,YAMI,IALFvC,EAKC,EALDA,YACAD,EAIC,EAJDA,aACAhE,EAGC,EAHDA,UACA+C,EAEC,EAFDA,YACAhD,EACC,EADDA,gBAEMjjB,EAAU3B,KACVmrB,EAAa7R,mBACb8R,EAAc9R,mBACpB,EAA0BnU,oBAAS,GAAnC,mBAAOoiB,EAAP,KAAcC,EAAd,KACA,EAA0CriB,oBAAS,GAAnD,mBAAO0kB,EAAP,KAAsBC,EAAtB,KAuBA,OArBAngB,qBAAU,WACRyhB,EAAYxR,QAAQyP,UAAYR,EAChCsC,EAAWvR,QAAQyP,UAAYP,IAC9B,CAACD,EAAcC,IAElBnf,qBAAU,WAENmf,EAAYI,iBAAiB3R,SAAQ,SAAC4R,GAAD,OAAYA,EAAMC,SAAW7B,OAGnE,CAACA,EAAOuB,IAEXnf,qBAAU,WAENmf,EACGwC,iBACA/T,SAAQ,SAAC4R,GAAD,OAAYA,EAAMC,QAAUS,OAGxC,CAACA,EAAef,IAGjB,eAAC/mB,EAAA,EAAD,CAAKD,UAAWH,EAAQL,KAAxB,UACE,cAAC,GAAD,CACEujB,UAAWA,EACX+C,YAAaA,EACbhD,gBAAiBA,IAEnB,cAAC,GAAD,CAAgBuG,WAAYA,EAAYC,YAAaA,IACrD,cAAC,GAAD,CACE7D,MAAOA,EACPsC,cAAeA,EACfrC,SAAUA,EACVsC,iBAAkBA,QC3Db9E,GAAa,CACxBsD,WAAY,aACZC,UAAW,YACX1B,WAAY,aACZ2B,QAAS,UACTG,QAAS,UACT7B,SAAU,WACVC,KAAM,OACN0B,QAAS,UACTC,aAAc,eACdxD,eAAgB,iBAChBD,OAAQ,UAEGsG,GACD,WADCA,GAED,WAECC,GAEA,YAmPEC,OAhPf,WACE,IAAMvf,EAASC,qBAAWpC,IAClBgR,EAAiB5O,qBAAW4H,IAA5BgH,aAER,EAAwC5V,qBAAxC,mBAAO0jB,EAAP,KAAqB6C,EAArB,KACA,EAAsCvmB,qBAAtC,mBAAO2jB,EAAP,KAAoB6C,EAApB,KACA,EAA8CxmB,oBAAS,GAAvD,mBAAOymB,EAAP,KAAwBC,EAAxB,KAQA,EAAkC1mB,qBAAlC,mBAAO0f,EAAP,KAAkBiH,EAAlB,KACA,EAAkC3mB,qBAAlC,mBAAOK,EAAP,KAAkBumB,EAAlB,KACA,EAAgC5mB,qBAAhC,mBAAOmK,EAAP,KAAiB0c,EAAjB,KACA,EAAsC7mB,qBAAtC,mBAAOyiB,EAAP,KAAoBqE,EAApB,KACA,EAA8C9mB,qBAA9C,mBAAOyf,EAAP,KAAwBsH,EAAxB,KAEMC,IAEF3mB,IAAc+lB,IACd1G,IAAcG,GAAWsD,aAE3BzD,IACC+G,EAEGQ,EAAc,WAClBP,GAAmB,GACnBC,IACAJ,IACAC,IACAI,IACAC,IACAC,IACAC,KA8CIG,EAAaC,uBACjB,SAAC9tB,GAAO,IAAD,IACC+tB,EAAgB/tB,EAAEyO,OACpBse,GACAA,GACEjc,GAAW,UAAA9Q,EAAEyO,cAAF,eAAUqC,WAAY9Q,EAAE8Q,SACzCyc,EAAaQ,GACbN,GAAe,UAAAztB,EAAEyO,cAAF,eAAUb,WAAY5N,EAAEguB,QACvCR,EAAY1c,GACZwc,EAAa9G,GAAWsD,YAExB,IAAMmE,EAAO,IAAIC,KACjBD,EAAK7f,GAAG,QAAQ,SAAU+f,GACxB,GAAIJ,IAAkBhB,GAAwB,CAC5C,IAAMnf,EAAW5N,EAAEyO,OAAOb,SAC1BF,EAAO8L,KAAK,eAAgB2U,EAAQvgB,EAAUkD,GAC9CpD,EAAOU,GACL,oBACA,SAACggB,EAAcJ,EAAQK,EAAUC,GAE7BN,EAAO/lB,WAAasU,EAAatU,UACjComB,IAAazgB,EAAS3F,UACtBqmB,IAAgBxd,IAEhBwc,EAAa9G,GAAWuD,WAnEzB,SAACkE,EAAMG,EAActd,GAEhCyd,UAAUC,aACPC,aAAa,CAAExb,MAAOnC,IAAakc,GAAoB3F,OAAO,IAC9D9S,MAAK,SAACma,GACLvB,EAAeuB,GACfrB,EAAmBvc,IAAakc,IAChC,IAAMjc,EAAOkd,EAAKld,KAAKqd,EAAcM,GACrCpB,EAAa9G,GAAWwD,SACxBjZ,EAAK3C,GAAG,UAAU,SAACic,GAGjB6C,EAAgB7C,GAChBqD,EAAmB,IAAIxX,MACvBoX,EAAa9G,GAAWyD,eAG3B0E,OAAM,SAACC,GACNtB,EAAa9G,GAAW6B,YACxBpe,QAAQtF,MAAM,6BAA8BiqB,MAiDpC7d,CAAKkd,EAAMG,EAActd,YAK/B0c,EAAYxtB,EAAE8Q,UACdwc,EAAa9G,GAAW2D,SACxBzc,EAAO8L,KACL,mBACA2U,EACAnuB,EAAEguB,OACFzR,EAAatU,SACbjI,EAAE8Q,aAYRmd,EAAK7f,GAAG,QAPR,SAAqB2C,GACnBuc,EAAa9G,GAAW2D,SACxBtb,SAASC,iBAAiB,gBAAgB,YAhE7B,SAACiC,EAAMD,GACxByd,UAAUC,aACPC,aAAa,CAAExb,MAAOnC,IAAakc,GAAoB3F,OAAO,IAC9D9S,MAAK,SAACma,GACL3d,EAAK8d,OAAOH,GACZvB,EAAeuB,GACf3d,EAAK3C,GAAG,UAAU,SAACic,GACjBqD,EAAmB,IAAIxX,MACvBoX,EAAa9G,GAAWyD,SAExBiD,EAAgB7C,GAChBgD,EAAmBvc,IAAakc,UAGnC2B,OAAM,SAACC,GACNtB,EAAa9G,GAAW6B,YACxBpe,QAAQtF,MAAM,6BAA8BiqB,MAiD1CE,CAAW/d,EAAMD,WAMvB,CAACpD,EAAQ6O,IAILwS,EAAcjB,uBAAY,WAClB,OAAZzD,QAAY,IAAZA,KAAc2E,YAAYjW,SAAQ,SAACkW,GAAD,OAAYA,EAAOC,UAC1C,OAAX5E,QAAW,IAAXA,KAAa0E,YAAYjW,SAAQ,SAACkW,GAAD,OAAYA,EAAOC,YACnD,CAAC7E,EAAcC,IAEZ6E,EAAUrB,uBACd,WACM/X,OAASrI,IACX2Y,IAAcG,GAAW2D,QACrBzc,EAAO8L,KAAK,eAAgB4P,GAC5B1b,EAAO8L,KAAK,UAAW4P,IAE7BkE,EAAa9G,GAAWC,QACxBsI,IACAjoB,WAAW8mB,EAAa,OAE1B,CAAClgB,EAAQ0b,EAAa/C,EAAW0I,IA2DnC,OAxDA5jB,qBAAU,WACR,OAAQkb,GAEN,KAAKG,GAAWsD,WACd,IAAIsF,EAAkBtoB,YAAW,WAC/BwmB,EAAa9G,GAAW6B,YACxBvhB,WAAW8mB,EAAa,OACvB,KACH,MAGF,KAAKpH,GAAW2D,QACd,IAAIkF,EAAkBvoB,YAAW,WAC/B4G,EAAO8L,KAAK,WAAY4P,GACxBwE,MACC,KACH,MACF,KAAKpH,GAAW8B,SAChB,KAAK9B,GAAW+B,KACdzhB,WAAW8mB,EAAa,KACxBmB,IAOJ,OAAO,WACLO,aAAaF,GACbE,aAAaD,MAEd,CAAC3hB,EAAQ2Y,EAAW+C,EAAa2F,IAEpC5jB,qBAAU,WAeR,OAdAuC,EAAOU,GAAG,eAAgByf,GAC1BngB,EAAOU,GAAG,UAAW+gB,GACrBzhB,EAAOU,GAAG,YAAY,WACpBkf,EAAa9G,GAAW8B,aAE1B5a,EAAOU,GAAG,gBAAgB,WACxBkf,EAAa9G,GAAW+B,SAE1B7a,EAAOU,GAAG,YAAY,SAACmhB,GACrBnG,IAAgBmG,GAAYjC,EAAa9G,GAAW+B,SAGtD1Z,SAASC,iBAAiB,OAAQ+e,GAClChf,SAASC,iBAAiB,UAAWqgB,GAC9B,WACLtgB,SAASE,oBAAoB,OAAQ8e,GACrChf,SAASE,oBAAoB,UAAWogB,GACxCzhB,EAAOW,IAAI,eAAgBwf,GAC3BngB,EAAOW,IAAI,UAAW8gB,MAEvB,CAACzhB,EAAQ0b,EAAayE,EAAYsB,IAGnC,qCACGxB,GACC,cAAC,GAAD,CACE3mB,UAAWA,EACX8J,SAAUA,EACVsY,YAAaA,EACb/C,UAAWA,EACXD,gBAAiBA,EAEjBiE,aAAcA,EACdC,YAAaA,IAIhB8C,GACC,cAAC,GAAD,CACE9C,YAAaA,EACbD,aAAcA,EACdhE,UAAWA,EACX+C,YAAaA,EACbhD,gBAAiBA,QChLZoJ,OA1Ef,YAAkC,IAATjlB,EAAQ,EAARA,KAEjBmD,EAAS+hB,aAAGjvB,EAAOE,UAAW,CAClCgvB,KAAM,CAAE3P,MAAOze,aAAaC,QAAQ,kBAGhCkF,EAAQC,cACd,EACEC,oBAAS,GADX,mBAAOgpB,EAAP,KAAiCrT,EAAjC,KAGMsT,EAAkBC,aAAcppB,EAAM6c,YAAYC,KAAK,OAE7DpY,qBAAU,WAUR,OATAuC,EAAOU,GAAG,WAAW,WACnBnE,QAAQC,IAAI,uBAGdwD,EAAOU,GAAG,cAAc,WACtBnE,QAAQC,IAAI,2BAIP,WACLwD,EAAOoiB,gBAER,CAACpiB,IAEJ,MAAwC/G,mBAAS4D,GAAjD,mBACM4H,EAAQ,CAAEoK,aADhB,KAC8B8H,gBAD9B,MAEA,OACE,cAAC,GAAc0L,SAAf,CAAwB5d,MAAOzE,EAA/B,SACE,cAAC,GAAoBqiB,SAArB,CAA8B5d,MAAOA,EAArC,SACE,eAAC5O,EAAA,EAAD,CACEC,QAAQ,OACRwsB,UAAW,QACXttB,SAAS,WACTkB,QAAS6C,EAAMc,QAAQmD,WAAW6I,QAJpC,UAMGhJ,EAAK0lB,QAAU,cAAC,GAAD,CAAsB7L,UAAQ,IAAM,KAEnDuL,EACC,cAAC,GAAD,CACErT,4BAA6BA,IAE7B,KAEHsT,EACC,qCACE,cAAC,IAAD,CAAOtkB,KAAK,aAAa4kB,OAAK,EAA9B,SACE,cAAC,GAAD,CACE5T,4BAA6BA,MAGjC,cAAC,IAAD,CAAOhR,KAAK,uBAAuB4kB,OAAK,EAAxC,SACE,cAAC,GAAD,SAIJ,qCACE,cAAC,GAAD,CACE5T,4BAA6BA,IAE/B,cAAC,IAAD,CAAOhR,KAAK,wBAAZ,SACE,cAAC,GAAD,SAKN,cAAC,GAAD,YCtCK6kB,OArCf,YAAsC,EAAZjtB,SAAa,IACrC,EAAgCyD,oBAAS,GAAzC,mBAAO+C,EAAP,KAAiBtB,EAAjB,KACA,EAA8BzB,oBAAS,GAAvC,mBAAOoE,EAAP,KAAgBC,EAAhB,KACA,EAA0BrE,mBAAS,IAAnC,mBAAOhC,EAAP,KAAcyrB,EAAd,KAcA,OAZAjlB,qBAAU,WACR,sBAAC,8BAAAhD,EAAA,+EAEuBqC,KAFvB,OAES6lB,EAFT,OAGGjoB,EAAYioB,GACZrlB,GAAW,GAJd,gDAMGolB,GAAS,eAAIrnB,gBAAJ,eAAc1H,OAAQ,KAAIyH,SANtC,wDAAD,KASC,IAECnE,EAEA,cAAC,IAAD,CACE2B,GAAI,CACF+D,SAAU,SACVxB,MAAO,CAAEW,MAAO,CAAErE,KAAM,QAAS2D,QAASnE,OAM9CoG,GAAWrB,EACN,cAAC,GAAD,CAAea,KAAMb,EAASa,OAEnCQ,IAAYrB,EACP,cAAC,IAAD,CAAUpD,GAAG,WAEf,MC/BHG,GAAQ6pB,YAAe,CAC3B/oB,QAAS,CACPpC,KAAM,QACN+G,QAAS,CACP1E,KAAM,WAERkD,WAAY,CACVgJ,MAAO,OACPH,QAAS,SAGb+P,YAAa,CACXpb,OAAQ,CACNqoB,GAAI,EACJC,GAAI,IACJC,GAAI,IACJC,GAAI,KACJC,GAAI,SAKK,SAASC,KACtB,OACE,cAAC,IAAD,UACE,cAACC,EAAA,EAAD,CAAepqB,MAAOA,GAAtB,SACE,eAAC,IAAD,WACE,cAAC,IAAD,CAAO6E,KAAM,CAAC,IAAK,SAAU,WAAY4kB,OAAK,EAA9C,SACE,cAAC,GAAD,MAEF,cAAC,IAAD,CAAO5kB,KAAK,aAAZ,SACE,cAAC,GAAD,UACE,cAAC,GAAD,eCnCdwlB,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAACJ,GAAD,MAEF/hB,SAASoiB,eAAe,W","file":"static/js/main.cdc9ec9f.chunk.js","sourcesContent":["function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 310;","const config = {\n  address: \"https://messenger-backend-server.herokuapp.com\",\n  wsAddress: \"wss://messenger-backend-server.herokuapp.com\",\n};\n\nexport default config;\n","import axios from \"axios\";\nimport config from \"../backendConfig\";\n\nconst baseURL = `${config.address}/api`;\n\nconst axiosInstance = axios.create({\n  baseURL,\n  headers: { \"X-Requested-With\": \"XMLHttpRequest\" },\n});\n\naxiosInstance.interceptors.request.use((request) => {\n  if (request.url.includes(\"/login\") && request.data) {\n    //this is the case if the login is performed with username and password which is contained in the request.data\n    return request;\n  }\n  if (!request.url.includes(\"/userinfo\")) {\n    request.headers[\"Authorization\"] = `Bearer ${localStorage.getItem(\n      \"accesstoken\"\n    )}`;\n  }\n  return request;\n});\n\nexport default axiosInstance;\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport {\n  Box,\n  Button,\n  CircularProgress,\n  Divider,\n  IconButton,\n  InputAdornment,\n  makeStyles,\n  TextField,\n  Typography,\n  withStyles,\n} from \"@material-ui/core\";\nimport { Visibility, VisibilityOff } from \"@material-ui/icons\";\n\nconst useStyles = makeStyles({\n  form: {\n    width: \"70%\",\n    maxWidth: \"450px\",\n    minWidth: \"300px\",\n  },\n  formTitle: {\n    margin: \"0.5em\",\n  },\n  btn: {\n    width: \"fit-content\",\n    margin: \"1.5em 0\",\n    padding: \"0.7em 4em\",\n    textTransform: \"capitalize\",\n  },\n  link: {\n    textDecoration: \"none\",\n    alignSelf: \"flex-end\",\n  },\n  divider: {\n    width: \"100%\",\n    height: \"1.5px\",\n    marginBottom: \"1.5em\",\n  },\n  spinner: {\n    position: \"absolute\",\n    right: \"15%\",\n  },\n});\n\nconst StyledTextField = withStyles({\n  root: {\n    \"& .MuiInputBase-input\": {\n      padding: \"0.7em\",\n    },\n  },\n})(TextField);\n\nfunction Form({ formik, children }) {\n  const classes = useStyles();\n  return (\n    <form onSubmit={formik.handleSubmit} className={classes.form}>\n      <Box\n        display=\"flex\"\n        flexDirection=\"column\"\n        alignItems=\"center\"\n        p=\"2em 3em\"\n        bgcolor=\"white\"\n        boxShadow=\"rgb(37 117 252 / 20%) 0px 2px 20px 0px\"\n        borderRadius={10}\n      >\n        {children}\n      </Box>\n    </form>\n  );\n}\n\nfunction FormHeading({ children }) {\n  const classes = useStyles();\n  return (\n    <Typography\n      className={classes.formTitle}\n      variant=\"h5\"\n      color=\"primary\"\n      align=\"center\"\n    >\n      {children}\n    </Typography>\n  );\n}\n\nfunction InputField({ formik, name, ...inputProps }) {\n  return (\n    <StyledTextField\n      inputProps={inputProps}\n      variant=\"outlined\"\n      fullWidth\n      margin=\"normal\"\n      name={name}\n      placeholder={name}\n      aria-label={name}\n      {...formik.getFieldProps(name)}\n      error={Boolean(formik.touched[name] && formik.errors[name])}\n      helperText={formik.touched[name] ? formik.errors[name] : \"\"}\n    />\n  );\n}\n\nfunction PasswordField({\n  formik,\n  passwordVisible,\n  setPasswordVisible,\n  ...inputProps\n}) {\n  return (\n    <StyledTextField\n      inputProps={inputProps}\n      variant=\"outlined\"\n      fullWidth\n      margin=\"normal\"\n      type={passwordVisible ? \"text\" : \"password\"}\n      name=\"password\"\n      placeholder=\"Password\"\n      aria-label=\"password\"\n      {...formik.getFieldProps(\"password\")}\n      error={Boolean(formik.touched.password && formik.errors.password)}\n      helperText={formik.touched.password ? formik.errors.password : \"\"}\n      InputProps={{\n        endAdornment: (\n          <InputAdornment>\n            <IconButton onClick={() => setPasswordVisible(!passwordVisible)}>\n              {passwordVisible ? (\n                <Visibility color=\"primary\" />\n              ) : (\n                <VisibilityOff color=\"primary\" />\n              )}\n            </IconButton>\n          </InputAdornment>\n        ),\n      }}\n    />\n  );\n}\n\nfunction SubmitButton({ children, formik, loading }) {\n  const classes = useStyles();\n  return (\n    <Button\n      type=\"submit\"\n      className={classes.btn}\n      variant=\"contained\"\n      color=\"primary\"\n      aria-label=\"login button\"\n    >\n      {children}\n      {loading ? (\n        <CircularProgress\n          className={classes.spinner}\n          color=\"inherit\"\n          size=\"1.5em\"\n        />\n      ) : null}\n    </Button>\n  );\n}\n\nfunction FormFooter({ linkTo, children, linkText }) {\n  const classes = useStyles();\n  return (\n    <>\n      <Divider variant=\"middle\" light={true} className={classes.divider} />\n      <Typography variant=\"body2\" color=\"textSecondary\">\n        {children}{\" \"}\n        <Link to={linkTo} className={classes.link}>\n          <Typography variant=\"inherit\" color=\"primary\" component=\"span\">\n            {linkText}\n          </Typography>{\" \"}\n        </Link>\n        here!\n      </Typography>\n    </>\n  );\n}\n\nexport default StyledTextField;\nexport {\n  useStyles,\n  Form,\n  FormHeading,\n  InputField,\n  PasswordField,\n  SubmitButton,\n  FormFooter,\n};\n","import React, { useState } from \"react\";\nimport { Box, Slide, Typography, useTheme } from \"@material-ui/core\";\nimport {\n  CheckCircleOutline,\n  ErrorOutlineOutlined,\n  InfoOutlined,\n  WarningOutlined,\n} from \"@material-ui/icons\";\n\nfunction Alert({ type, children }) {\n  const theme = useTheme();\n  const [show, setShow] = useState(true);\n  setTimeout(() => {\n    setShow(false);\n  }, 2000);\n  return (\n    <Slide direction=\"down\" in={show} timeout={{ enter: 300, exit: 500 }}>\n      <Box\n        position=\"absolute\"\n        display=\"flex\"\n        top=\"5%\"\n        marginRight=\"auto\"\n        p=\"1em\"\n        borderRadius={5}\n        boxShadow={5}\n        bgcolor={theme.palette?.[type].main}\n      >\n        {type === \"success\" ? <CheckCircleOutline htmlColor=\"white\" /> : null}\n        {type === \"info\" ? <InfoOutlined htmlColor=\"white\" /> : null}\n        {type === \"warning\" ? <WarningOutlined htmlColor=\"white\" /> : null}\n        {type === \"error\" ? <ErrorOutlineOutlined htmlColor=\"white\" /> : null}\n\n        <Typography\n          variant=\"body1\"\n          style={{ marginLeft: \"0.5em\", color: \"white\" }}\n        >\n          {children}\n        </Typography>\n      </Box>\n    </Slide>\n  );\n}\n\nexport default Alert;\n","import { FormHelperText, Typography } from \"@material-ui/core\";\nimport axios from \"../../api\";\nimport React, { useState } from \"react\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport {\n  Form,\n  FormFooter,\n  FormHeading,\n  InputField,\n  PasswordField,\n  SubmitButton,\n  useStyles,\n} from \"./InputFields\";\nimport Alert from \"../Utils/Alert\";\nimport { useFormik } from \"formik\";\nimport * as yup from \"yup\";\n\n//formik props set up\nconst initialValues = {\n  username: \"\",\n  password: \"\",\n};\n\n//form Submission\nconst onSubmit = async (values, { setLoggedIn, setLoading, setFormError }) => {\n  setLoading(true);\n  try {\n    const res = await axios.post(\"/login\", values);\n    if (res.status === 200) {\n      window.localStorage.setItem(\"accesstoken\", res.data.accesstoken);\n      setLoggedIn(true);\n    }\n  } catch (err) {\n    setLoading(false);\n    setFormError({ state: true, message: err.response?.data || err.message });\n  }\n};\n//input validationSchema\nconst validationSchema = yup.object({\n  username: yup\n    .string()\n    .required(\"username cannot be empty!\")\n    .min(4, \"username must be at least 4 characters!\")\n    .max(255, \"username cannot exceed 255 characters!\")\n    .matches(\n      /[A-Za-z0-9._]{4,255}$/,\n      \"Only albabets dot(.) and underscore(_) is allowed!\"\n    ),\n  password: yup\n    .string()\n    .trim()\n    .required(\"password cannot be empty!\")\n    .min(6, \"password must be least 6 characters long!\")\n    .max(255, \"password cannot exceed 255 characters!\")\n    .matches(\n      /[\\S]{6,255}$/,\n      \"password cannnot contain white space characters!\"\n    ),\n});\n\nfunction LoginForm({ alert }) {\n  const [formError, setFormError] = useState({\n    state: false,\n    message: \"\",\n  });\n  const [passwordVisible, setPasswordVisible] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [loggedIn, setLoggedIn] = useState(false);\n\n  const formik = useFormik({\n    initialValues,\n    onSubmit: (values) => {\n      onSubmit(values, { setLoggedIn, setLoading, setFormError });\n    },\n    validationSchema,\n  });\n  const classes = useStyles();\n\n  if (loggedIn) {\n    return <Redirect to=\"/messenger\" />;\n  }\n  return (\n    <>\n      {alert ? <Alert type={alert.type}>{alert.message}</Alert> : null}\n\n      <Form formik={formik}>\n        {/* This is custom Form component. It is defined in InputFields.jsx */}\n        <FormHeading>Welcome Back</FormHeading>\n\n        {/*Username Field*/}\n        <InputField name=\"username\" formik={formik} autoFocus />\n\n        {/*Password Field*/}\n        <PasswordField\n          formik={formik}\n          passwordVisible={passwordVisible}\n          setPasswordVisible={setPasswordVisible}\n        />\n        {/* error message  */}\n        <FormHelperText error={formError.state}>\n          {formError.message}\n        </FormHelperText>\n\n        {/*forget password*/}\n        <Link to=\"/\" className={classes.link}>\n          <Typography variant=\"subtitle1\" color=\"primary\">\n            Forget Password?\n          </Typography>\n        </Link>\n\n        {/* sign in button */}\n        <SubmitButton formik={formik} loading={loading}>\n          Sign In\n        </SubmitButton>\n\n        <FormFooter linkTo=\"/signup\" linkText=\"Sign Up\">\n          Don't have an account ?\n        </FormFooter>\n      </Form>\n    </>\n  );\n}\n\nexport default LoginForm;\n","import { Box, FormHelperText } from \"@material-ui/core\";\nimport { useFormik } from \"formik\";\nimport React, { useState } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport * as yup from \"yup\";\nimport axios from \"../../api\";\nimport {\n  Form,\n  PasswordField,\n  SubmitButton,\n  InputField,\n  FormHeading,\n  FormFooter,\n} from \"./InputFields\";\n\n//formik setUp\nconst initialValues = {\n  firstName: \"\",\n  lastName: \"\",\n  username: \"\",\n  password: \"\",\n};\n//form Submission\nconst onSubmit = async (values,{ setRegistered,setLoading, setFormError}) => {\n  setLoading(true);\n  try {\n    const res = await axios.post(\"/register\", values);\n    if (res.status === 201) {\n      setRegistered(true);\n    }\n  } catch (err) {\n    console.log(err);\n    setFormError({ state: true, message: err.response?.data || err.message})\n    setLoading(false);\n  }\n};\n//input validationSchema\nconst validationSchema = yup.object({\n  firstName: yup\n    .string()\n    .required(\"firstName cannot be empty!\")\n    .min(3, \"firstName must be at least 3 characters!\")\n    .max(255, \"firstName cannot exceed 255 characters!\")\n    .matches(/[A-Za-z]{3,255}$/, \"Invalid Characters!, use letters only.\"),\n  lastName: yup\n    .string()\n    .required(\"lastName cannot be empty!\")\n    .min(3, \"lastName must be at least 3 characters!\")\n    .max(255, \"lastName cannot exceed 255 characters!\")\n    .matches(/[A-Za-z]{3,255}$/, \"Invalid Characters!, use letters only.\"),\n  username: yup\n    .string()\n    .required(\"username cannot be empty!\")\n    .min(4, \"username must be at least 4 characters!\")\n    .max(255, \"username cannot exceed 255 characters!\")\n    .matches(\n      /[A-Za-z0-9._]{4,255}$/,\n      \"Only albabets dot(.) and underscore(_) is allowed!\"\n    ),\n  password: yup\n    .string()\n    .trim()\n    .required(\"password cannot be empty!\")\n    .min(6, \"password must be least 6 characters long!\")\n    .max(255, \"password cannot exceed 255 characters!\")\n    .matches(\n      /[\\S]{6,255}$/,\n      \"password cannnot contain white space characters!\"\n    ),\n});\n\nfunction SignUpForm() {\n  const [passwordVisible, setPasswordVisible] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [formError, setFormError] = useState({\n    state: false,\n    message: \"\",\n  });\n  const [registered, setRegistered] = useState(false);\n\n  const formik = useFormik({\n    initialValues,\n    onSubmit: (values) => {\n      onSubmit(values,{setRegistered, setLoading, setFormError});\n    },\n    validationSchema,\n  });\n\n  if(registered){\n    return <Redirect to={{ pathname:\"/login\",state:{ alert:{type: 'success', message:\"User Succesfully Registered!\"}}}} />\n  }\n\n  return (\n    <Form formik={formik}>\n      <FormHeading>Lets Get Started.</FormHeading>\n\n      {/* This is for Firstname and lastName input field */}\n      <Box display=\"flex\" justifyContent=\"space-between\">\n        <InputField name=\"firstName\" formik={formik} />\n        <div style={{ width: \"1em\" }}></div>\n        <InputField name=\"lastName\" formik={formik} />\n      </Box>\n\n      {/* This is for username input field */}\n      <InputField name=\"username\" formik={formik} />\n      {/* This is for password Input Field */}\n      <PasswordField\n        passwordVisible={passwordVisible}\n        setPasswordVisible={setPasswordVisible}\n        formik={formik}\n      />\n\n      {/* error message  */}\n      <FormHelperText error={formError.state}>\n        {formError.message}\n      </FormHelperText>\n\n      <SubmitButton formik={formik} loading={loading}>\n        Sign Up\n      </SubmitButton>\n\n      <FormFooter linkTo=\"/login\" linkText=\"Sign In\">\n        Already have an account ?\n      </FormFooter>\n    </Form>\n  );\n}\n\nexport default SignUpForm;\n","export default __webpack_public_path__ + \"static/media/loginPageBackground.566fa2ff.svg\";","import axios from \"../../api\";\n\nasync function authenticateLoginToken() {\n  const accesstoken = window.localStorage.getItem(\"accesstoken\");\n  if (accesstoken) {\n      //making login request with AccessToken\n      const res = await axios.post(\"/login\");\n      if (res.status === 200) {\n        return {user: res.data}\n      }\n      //if authentication failed with error it can be catched by catch block.\n    }\n   else {\n    //if accesstoken is not present.\n    return false\n  }\n}\n\nexport default authenticateLoginToken;\n","import { Box, makeStyles } from \"@material-ui/core\";\nimport React, { useEffect, useState } from \"react\";\nimport { Route, Redirect, useLocation } from \"react-router-dom\";\nimport LoginForm from \"./LoginForm\";\nimport SignUpForm from \"./SignUpForm\";\nimport backgroundImage from \"../../assets/loginPageBackground.svg\";\nimport authenticateLoginToken from \"../ProtectedRoute/authenticateUser\";\n\nconst useStyle = makeStyles({\n  root: {\n    background: `url(${backgroundImage})`,\n    backgroundSize: \"cover\",\n    backgroundPositionY: \"100%\",\n  },\n});\n\nfunction LoginPage() {\n  const [loggedIn, setLoggedIn] = useState(false);\n  const [checked,setChecked] = useState(false);\n  const classes = useStyle();\n  const location = useLocation();\n\n  // check if the user is already logged in.\n  useEffect(() => {\n    async function checkLoggedIn() {\n      try{\n      const isValid = await authenticateLoginToken();\n      isValid && setLoggedIn(isValid);\n      setChecked(true);\n      } catch (err) {\n        location.state={alert:{ type: \"error\", message: err.response?.data || err.message }}\n        setChecked(true);\n      }\n    }\n    checkLoggedIn();\n  }, [location]);\n\n  if (loggedIn) {\n    return <Redirect to=\"/messenger\" />;\n  }\n  if(!checked){\n    return null\n  }\n  return (\n    <Box\n      className={classes.root}\n      display=\"flex\"\n      justifyContent=\"center\"\n      alignItems=\"center\"\n      height=\"100vh\"\n      width=\"100vw\"\n    >\n      <Route path=\"/\">\n        <Redirect\n          to={{\n            pathname: \"/login\",\n            state: location.state,\n          }}\n        />\n      </Route>\n      <Route path=\"/login\">\n        <LoginForm alert={location.state?.alert} />\n      </Route>\n      <Route path=\"/signup\">\n        <SignUpForm />\n      </Route>\n    </Box>\n  );\n}\n\nexport default LoginPage;\n","import { createContext } from \"react\";\n\nconst SocketContext=createContext();\n\nexport default SocketContext;","import {\n  Avatar,\n  Box,\n  Badge,\n  withStyles,\n  Typography,\n  ButtonBase,\n  makeStyles,\n} from \"@material-ui/core\";\nimport moment from \"moment\";\nimport React, { useContext, useEffect, useState } from \"react\";\nimport { useHistory } from \"react-router\";\nimport axios from \"../../../api\";\nimport SocketContext from \"../../../context/SocketContext\";\n\nexport const StyledBadge = withStyles(() => ({\n  badge: {\n    height: \"0.9em\",\n    width: \"0.9em\",\n    borderRadius: \"50%\",\n    border: `2px solid #fff`,\n    backgroundColor: ({ isonline }) => {\n      return isonline ? \"green\" : \"grey\";\n    },\n  },\n}))(Badge);\n\nconst useStyles = makeStyles({\n  messageBadge: {\n    marginLeft: \"1em\",\n  },\n});\n\nconst styles = (theme) => ({\n  buttonRipple: {\n    color: theme.palette.primary.main,\n  },\n  main: {\n    padding: \"1em\",\n    width: \"100%\",\n    justifyContent: \"start\",\n    \"&:hover\": {\n      transform: \"scale(1.01)\",\n      boxShadow: \"rgb(145 158 171 / 24%) 0px 5px 16px 0px\",\n    },\n  },\n});\n\nconst StyledButton = withStyles(styles)((props) => (\n  <ButtonBase\n    className={props.classes.main}\n    TouchRippleProps={{ classes: { root: props.classes.buttonRipple } }}\n    component=\"div\"\n    onClick={props.onClick}\n  >\n    {props.children}\n  </ButtonBase>\n));\n\nfunction MessageTime({ msgTimestamp }) {\n  //states\n  const [msgTime, setMsgTime] = useState(() => {\n    formatMessageTimestamp(msgTimestamp);\n  });\n\n  function formatMessageTimestamp(timestamp) {\n    return moment(timestamp)\n      .fromNow(true)\n      .replace(\n        /a few seconds| hours|a minute| minutes| days|an hour|a day/gi,\n        function (x) {\n          switch (x) {\n            case \" hours\":\n              return \"h\";\n            case \" minutes\":\n              return \"m\";\n            case \" days\":\n              return \"d\";\n            case \" months\":\n              return \"mth\";\n            case \"a few seconds\":\n              return \"Just Now\";\n            case \"a minute\":\n              return \"1m\";\n            case \"an hour\":\n              return \"1h\";\n            case \"a day\":\n              return \"1d\";\n            default:\n              return x;\n          }\n        }\n      );\n  }\n\n  useEffect(() => {\n    setMsgTime(formatMessageTimestamp(msgTimestamp)); //initial run\n    const updateInterval = setInterval(() => {\n      setMsgTime(formatMessageTimestamp(msgTimestamp));\n    }, 60000); //update every minutes\n    return () => {\n      clearInterval(updateInterval);\n    };\n  }, [msgTimestamp]);\n\n  return (\n    <Typography color=\"textSecondary\" style={{ fontSize: \"0.9rem\" }}>\n      {msgTime}\n    </Typography>\n  );\n}\n\nfunction Conversation({ lastMessage, conversationWith }) {\n  const classes = useStyles();\n  const history = useHistory();\n  //context\n  const socket = useContext(SocketContext);\n\n  //states\n  const [userInfo, setUserInfo] = useState({});\n  const [online, setOnline] = useState(false);\n  const [recentMessage, setRecentMessage] = useState(lastMessage);\n  //custom events\n\n  //add listener\n  function onMessageSend(listener) {\n    document.addEventListener(\"sendMessage\", listener);\n  }\n\n  //remove listener\n  function offMessageSend(listener) {\n    document.removeEventListener(\"sendMessage\", listener);\n  }\n\n  async function getUserInfo(username) {\n    const res = await axios.get(`/userinfo/${username}`);\n    setUserInfo(res.data);\n  }\n\n  //open messages\n  function openMessages() {\n    history.push(`/messenger/${conversationWith}`);\n  }\n\n  //useEffects\n\n  useEffect(() => {\n    //updateOnlineState\n    function updateOnlineState(username, state) {\n      username === userInfo?.username && setOnline(state);\n    }\n\n    socket.on(\"onlineStateChange\", updateOnlineState);\n    return () => {\n      socket.off(\"onlineStateChange\", updateOnlineState);\n    };\n  }, [socket, userInfo]);\n\n  useEffect(() => {\n    setOnline(userInfo.online);\n  }, [userInfo.online]);\n\n  useEffect(() => {\n    //updateRecentMessage\n    function updateRecentMessage(msg) {\n      msg.from === conversationWith && setRecentMessage(msg);\n\n      msg.detail?.recipient === conversationWith &&\n        setRecentMessage(msg.detail); //in this case msg is the custom event object which contains the detail property which is the info passed during the dispatch of the event.\n    }\n\n    getUserInfo(conversationWith);\n\n    socket.on(\"receive-message\", updateRecentMessage);\n    onMessageSend(updateRecentMessage);\n\n    return () => {\n      socket.off(\"receive-message\", updateRecentMessage);\n      offMessageSend(updateRecentMessage); //removeEventListener\n    };\n  }, [lastMessage, conversationWith, socket]);\n\n  return (\n    <StyledButton onClick={openMessages}>\n      <StyledBadge\n        isonline={online ? 1 : 0}\n        overlap=\"circle\"\n        badgeContent=\"\"\n        variant=\"dot\"\n        anchorOrigin={{ vertical: \"bottom\", horizontal: \"right\" }}\n      >\n        <Avatar alt={userInfo.username} src={userInfo.profilePic} />\n      </StyledBadge>\n\n      <Box px=\"0.8em\">\n        <Typography\n          color=\"textPrimary\"\n          variant=\"h6\"\n          style={{ fontSize: \"1.1rem\" }}\n        >\n          {userInfo.firstName} {userInfo.lastName}\n        </Typography>\n\n        <Typography\n          color={recentMessage.seen ? \"textSecondary\" : \"textPrimary\"}\n          component=\"p\"\n          noWrap\n          style={{\n            width: \"15.5rem\",\n            fontWeight: recentMessage.seen ? \"normal\" : \"bold\",\n          }}\n        >\n          {recentMessage.from === userInfo.username\n            ? `${userInfo.firstName}: `\n            : \"you: \"}\n\n          {/*message text */}\n          {recentMessage.text ||\n            ((recentMessage.media.images.length >0||\n              recentMessage.media.videos.length >0||\n              recentMessage.media.files.length>0) &&\n              \"sent an attatchment!\")}\n        </Typography>\n      </Box>\n\n      <Box marginLeft=\"auto\" display=\"flex\" alignItems=\"center\">\n        <MessageTime msgTimestamp={recentMessage.timestamp} />\n        <Badge className={classes.messageBadge} color=\"primary\" variant=\"dot\" />\n      </Box>\n    </StyledButton>\n  );\n}\n\nexport default Conversation;\n","import React, { useContext, useEffect } from \"react\";\nimport {\n  Avatar,\n  Box,\n  IconButton,\n  makeStyles,\n  Typography,\n} from \"@material-ui/core\";\nimport { StyledBadge } from \"../SideNavigation/Conversation\";\nimport { Phone, VideoCall } from \"@material-ui/icons\";\nimport { useState } from \"react\";\nimport SocketContext from \"../../../context/SocketContext\";\n\nconst useStyles = makeStyles({\n  header: {\n    position: \"absolute\",\n    backdropFilter: \"blur(5px)\",\n    backgroundColor: \"#ffffffc5\",\n    zIndex: \"10\",\n    width: \"100%\",\n    display: \"flex\",\n    alignItems: \"center\",\n    padding: \"1em 2em\",\n    borderRadius: \"0 0 5px 5px\",\n    boxShadow: \"rgb(145 158 171 / 24%) 0px 8px 16px 0px\",\n  },\n  largeAvatar: {\n    height: \"2.5em\",\n    width: \"2.5em\",\n  },\n  buttonIcon: {\n    margin: \"0 0.7em\",\n  },\n  menu: {\n    marginTop: \"3em\",\n  },\n});\n\nfunction Header({ userInfo }) {\n  const classes = useStyles();\n  //contexts\n  const socket = useContext(SocketContext);\n\n  //states\n  const [online, setOnline] = useState(userInfo.online);\n\n  useEffect(() => {\n    //updateOnlineState\n    function updateOnlineState(username, state) {\n      console.log(\"informed\");\n      username === userInfo?.username && setOnline(state);\n    }\n\n    socket.on(\"onlineStateChange\", updateOnlineState);\n    return () => {\n      socket.off(\"onlineStateChange\", updateOnlineState);\n    };\n  }, [socket, userInfo]);\n\n  useEffect(() => {\n    setOnline(userInfo.online);\n  }, [userInfo.online]);\n\n  function callHandler(callType) {\n    const call = new CustomEvent(\"call\", { detail: { userInfo, callType } });\n    document.dispatchEvent(call);\n  }\n\n  return (\n    <Box className={classes.header}>\n      <StyledBadge\n        variant=\"dot\"\n        badgeContent=\" \"\n        overlap=\"circle\"\n        isonline={online ? 1 : 0}\n        anchorOrigin={{ vertical: \"bottom\", horizontal: \"right\" }}\n      >\n        <Avatar\n          className={classes.largeAvatar}\n          alt={userInfo.username?.toUpperCase()}\n          src={userInfo.profilePic}\n        />\n      </StyledBadge>\n      <Box mx=\"1em\">\n        <Box display=\"flex\" flexDirection=\"column\" justifyContent=\"center\">\n          <Typography variant=\"h6\" color=\"textPrimary\">\n            {userInfo.firstName} {userInfo.lastName}\n          </Typography>\n          <Typography variant=\"subtitle1\" color=\"textPrimary\">\n            {userInfo.username ? `@${userInfo.username}` : \"\"}\n          </Typography>\n        </Box>\n      </Box>\n\n      <Box mx=\"auto\" mt=\"auto\">\n        <Typography variant=\"subtitle1\" color=\"textSecondary\">\n          {online ? \"Active Now\" : \"Offline\"}\n        </Typography>\n      </Box>\n\n      <Box ml=\"auto\">\n        <IconButton\n          className={classes.buttonIcon}\n          onClick={() => {\n            callHandler(\"AudioCall\");\n          }}\n        >\n          <Phone fontSize=\"large\" color=\"primary\" />\n        </IconButton>\n        <IconButton\n          className={classes.buttonIcon}\n          onClick={() => {\n            callHandler(\"VideoCall\");\n          }}\n        >\n          <VideoCall fontSize=\"large\" color=\"primary\" />\n        </IconButton>\n\n        {/* menu btn */}\n        {/* <IconButton\n          className={classes.buttonIcon}\n          aria-controls=\"header-menu\"\n          aria-haspopup=\"true\"\n          onClick={(event) => {\n            setAnchorEl(event.currentTarget);\n          }}\n        >\n          <MoreVert fontSize=\"large\" color=\"primary\" />\n        </IconButton>\n        <Menu\n          id=\"header-menu\"\n          className={classes.menu}\n          anchorEl={anchorEl}\n          keepMounted\n          open={Boolean(anchorEl)}\n          onClose={handleMenuClose}\n        >\n          <MenuItem onClick={handleMenuClose}>Profile</MenuItem>\n          <MenuItem onClick={handleMenuClose}>My account</MenuItem>\n          <MenuItem onClick={handleMenuClose}>Logout</MenuItem>\n        </Menu> */}\n      </Box>\n    </Box>\n  );\n}\n\nexport default Header;\n","import {\n  Box,\n  makeStyles,\n  Typography,\n  useTheme,\n  CircularProgress,\n} from \"@material-ui/core\";\nimport { Description } from \"@material-ui/icons\";\nimport React, { useEffect, useState } from \"react\";\n\nconst useStyles = makeStyles((theme) => ({\n  mediaContainer: {\n    position: \"relative\",\n    display: \"flex\",\n    flexWrap: \"wrap\",\n  },\n  progressBarContainer: {\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    position: \"absolute\",\n    height: \"100%\",\n    width: \"100%\",\n    borderRadius: \"10px\",\n    background: \"#000000b1\",\n  },\n}));\n\nfunction CircularProgressWithLabel(props) {\n  const [progressPercent, setProgressPercent] = useState(0);\n\n  useEffect(() => {\n    function updateProgress(progressEvent) {\n      if (props.msgtempid === progressEvent.detail.msgTempId) {\n        setProgressPercent(progressEvent.detail.amount);\n      }\n    }\n    document.addEventListener(\"uploadProgress\", updateProgress);\n    return () => {\n      document.removeEventListener(\"uploadProgress\", updateProgress);\n    };\n  }, [props.msgtempid]);\n\n  return (\n    <Box position=\"relative\" display=\"inline-flex\">\n      <CircularProgress\n        value={progressPercent}\n        variant=\"determinate\"\n        {...props}\n      />\n      <Box\n        top={0}\n        left={0}\n        bottom={0}\n        right={0}\n        position=\"absolute\"\n        display=\"flex\"\n        alignItems=\"center\"\n        justifyContent=\"center\"\n      >\n        <Typography\n          variant=\"caption\"\n          component=\"div\"\n          style={{ color: \"white\", fontSize: \"1.3em\" }}\n        >{`${progressPercent}%`}</Typography>\n      </Box>\n    </Box>\n  );\n}\n\nfunction Image({ image }) {\n  const srcURL = image.secure_url || URL.createObjectURL(image);\n  useEffect(() => {\n    return () => {\n      URL.revokeObjectURL(srcURL);\n    };\n  }, [srcURL]);\n  return (\n    <img\n      style={{\n        objectFit: \"cover\",\n        margin: \"0.3em\",\n        width: \"calc(100%/3 - 10px)\",\n        flexGrow: \"1\",\n        maxHeight: \"100px\",\n        borderRadius: \"10px\",\n      }}\n      src={srcURL}\n      alt=\"msg-media\"\n    />\n  );\n}\n\nfunction Video({ video }) {\n  const srcURL = video.secure_url || URL.createObjectURL(video);\n  useEffect(() => {\n    return () => {\n      URL.revokeObjectURL(srcURL);\n    };\n  }, [srcURL]);\n  return (\n    <video\n      style={{\n        margin: \"0.3em\",\n        width: \"calc(100%/3 - 10px)\",\n        flexGrow: \"1\",\n        maxHeight: \"20vw\",\n        borderRadius: \"10px\",\n      }}\n      src={srcURL}\n      controls={true}\n    />\n  );\n}\n\nfunction File({ file }) {\n  const theme = useTheme();\n  const classes = makeStyles((theme) => ({\n    fileContainer: {\n      display: \"flex\",\n      alignItems: \"center\",\n    },\n    fileName: {\n      maxWidth: \"25vw\",\n      color: theme.palette.background.default,\n    },\n    fileIcon: {},\n  }))();\n\n  const fileName = file.name;\n  const srcURL = file.secure_url || URL.createObjectURL(file);\n  useEffect(() => {\n    return () => {\n      URL.revokeObjectURL(srcURL);\n    };\n  }, [srcURL]);\n\n  return (\n    <div className={classes.fileContainer}>\n      <Description\n        className={classes.fileIcon}\n        htmlColor={theme.palette.background.paper}\n      />\n      <Typography\n        className={classes.fileName}\n        variant=\"body1\"\n        noWrap\n        component=\"a\"\n        href={srcURL}\n        download={fileName}\n      >\n        {fileName}\n      </Typography>\n    </div>\n  );\n}\n\nfunction MediaContent({ media, isUploading, msgTempId }) {\n  const classes = useStyles();\n\n  return (\n    <Box className={classes.mediaContainer}>\n      {isUploading && (\n        <div className={classes.progressBarContainer}>\n          <CircularProgressWithLabel size=\"5em\" msgtempid={msgTempId} />\n        </div>\n      )}\n      {media.images.map((image, index) => {\n        return (\n          <Image\n            key={index}\n            className={classes.image}\n            image={image}\n            alt=\"msg-media\"\n          />\n        );\n      })}\n      {media.videos.map((video, index) => {\n        return <Video key={index} video={video} />;\n      })}\n      {media.files.map((file, index) => {\n        return (\n          <File key={index} file={file} className={classes.fileContainer} />\n        );\n      })}\n    </Box>\n  );\n}\n\nexport default MediaContent;\n","import {\n  Avatar,\n  Box,\n  makeStyles,\n  Typography,\n  useTheme,\n} from \"@material-ui/core\";\nimport moment from \"moment\";\nimport React, { useEffect, useState } from \"react\";\nimport MediaContent from \"./MediaContent\";\n\nconst useStyles = makeStyles((theme) => ({\n  avatar: {\n    height: \"2em\",\n    width: \"2em\",\n  },\n  timestamp: {\n    marginTop: \"4em\",\n  },\n}));\n\nfunction Message({ prevMsgTimestamp, msg, otherEndUser }) {\n  const theme = useTheme();\n  const classes = useStyles();\n  const [message, setMessage] = useState(msg);\n\n  useEffect(() => {\n    if (msg.mediaMessageResponse) {\n      msg.mediaMessageResponse.then((response) => {\n        setMessage(response.data);\n      });\n    }\n  }, [msg]);\n\n  const msgDirection = msg.from === otherEndUser.username ? \"from\" : \"to\";\n\n  function showTimestamp() {\n    const day = 8640000; //day in milliseconds\n    const halfHour = 30 * 60 * 1000; //30 min in milliseconds (30min*60sec*100ms)\n    const timeDifferenceBetweenMsg = moment(msg.timestamp).diff(\n      moment(prevMsgTimestamp)\n    );\n    const timeDifferenceFromNow = moment().diff(moment(msg.timestamp));\n\n    switch (true) {\n      case timeDifferenceBetweenMsg < halfHour:\n        return false;\n      case timeDifferenceFromNow < halfHour:\n        return moment(msg.timestamp).fromNow();\n      case timeDifferenceFromNow < day:\n        return moment(msg.timestamp).format(\"hh:mm A\");\n      case timeDifferenceFromNow < 7 * day:\n        return `${moment(msg.timestamp).format(\"ddd\")} at ${moment(\n          msg.timestamp\n        ).format(\"hh:mm A\")}`;\n      case timeDifferenceFromNow < 365 * day:\n        return `${moment(msg.timestamp).format(\"MMM D\")} at ${moment(\n          msg.timestamp\n        ).format(\"hh:mm A\")}`;\n      default:\n        return `${moment(msg.timestamp).format(\"D MMM, YYYY\")} at ${moment(\n          msg.timestamp\n        ).format(\"hh:mm A\")}`;\n    }\n  }\n\n  function getBorderRadius(msgDirection) {\n    if (msgDirection === \"to\") {\n      return \"20px 0px 20px 20px\";\n    }\n    return \"0px 20px 20px 20px\";\n  }\n  function getColor(msgDirection) {\n    if (msgDirection === \"to\") {\n      return {\n        background: theme.palette.primary.main,\n        text: theme.palette.getContrastText(theme.palette.primary.main),\n      };\n    }\n    return theme.palette.background.paper;\n  }\n  return (\n    <Box my=\"1em\">\n      {showTimestamp() ? (\n        <Typography\n          className={classes.timestamp}\n          variant=\"subtitle1\"\n          color=\"textSecondary\"\n          align=\"center\"\n        >\n          {showTimestamp()}\n        </Typography>\n      ) : null}\n\n      <Box\n        display=\"flex\"\n        justifyContent={msgDirection === \"to\" ? \"flex-end\" : \"flex-start\"}\n        mx=\"1em\"\n        my=\"0.5em\"\n        alignItems=\"baseline\"\n      >\n        {msgDirection === \"from\" && (\n          <Avatar\n            className={classes.avatar}\n            alt={otherEndUser.username.toUpperCase()}\n            src={otherEndUser.profilePic}\n          />\n        )}\n\n        <Box\n          maxWidth=\"60%\"\n          borderRadius={getBorderRadius(msgDirection)}\n          boxShadow=\"rgb(145 158 171 / 24%) 0px 8px 16px 0px\"\n          bgcolor={getColor(msgDirection).background}\n          mx={msgDirection === \"from\" ? \"1em\" : 0}\n          p=\"1em\"\n        >\n          <Typography\n            component=\"p\"\n            variant=\"body1\"\n            style={{\n              fontSize: \"1.1rem\",\n              wordBreak: \"break-word\",\n              overflowWrap: \"break-word\",\n              wordWrap: \"break-word\",\n              color:\n                msgDirection === \"to\"\n                  ? getColor(msgDirection).text\n                  : theme.palette.text.primary,\n            }}\n          >\n            {msg.text}\n          </Typography>\n          {(message.media.images.length > 0 ||\n            message.media.videos.length > 0 ||\n            message.media.files.length > 0) && (\n            <MediaContent\n              media={message.media}\n              isUploading={!!message.mediaMessageResponse}\n              msgTempId={message.msgTempId}\n            />\n          )}\n        </Box>\n      </Box>\n    </Box>\n  );\n}\n\nexport default Message;\n","import { createContext } from \"react\";\n\nconst LoggedInUserContext = createContext({});\n\nexport default LoggedInUserContext;\n","import {\n  Box,\n  IconButton,\n  TextField,\n  makeStyles,\n  Typography,\n  useTheme,\n} from \"@material-ui/core\";\nimport {\n  Attachment,\n  Close,\n  Description,\n  ImageRounded,\n  Send,\n} from \"@material-ui/icons\";\nimport React, { useContext, useEffect, useState } from \"react\";\nimport { useParams } from \"react-router\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport SocketContext from \"../../../context/SocketContext\";\nimport videoIconOverlay from \"../../../assets/videoIconOverlay.png\";\nimport axios from \"../../../api/index\";\nimport LoggedInUserContext from \"../../../context/LoggedInUserContext\";\n\nconst useStyles = makeStyles({\n  root: {\n    width: \"60%\",\n    minWidth: \"300px\",\n    marginTop: \"auto\",\n    borderRadius: \"20px\",\n    margin: \"1.5em auto\",\n    padding: \"1em\",\n    boxShadow: \"rgb(145 158 171 / 24%) 0px 8px 16px 0px\",\n  },\n  form: {\n    display: \"flex\",\n    alignItems: \"center\",\n  },\n  selectedItemsContainer: {\n    padding: \"0.5em\",\n    maxHeight: \"25vh\",\n    overflowY: \"scroll\",\n  },\n  selectedMediasContainer: {\n    display: \"flex\",\n    flexWrap: \"wrap\",\n  },\n});\n\nfunction seperateImagesAndVideos(medias) {\n  const images = [];\n  const videos = [];\n  for (const media of medias) {\n    const type = media.type.split(\"/\")[0];\n    type === \"image\" && images.push(media);\n    type === \"video\" && videos.push(media);\n  }\n  if (images.length === 0 && videos.length === 0) return [null, null];\n  return [images, videos];\n}\n\nclass Message {\n  constructor({\n    from = \"\",\n    recipient,\n    images = [],\n    videos = [],\n    links = [],\n    files = [],\n    text = \"\",\n  }) {\n    this.tempMsgId = uuidv4();\n    this.from = from;\n    this.recipient = recipient;\n    this.media = {\n      images: images,\n      videos: videos,\n      links: links,\n      files: files,\n    };\n    this.text = text;\n    this.timestamp = new Date();\n  }\n}\n\nfunction MessageInput({ updateMessages }) {\n  const classes = useStyles();\n  const Socket = useContext(SocketContext);\n  const loggedInUser = useContext(LoggedInUserContext);\n  const recipient = useParams().username;\n\n  //states\n  const [textFieldValue, setTextFieldValue] = useState(\"\");\n  const [selectedImages, setSelectedImages] = useState([]);\n  const [selectedVideos, setSelectedVideos] = useState([]);\n  const [selectedFiles, setSelectedFiles] = useState([]);\n  const [fileInputError, setFileInputError] = useState(false);\n  const [typing, setTyping] = useState(\"\");\n\n  //custom events\n  function dispatchSendMessage(message) {\n    const sendMessage = new CustomEvent(\"sendMessage\", { detail: message });\n    document.dispatchEvent(sendMessage); //firing sendMessage event.\n  }\n  function dispatchUploadProgress(progress) {\n    const uploadProgress = new CustomEvent(\"uploadProgress\", {\n      detail: progress,\n    }); //{amount:Number,msgTempId}\n    document.dispatchEvent(uploadProgress); //firing sendMessage event.\n  }\n\n  useEffect(() => {\n    typing\n      ? Socket.emit(\"typing\", recipient, \"start\")\n      : Socket.emit(\"typing\", recipient, \"stop\");\n  }, [typing, recipient, Socket]);\n\n  useEffect(() => {\n    //reset text field when the user is changed\n    setTextFieldValue(\"\");\n  }, [recipient]);\n\n  function handleTextFieldChange(e) {\n    e.target.value ? setTyping(true) : setTyping(false);\n    setTextFieldValue(e.target.value);\n  }\n\n  async function sendMessage(e) {\n    e.preventDefault();\n\n    //check if message input contains any content\n    if (\n      !(\n        textFieldValue ||\n        selectedImages.length > 0 ||\n        selectedVideos.length > 0 ||\n        selectedFiles.length > 0\n      )\n    ) {\n      return;\n    }\n\n    if (\n      selectedImages.length ||\n      selectedVideos.length ||\n      selectedFiles.length\n    ) {\n      //create new Message object for clientSide\n      const messageForClientSide = new Message({\n        from: loggedInUser.username,\n        recipient,\n        images: selectedImages,\n        videos: selectedVideos,\n        links: [],\n        files: selectedFiles,\n        text: textFieldValue,\n      });\n\n      //setting up formData\n      const formData = new FormData();\n      formData.append(\"recipient\", recipient);\n      formData.append(\"text\", textFieldValue);\n\n      selectedImages.forEach((image) => formData.append(\"images\", image));\n      selectedVideos.forEach((video) => formData.append(\"videos\", video));\n      selectedFiles.forEach((file) => formData.append(\"files\", file));\n\n      const config = {\n        onUploadProgress: function (progressEvent) {\n          var percentCompleted = Math.round(\n            (progressEvent.loaded * 100) / progressEvent.total\n          );\n          dispatchUploadProgress({\n            amount: percentCompleted,\n            tempMsgId: messageForClientSide.tempMsgId,\n          });\n        },\n      };\n\n      /*\n        getting response promise which will be added to clientSide message\n        so that when response is received it can be used inside the message component\n        to update the message.\n      */\n      const mediaMessageResponse = axios.post(\n        \"/sendMediaMessage\",\n        formData,\n        config\n      );\n\n      mediaMessageResponse.then((response) => {\n        const messageId = response.data._id;\n        const recipientId = response.data.recipientId;\n        Socket.emit(\"gotMediaMessaageResponse\", messageId, recipientId);\n      });\n\n      messageForClientSide.mediaMessageResponse = mediaMessageResponse;\n\n      dispatchSendMessage(messageForClientSide);\n      updateMessages(messageForClientSide, recipient);\n\n      //reset states\n      setTextFieldValue(\"\");\n      setTyping(false);\n      setSelectedImages([]);\n      setSelectedVideos([]);\n      setSelectedFiles([]);\n    } else {\n      const message = new Message({\n        recipient,\n        text: textFieldValue,\n      });\n      setTextFieldValue(\"\");\n      setTyping(false);\n      updateMessages(message, recipient);\n      Socket.emit(\"send-message\", message);\n      dispatchSendMessage(message);\n    }\n  }\n\n  async function handleMediaInputChange(e) {\n    const [images, videos] = seperateImagesAndVideos(e.target.files);\n    if (!(images || videos)) {\n      setFileInputError(true);\n    } else {\n      setSelectedImages(images);\n      setSelectedVideos(videos);\n    }\n    e.target.value = \"\";\n  }\n\n  function handleFilesInputChange(e) {\n    setSelectedFiles([...e.target.files]);\n    e.target.value = \"\";\n  }\n\n  function removeSelectedImage(index) {\n    setSelectedImages((prevImages) => {\n      prevImages.splice(index, 1);\n      return [...prevImages];\n    });\n  }\n  function removeSelectedVideo(index) {\n    setSelectedVideos((prevVideos) => {\n      prevVideos.splice(index, 1);\n      return [...prevVideos];\n    });\n  }\n\n  function removeSelectedFile(index) {\n    setSelectedFiles((prevFiles) => {\n      prevFiles.splice(index, 1);\n      return [...prevFiles];\n    });\n  }\n\n  return (\n    <Box className={classes.root}>\n      {fileInputError && (\n        <Typography variant=\"body2\" color=\"error\" align=\"center\">\n          Invalid file selected!\n        </Typography>\n      )}\n      <Box className={classes.selectedItemsContainer}>\n        {(selectedImages.length > 0 || selectedVideos.length > 0) && (\n          <Box className={classes.selectedMediasContainer}>\n            {selectedImages.map((image, index) => {\n              return (\n                <SelectedMediasPreviewer\n                  media={image}\n                  key={index}\n                  removeSelectedMedia={removeSelectedImage}\n                  index={index}\n                />\n              );\n            })}\n            {selectedVideos.map((Video, index) => {\n              return (\n                <SelectedMediasPreviewer\n                  media={Video}\n                  key={index}\n                  removeSelectedMedia={removeSelectedVideo}\n                  index={index}\n                />\n              );\n            })}\n          </Box>\n        )}\n\n        {selectedFiles.length > 0 && (\n          <Box>\n            {selectedFiles.map((file, index) => {\n              return (\n                <SelectedFilesPreviewer\n                  file={file}\n                  key={index}\n                  removeSelectedFile={removeSelectedFile}\n                  index={index}\n                />\n              );\n            })}\n          </Box>\n        )}\n      </Box>\n\n      <form className={classes.form} onSubmit={sendMessage}>\n        <input\n          accept=\"image/*,video/*\"\n          style={{ display: \"none\" }}\n          id=\"image-btn\"\n          type=\"file\"\n          multiple\n          onChange={handleMediaInputChange}\n        />\n        <IconButton\n          variant=\"contained\"\n          component=\"label\"\n          htmlFor=\"image-btn\"\n          color=\"primary\"\n        >\n          <ImageRounded color=\"primary\" />\n        </IconButton>\n        <input\n          accept=\".pdf,.txt,.zip,.docx,.xml\"\n          style={{ display: \"none\" }}\n          id=\"attachment-btn\"\n          type=\"file\"\n          multiple\n          onChange={handleFilesInputChange}\n        />\n        <IconButton\n          variant=\"contained\"\n          component=\"label\"\n          htmlFor=\"attachment-btn\"\n          color=\"primary\"\n        >\n          <Attachment color=\"primary\" />\n        </IconButton>\n        <TextField\n          fullWidth\n          placeholder=\"Type something to send...\"\n          autoFocus\n          aria-label=\"message input box\"\n          value={textFieldValue}\n          onChange={handleTextFieldChange}\n        />\n        <IconButton type=\"submit\">\n          <Send color=\"primary\" />\n        </IconButton>\n      </form>\n    </Box>\n  );\n}\n\nconst useStyles_selectedMediaPreviewer = makeStyles({\n  previewContainer: {\n    position: \"relative\",\n    width: \"40px\",\n    height: \"40px\",\n    marginRight: \"0.8em\",\n    marginBottom: \"0.8em\",\n  },\n  selectedImage: {\n    width: \"100%\",\n    height: \"100%\",\n    objectFit: \"cover\",\n    borderRadius: \"20%\",\n  },\n  removeBtn: {\n    all: \"unset\",\n    position: \"absolute\",\n    top: \"-6px\",\n    right: \"-6px\",\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    height: \"18px\",\n    width: \"18px\",\n    textAlign: \"center\",\n    fontSize: \"12px\",\n    fontWeight: \"bold\",\n    backgroundColor: \"#00000088\",\n    borderRadius: \"50%\",\n    zIndex: \"100\",\n    \"&:hover\": {\n      transform: \"scale(1.1)\",\n    },\n    \"&:active\": {\n      transform: \"scale(1)\",\n    },\n  },\n  videoContainer: {\n    position: \"relative\",\n    width: \"40px\",\n    height: \"40px\",\n    marginRight: \"0.8em\",\n    marginBottom: \"0.8em\",\n    \"&>video\": {\n      height: \"100%\",\n      width: \"100%\",\n      objectFit: \"cover\",\n      borderRadius: \"20%\",\n    },\n    \"&::before\": {\n      content: \"''\",\n      backgroundImage: `url(${videoIconOverlay})`,\n      backgroundPosition: \"center\",\n      backgroundSize: \"contain\",\n      height: \"100%\",\n      width: \"100%\",\n      position: \"absolute\",\n      zIndex: \"50\",\n    },\n  },\n});\n\nfunction SelectedMediasPreviewer({ media, removeSelectedMedia, index }) {\n  const classes = useStyles_selectedMediaPreviewer();\n  const mediaObjectURL = URL.createObjectURL(media);\n\n  return (\n    <div className={classes.previewContainer}>\n      <button\n        className={classes.removeBtn}\n        onClick={() => {\n          URL.revokeObjectURL(mediaObjectURL);\n          removeSelectedMedia(index);\n        }}\n      >\n        <Close htmlColor=\"white\" fontSize=\"inherit\" />\n      </button>\n\n      {media.type.split(\"/\")[0] === \"image\" ? (\n        <img className={classes.selectedImage} src={mediaObjectURL} alt=\"img\" />\n      ) : (\n        <div className={classes.videoContainer}>\n          <video src={mediaObjectURL} />\n        </div>\n      )}\n    </div>\n  );\n}\n\nconst useStyles_selectedFilePreviewer = makeStyles({\n  selectedFilePreviewContainer: {\n    display: \"flex\",\n    alignItems: \"center\",\n    padding: \"1em\",\n  },\n  fileIcon: {\n    marginRight: \"0.3em\",\n  },\n  fileName: {\n    width: \"20vw\",\n  },\n  removeBtn: {\n    all: \"unset\",\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    height: \"18px\",\n    width: \"18px\",\n    margin: \"auto 0.5em\",\n    textAlign: \"center\",\n    fontSize: \"12px\",\n    fontWeight: \"bold\",\n    backgroundColor: \"#00000088\",\n    borderRadius: \"50%\",\n    \"&:hover\": {\n      transform: \"scale(1.1)\",\n    },\n    \"&:active\": {\n      transform: \"scale(1)\",\n    },\n  },\n});\n\nfunction SelectedFilesPreviewer({ file, removeSelectedFile, index }) {\n  const theme = useTheme();\n  const classes = useStyles_selectedFilePreviewer();\n  return (\n    <div className={classes.selectedFilePreviewContainer}>\n      <Description\n        className={classes.fileIcon}\n        htmlColor={theme.palette.primary.main}\n      />\n      <Typography className={classes.fileName} variant=\"body1\" noWrap>\n        {file.name}\n      </Typography>\n      <button\n        className={classes.removeBtn}\n        onClick={() => {\n          removeSelectedFile(index);\n        }}\n      >\n        <Close htmlColor=\"white\" fontSize=\"inherit\" />\n      </button>\n    </div>\n  );\n}\n\nexport default MessageInput;\n","export default \"data:image/png;base64,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\"","import { Box, makeStyles } from \"@material-ui/core\";\nimport React from \"react\";\n\nconst useStyles = makeStyles({\n  container: {\n    display: \"flex\",\n    width: \"fit-content\",\n    margin: \"1em\",\n    padding: \"0.5em\",\n    borderRadius: \"10px 10px 10px 0\",\n  },\n  dot: {\n    height: \"0.4em\",\n    width: \"0.4em\",\n    margin: \"0.2em\",\n    borderRadius: \"50%\",\n    backgroundColor: \"#00000055\",\n    \"&:nth-child(1)\": {\n      animation: \"$typing 600ms 200ms ease alternate backwards infinite\",\n    },\n    \"&:nth-child(2)\": {\n      animation: \"$typing 600ms 400ms ease alternate backwards infinite\",\n    },\n    \"&:nth-child(3)\": {\n      animation: \"$typing 600ms 600ms ease alternate backwards infinite\",\n    },\n  },\n  \"@keyframes typing\": {\n    from: {\n      opacity: \"0.3\",\n      transform: \"translateY(-50%) scale(1.1)\",\n    },\n    to: {\n      opacity: \"1\",\n    },\n  },\n});\n\nfunction TypingIndicator() {\n  const classes = useStyles();\n  return (\n    <Box className={classes.container} boxShadow={5}>\n      <div className={classes.dot}></div>\n      <div className={classes.dot}></div>\n      <div className={classes.dot}></div>\n    </Box>\n  );\n}\n\nexport default TypingIndicator;\n","import React, { useRef, useEffect, useContext, useState } from \"react\";\nimport { Box } from \"@material-ui/core\";\nimport Message from \"../ChatSection/Message\";\nimport SocketContext from \"../../../context/SocketContext\";\nimport MessageInput from \"./MessageInput\";\nimport axios from \"../../../api\";\nimport TypingIndicator from \"./TypingIndicator\";\n\nfunction MessagesContainer({ otherEndUser }) {\n  const messageContainer = useRef();\n\n  //contexts\n  const socket = useContext(SocketContext);\n  //states\n  const [messages, setMessages] = useState([]);\n  const [typing, setTyping] = useState({ state: \"\", user: \"\" });\n\n  function updateMessages(msg, otherSide) {\n    if (msg.from === otherSide || msg.recipient === otherSide) {\n      setMessages((prev) => {\n        return [...prev, msg];\n      });\n    }\n  }\n\n  async function getMessages(otherSide) {\n    if (!otherSide) return;\n    const res = await axios.get(`/messages/${otherSide}`);\n    const messages = res.data.messages;\n    messages &&\n      setMessages((prev) => {\n        return [...prev, ...messages];\n      });\n  }\n\n  function resetMessages() {\n    setMessages([]); //clear all messages\n  }\n\n  useEffect(() => {\n    //updateMessages wrapper\n    function addMessage(msg) {\n      updateMessages(msg, otherEndUser.username);\n    }\n\n    socket.on(\"receive-message\", addMessage); //this will receive msg and pass it into addMessage function\n\n    return () => {\n      socket.off(\"receive-message\", addMessage);\n    };\n  }, [socket, otherEndUser]);\n\n  useEffect(() => {\n    //scrolling to the buttom after the message is received.\n    messageContainer.current.scrollTo(0, messageContainer.current.scrollHeight);\n  }, [messages, typing]);\n\n  useEffect(() => {\n    otherEndUser && getMessages(otherEndUser.username);\n    socket.on(\"typing\", (state, user) => {\n      if (user === otherEndUser.username) {\n        setTyping({ state, user });\n      }\n    });\n\n    return () => {\n      socket.removeAllListeners(\"typing\");\n\n      resetMessages();\n    }; //clear all messages on unmount.\n  }, [otherEndUser, socket]);\n\n  return (\n    <>\n      <Box\n        ref={messageContainer}\n        style={{\n          overflowY: \"scroll\",\n        }}\n      >\n        {messages.map((msg, index) => {\n          return (\n            <Message\n              key={msg._id || msg.tempMsgId}\n              msg={msg}\n              prevMsgTimestamp={messages[index - 1]?.timestamp || 0}\n              otherEndUser={otherEndUser}\n            />\n          );\n        })}\n        {typing.state === \"start\" && typing.user === otherEndUser.username ? (\n          <TypingIndicator />\n        ) : null}\n      </Box>\n      <MessageInput updateMessages={updateMessages} />\n    </>\n  );\n}\n\nexport default MessagesContainer;\n","import { Box, Typography, useTheme } from \"@material-ui/core\";\nimport React, { useEffect, useState } from \"react\";\nimport Header from \"./Header\";\nimport MessagesContainer from \"./MessagesContainer\";\nimport { useParams } from \"react-router\";\nimport axios from \"../../../api\";\n\nfunction ChatSection() {\n  const theme = useTheme();\n  const { username } = useParams();\n  const [userInfo, setUserInfo] = useState({});\n\n  useEffect(() => {\n    if (username) {\n      (async () => {\n        const res = await axios.get(`userinfo/${username}`);\n        setUserInfo(res.data);\n      })();\n    }\n  }, [username]);\n\n  if (!username) {\n    return (\n      <Box\n        display=\"flex\"\n        flexGrow=\"1\"\n        justifyContent=\"center\"\n        alignItems=\"center\"\n      >\n        <Typography variant=\"h6\" align=\"center\" color=\"textSecondary\">\n          Open Chat To Start Messenging.\n        </Typography>\n      </Box>\n    );\n  }\n  return (\n    <Box\n      width={1}\n      style={{ height: \"100vh\" }}\n      display=\"flex\"\n      flexDirection=\"column\"\n      position=\"relative\"\n      bgcolor={theme.palette.background.default}\n    >\n      <Header userInfo={userInfo} />\n      <MessagesContainer otherEndUser={userInfo} />\n    </Box>\n  );\n}\n\nexport default ChatSection;\n","import React, { useState } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport {\n  Box,\n  CircularProgress,\n  IconButton,\n  makeStyles,\n  Typography,\n} from \"@material-ui/core\";\nimport { PowerSettingsNew } from \"@material-ui/icons\";\nimport axios from \"../../../api\";\n\nconst useStyles = makeStyles({\n  logoutText: {\n    fontSize: \"0.9rem\",\n    fontWeight: \"bold\",\n  },\n});\n\nfunction LogoutButton() {\n  const classes = useStyles();\n  const [loggedIn, setLoggedIn] = useState(true);\n  const [loggingOut, setLoggingOut] = useState(false);\n\n  async function logout(type) {\n    try {\n      setLoggingOut(true);\n      const res = await axios.delete(\"/logout\", {\n        headers: { LogoutType: type },\n      });\n      if (res.status === 200) {\n        window.localStorage.clear();\n        console.log(\"cleared the localStorage\");\n        setLoggedIn(false);\n      }\n    } catch (err) {\n      setLoggingOut(false);\n    }\n  }\n\n  if (!loggedIn) {\n    return (\n      <Redirect\n        to={{\n          pathname: \"/login\",\n          state: {\n            alert: { type: \"success\", message: \"Succesfully LoggedOut!\" },\n          },\n        }}\n      />\n    );\n  }\n  return (\n    <>\n      <Box display=\"flex\" alignItems=\"center\">\n        <Typography className={classes.logoutText} color=\"textSecondary\">\n          Logout\n        </Typography>\n        <IconButton onClick={logout} size=\"small\" aria-label=\"logout\">\n          {loggingOut ? <CircularProgress size=\"1em\" /> : <PowerSettingsNew />}\n        </IconButton>\n      </Box>\n    </>\n  );\n}\n\nexport default LogoutButton;\n","import React from \"react\";\nimport { Box, Avatar, Typography, makeStyles } from \"@material-ui/core\";\nimport { useContext } from \"react\";\nimport LoggedInUserContext from \"../../../context/LoggedInUserContext\";\n\nconst useStyles = makeStyles({\n  username: {\n    fontWeight: \"bolder\",\n    marginLeft: \"0.5em\",\n  },\n  userAvatar: {\n    \"&:hover\": {\n      cursor: \"pointer\",\n    },\n  },\n});\n\nfunction UserWithAvatar({ setShowChangeProfilePicture }) {\n  const classes = useStyles();\n  const { LoggedInUser } = useContext(LoggedInUserContext);\n  return (\n    <Box display=\"flex\" alignItems=\"center\">\n      <Avatar\n        onClick={() => {\n          setShowChangeProfilePicture(true);\n        }}\n        className={classes.userAvatar}\n        alt={LoggedInUser.username}\n        src={LoggedInUser.profilePic}\n      />\n      <Typography className={classes.username} variant=\"h6\" color=\"textPrimary\">\n        {LoggedInUser.firstName} {LoggedInUser.lastName}\n      </Typography>\n    </Box>\n  );\n}\n\nexport default UserWithAvatar;\n","import {\n  Avatar,\n  Box,\n  Button,\n  ButtonBase,\n  IconButton,\n  makeStyles,\n  Popover,\n  Typography,\n  withStyles,\n} from \"@material-ui/core\";\nimport { blue } from \"@material-ui/core/colors\";\nimport { Clear, Done, PersonAdd } from \"@material-ui/icons\";\nimport axios from \"../../../api\";\nimport React, { useContext, useEffect, useState } from \"react\";\nimport { StyledBadge } from \"./Conversation\";\nimport { useHistory } from \"react-router-dom\";\nimport SocketContext from \"../../../context/SocketContext\";\nimport { useTheme } from \"@material-ui/styles\";\n\nconst useStyles = makeStyles({\n  button: {\n    display: \"flex\",\n    padding: \"1em\",\n    alignItems: \"center\",\n  },\n});\n\nconst styles = (theme) => ({\n  buttonRipple: {\n    color: theme.palette.primary.main,\n  },\n  main: {\n    padding: \"0.5em\",\n    width: \"100%\",\n    justifyContent: \"start\",\n    \"&:hover\": {\n      transform: \"scale(1.01)\",\n      boxShadow: \"rgb(145 158 171 / 24%) 0px 5px 16px 0px\",\n    },\n  },\n});\n\nconst StyledButton = withStyles(styles)((props) => (\n  <ButtonBase\n    onClick={props.onClick}\n    className={props.classes.main}\n    TouchRippleProps={{ classes: { root: props.classes.buttonRipple } }}\n    component=\"div\"\n  >\n    {props.children}\n  </ButtonBase>\n));\n\nfunction MutualFriendInformation({ person }) {\n  const theme = useTheme();\n  let info = \"\";\n  switch (true) {\n    case person.mutualFriends.length === 0:\n      return null;\n    case person.mutualFriends.length === 1:\n      info = `${person.mutualFriends[0]} is mutual`;\n      break;\n    case person.mutualFriends.length === 2:\n      info = `${person.mutualFriends[0]} and ${person.mutualFriends[1]} are mutual`;\n      break;\n    default:\n      info = `${person.mutualFriends.length} mutual friends including ${person.mutualFriends[0]} and ${person.mutualFriends[1]}`;\n      break;\n  }\n\n  return (\n    <Typography variant=\"body2\" style={{ color: theme.palette.grey[700] }}>\n      {info}\n    </Typography>\n  );\n}\n\nfunction People({ person, type, update }) {\n  const history = useHistory();\n  const classes = useStyles();\n\n  //context\n  const socket = useContext(SocketContext);\n\n  //states\n  const [online, setOnline] = useState(person.online);\n\n  useEffect(() => {\n    //updateOnlineState\n    function updateOnlineState(username, state) {\n      username === person?.username && setOnline(state);\n    }\n\n    socket.on(\"onlineStateChange\", updateOnlineState);\n    return () => {\n      socket.off(\"onlineStateChange\", updateOnlineState);\n    };\n  }, [socket, person]);\n\n  //open messages\n  function openMessages() {\n    if (type===\"friend\") return history.push(`/messenger/${person.username}`);\n  }\n\n  //send FriendRequest\n  async function sendFriendRequest() {\n    try {\n      await axios.post(\"/friendrequest\", {\n        username: person.username,\n        type: \"send\",\n      });\n      update();\n    } catch (err) {\n      console.log(err);\n    }\n  }\n\n  //accept FriendRequest\n  async function acceptFriendRequest() {\n    try {\n      await axios.post(\"/friendrequest\", {\n        username: person.username,\n        type: \"accept\",\n      });\n      update();\n    } catch (err) {\n      console.log(err);\n    }\n  }\n\n  //reject FriendRequest\n  async function rejectFriendRequest() {\n    try {\n      await axios.post(\"/friendrequest\", {\n        username: person.username,\n        type: \"reject\",\n      });\n      update();\n    } catch (err) {\n      console.log(err);\n    }\n  }\n\n  //cancel FriendRequest\n  async function cancelFriendRequest() {\n    try {\n      await axios.post(\"/friendrequest\", {\n        username: person.username,\n        type: \"cancel\",\n      });\n      update();\n    } catch (err) {\n      console.log(err);\n    }\n  }\n\n  //unFriend\n  async function unFriend() {\n    try {\n      await axios.post(\"/friendrequest\", {\n        username: person.username,\n        type: \"unfriend\",\n      });\n      update();\n    } catch (err) {\n      console.log(err);\n    }\n  }\n\n  //button for friend type\n  function FriendUnFriendBtn({ unFriend }) {\n    const theme = useTheme();\n    const [anchorEl, setAnchorEl] = React.useState(null);\n\n    const handleClick = (event) => {\n      setAnchorEl(event.currentTarget);\n    };\n\n    const handleClose = () => {\n      setAnchorEl(null);\n    };\n\n    const open = Boolean(anchorEl);\n    const id = open ? \"unfriend\" : undefined;\n\n    return (\n      <>\n        <Button\n          aria-describedby={id}\n          variant=\"outlined\"\n          color=\"primary\"\n          onClick={handleClick}\n          style={{ marginLeft: \"auto\", textTransform: \"capitalize\" }}\n        >\n          Friends\n        </Button>\n        <Popover\n          id={id}\n          open={open}\n          anchorEl={anchorEl}\n          onClose={handleClose}\n          anchorOrigin={{\n            vertical: \"bottom\",\n            horizontal: \"center\",\n          }}\n          transformOrigin={{\n            vertical: \"top\",\n            horizontal: \"center\",\n          }}\n        >\n          <Button\n            variant=\"outlined\"\n            onClick={unFriend}\n            style={{\n              marginLeft: \"auto\",\n              textTransform: \"capitalize\",\n              color: theme.palette.grey[700],\n            }}\n          >\n            Unfriend\n          </Button>\n        </Popover>\n      </>\n    );\n  }\n\n  function getButton(type) {\n    switch (type) {\n      case \"friendRequest\": \n        return (\n          <Box ml=\"auto\" display=\"flex\">\n            {/* accept Button */}\n            <IconButton onClick={acceptFriendRequest}>\n              <Done htmlColor={blue[600]} />\n            </IconButton>\n\n            {/* reject Button */}\n            <IconButton onClick={rejectFriendRequest}>\n              <Clear color=\"error\" />\n            </IconButton>\n          </Box>\n        );\n      case \"unknown\": //not friend\n        return (\n          // add friend button\n          <IconButton\n            onClick={sendFriendRequest}\n            style={{ marginLeft: \"auto\" }}\n          >\n            <PersonAdd />\n          </IconButton>\n        );\n      case \"pendingRequest\":\n        return (\n          // cancle request button\n          <Button\n            variant=\"outlined\"\n            color=\"primary\"\n            onClick={cancelFriendRequest}\n            style={{ marginLeft: \"auto\", textTransform: \"capitalize\" }}\n          >\n            Cancel\n          </Button>\n        );\n      case \"friend\":\n        return <FriendUnFriendBtn unFriend={unFriend} />;\n      default:\n        return null;\n    }\n  }\n\n  return (\n    <StyledButton\n      onClick={openMessages}\n      className={classes.button}\n      component=\"div\"\n    >\n      <StyledBadge\n        variant=\"dot\"\n        overlap=\"circle\"\n        anchorOrigin={{ vertical: \"bottom\", horizontal: \"right\" }}\n        badgeContent=\" \"\n        isonline={online ? 1 : 0}\n      >\n        <Avatar alt={person.firstName} src={person.profilePic} />\n      </StyledBadge>\n      <Box ml={2}>\n        <Typography\n          variant=\"h6\"\n          style={{ fontSize: \"1rem\" }}\n          color=\"textPrimary\"\n        >\n          {person.firstName} {person.lastName}\n        </Typography>\n        {/* mutual friends information*/}\n        {type ? <MutualFriendInformation person={person} /> : null}\n      </Box>\n      {getButton(type)}\n    </StyledButton>\n  );\n}\n\nexport default People;\n","import axios from \"../../../api\";\nimport React, { useState, useEffect } from \"react\";\nimport { Box, Typography } from \"@material-ui/core\";\nimport People from \"./People\";\n\nfunction FriendList() {\n  const [friendList, setFriendList] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  async function update() {\n    const res = await axios.get(\"/friendlist\");\n    setFriendList(res.data);\n    setLoading(false);\n  }\n\n  useEffect(() => {\n    update();\n  }, []);\n\n  return (\n    <div\n      style={{\n        width: \"100%\",\n        overflowY: \"scroll\",\n        overflowX: \"hidden\",\n      }}\n    >\n      {!loading && friendList.length === 0 && (\n        <Box p={5}>\n          <Typography variant=\"body1\" align=\"center\" color=\"textSecondary\">\n            You Have No Friends. Make Some to Start Messenging.\n          </Typography>\n        </Box>\n      )}\n      {!loading &&\n        friendList.length !== 0 &&\n        friendList.map((person) => {\n          return (\n            <People\n              key={person._id}\n              person={person}\n              type=\"friend\"\n              update={update}\n            />\n          );\n        })}\n    </div>\n  );\n}\n\nexport default FriendList;\n","import React, { useEffect, useState } from \"react\";\nimport axios from \"../../../../api\";\nimport { Box, Typography } from \"@material-ui/core\";\nimport People from \"../People\";\nimport { PersonAdd } from \"@material-ui/icons\";\n\nfunction FriendRequests({ update, changed }) {\n  const [friendRequests, setFriendRequests] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    (async () => {\n      const res = await axios.get(\"/friendRequest\");\n      setFriendRequests(res.data);\n      setLoading(false);\n    })();\n  }, [changed]);\n\n  return (\n    <Box my=\"1em\" >\n      <Typography variant=\"h6\" align=\"center\" color=\"primary\">\n        <PersonAdd style={{ marginRight: \"0.5em\" }} />\n        Friend Requests\n      </Typography>\n      {!loading && friendRequests.length === 0 && (\n        <Box px={5}>\n          <Typography variant=\"body1\" align=\"center\" color=\"textSecondary\">\n            When you have friend requests or suggestions, you'll see them here.\n          </Typography>\n        </Box>\n      )}\n      {!loading &&\n        friendRequests.length !== 0 &&\n        friendRequests.map((Requester) => {\n          return (\n            <People\n              key={Requester._id}\n              person={Requester}\n              type=\"friendRequest\"\n              update={update}\n            />\n          );\n        })}\n    </Box>\n  );\n}\n\nexport default FriendRequests;\n","import React, { useEffect } from \"react\";\nimport axios from \"../../../../api\";\nimport { Box, Typography } from \"@material-ui/core\";\nimport People from \"../People\";\nimport { useState } from \"react\";\nimport { HourglassEmptyOutlined } from \"@material-ui/icons\";\n\nfunction PendingFriendRequests({update,changed}) {\n  const [pendingFriendRequests, setPendingFriendRequests] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    (async () => {\n      const res = await axios.get(\"/friendRequest/pending\");\n      setPendingFriendRequests(res.data);\n            setLoading(false);\n\n    })();\n  }, [changed]);\n\n  return (\n    <Box my=\"1em\">\n      <Typography variant=\"h6\" align=\"center\" color=\"primary\">\n        <HourglassEmptyOutlined />\n        Pending Friend Requests\n      </Typography>\n      {!loading && pendingFriendRequests.length === 0 && (\n        <Box px={5}>\n          <Typography variant=\"body1\" align=\"center\" color=\"textSecondary\">\n            When you have pending friend requests, you'll see them here.\n          </Typography>\n        </Box>\n      )}\n      {!loading &&\n        pendingFriendRequests.length !== 0 &&\n        pendingFriendRequests.map((Requested) => {\n          return (\n            <People\n              key={Requested._id}\n              person={Requested}\n              type=\"pendingRequest\"\n              update={update}\n            />\n          );\n        })}\n    </Box>\n  );\n}\n\nexport default PendingFriendRequests;\n","import { Box, Typography } from \"@material-ui/core\";\nimport { EmojiPeople } from \"@material-ui/icons\";\nimport React, { useEffect, useState } from \"react\";\nimport axios from \"../../../../api\";\nimport People from \"../People\";\n\nfunction PeopleYouMayKnow({ update, changed }) {\n  const [peopleYouMayKnow, setPeopleYouMayKnow] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    (async () => {\n      const res = await axios.get(\"/peopleyoumayknow\");\n      setPeopleYouMayKnow(res.data);\n      setLoading(false);\n    })();\n  }, [changed]);\n\n  return (\n    <Box mt=\"1em\">\n      <Typography variant=\"h6\" align=\"center\" color=\"primary\">\n        <EmojiPeople />\n        People You May Know\n      </Typography>\n      {!loading && peopleYouMayKnow.length === 0 && (\n        <Box px={5}>\n          <Typography variant=\"body1\" align=\"center\" color=\"textSecondary\">\n            When you have friend's suggestions, you'll see them here.\n          </Typography>\n        </Box>\n      )}\n      {!loading &&\n        peopleYouMayKnow.length !== 0 &&\n        peopleYouMayKnow.map((Person) => {\n          return (\n            <People\n              key={Person._id}\n              person={Person}\n              type=\"unknown\"\n              update={update}\n            />\n          );\n        })}\n    </Box>\n  );\n}\n\nexport default PeopleYouMayKnow;\n","import { Divider } from \"@material-ui/core\";\nimport React, { useState } from \"react\";\nimport FriendRequests from \"./FriendRequests\";\nimport PendingFriendRequests from \"./PendingFriendRequests\";\nimport PeopleYouMayKnow from \"./PeopleYouMayKnow\";\n\nfunction FindFriends() {\n  const [changed, setChanged] = useState();\n\n  function update() {\n    setChanged(Math.random());\n  }\n  return (\n    <div\n      style={{\n        width: \"100%\",\n        overflowY: \"scroll\",\n        overflowX: \"hidden\",\n      }}\n    >\n      <FriendRequests changed={changed} update={update} />\n      <Divider variant=\"middle\" />\n      <PendingFriendRequests changed={changed} update={update} />\n      <Divider variant=\"middle\" />\n      <PeopleYouMayKnow changed={changed} update={update} />\n    </div>\n  );\n}\n\nexport default FindFriends;\n","import React, { useContext, useEffect, useState } from \"react\";\nimport axios from \"../../../api\";\nimport axiosMain from \"axios\";\nimport Conversation from \"./Conversation\";\nimport SocketContext from \"../../../context/SocketContext\";\n\nasync function getConversations(source) {\n  const res = await axios.get(`/conversations`, {\n    cancelToken: source?.token,\n  });\n  return res.data;\n}\n\nfunction ConversationsContainer() {\n  //contexts\n  const socket = useContext(SocketContext);\n\n  //states\n  const [conversations, setConversations] = useState([]);\n\n  function onMessageSend(listener) {\n    document.addEventListener(\"sendMessage\", listener);\n  }\n  function offMessageSend(listener) {\n    document.removeEventListener(\"sendMessage\", listener);\n  }\n\n  function moveRecentConversationToTop(msg) {\n    const message = msg.detail ? msg.detail : msg;\n\n    setConversations((prevConversations) => {\n      if (prevConversations.length === 0) {\n        getConversations().then((conversations) => {\n          setConversations(conversations);\n        });\n        return [];\n      }\n      const index = prevConversations.findIndex((conversation) => {\n        if (conversation?.with === message.recipient) {\n          return true;\n        }\n        return false;\n      });\n      const recentConversation = prevConversations.splice(index, 1)[0];\n      prevConversations.splice(0, 0, recentConversation);\n      return [...prevConversations];\n    });\n  }\n\n  useEffect(() => {\n    const CancelToken = axiosMain.CancelToken; //axiosMain is axios\n    const source = CancelToken.source();\n\n    getConversations(source).then((conversations) => {\n      setConversations(conversations);\n    });\n\n    onMessageSend(moveRecentConversationToTop);\n\n    socket.on(\"receive-message\", moveRecentConversationToTop);\n\n    return () => {\n      // Cancel request\n      source.cancel();\n      offMessageSend(moveRecentConversationToTop);\n      socket.off(\"receive-message\", moveRecentConversationToTop);\n    };\n  }, [socket]);\n\n  return (\n    <div\n      style={{\n        width: \"100%\",\n        height: \"100%\",\n        marginTop: \"0.5em\",\n        overflowY: \"scroll\",\n        overflowX: \"hidden\",\n      }}\n    >\n      {conversations.map((conversation) => (\n        <Conversation\n          key={conversation._id}\n          lastMessage={\n            conversation.messages.length &&\n            conversation.messages[conversation.messages.length - 1]\n          }\n          conversationWith={conversation.with}\n        />\n      ))}\n    </div>\n  );\n}\n\nexport default ConversationsContainer;\n","import { makeStyles, Tab, Tabs, Box } from \"@material-ui/core\";\nimport { Chat, GroupAdd, People } from \"@material-ui/icons\";\nimport React, { createContext, useState } from \"react\";\nimport FriendList from \"./FriendList\";\nimport FindFriends from \"./FindFriends/index\";\nimport ConversationsContainer from \"./ConversationsContainer\";\n\n//creating the contexts\nconst FriendListContext = createContext();\nconst MessagesContext = createContext();\nconst FriendRequestsContext = createContext();\nconst PendingFriendRequestsContext = createContext();\nconst PeopleYouMayKnowContext = createContext();\n\nconst useStyles = makeStyles({\n  tab: {\n    width: `${(1 / 3) * 100}%`,\n    \"@media (min-width: 600px)\": {\n      minWidth: \"60px\",\n    },\n  },\n});\n\nfunction SelectionMenu() {\n  const classes = useStyles();\n  const [index, setIndex] = useState(0);\n\n\n  const handleChange = (event, newIndex) => {\n    setIndex(newIndex);\n  };\n  return (\n    <>\n      <Box mt={2} boxShadow=\"rgb(145 158 171 / 24%) 0px 3px 8px 0px\" >\n        <Tabs\n          value={index}\n          onChange={handleChange}\n          variant=\"fullWidth\"\n          indicatorColor=\"primary\"\n          textColor=\"primary\"\n          aria-label=\"icon tabs example\"\n        >\n          <Tab className={classes.tab} icon={<Chat />} aria-label=\"phone\" />\n          <Tab\n            className={classes.tab}\n            icon={<People />}\n            aria-label=\"favorite\"\n          />\n          <Tab\n            className={classes.tab}\n            icon={<GroupAdd />}\n            aria-label=\"person\"\n          />\n        </Tabs>\n      </Box>\n      <TabPanel\n        components={[\n          <ConversationsContainer />,\n          <FriendList />,\n          <FindFriends />,\n        ]}\n        index={index}\n      />\n    </>\n  );\n}\n\nfunction TabPanel({ components, index }) {\n  return components[index];\n}\n\nexport default SelectionMenu;\nexport {\n  MessagesContext,\n  FriendListContext,\n  FriendRequestsContext,\n  PendingFriendRequestsContext,\n  PeopleYouMayKnowContext,\n};\n","import { Box, makeStyles, Typography, useTheme } from \"@material-ui/core\";\nimport React, { useEffect, useRef, useState } from \"react\";\nimport axios from \"../../../../api\";\nimport axiosMain from \"axios\";\nimport People from \"../People\";\n\nconst useStyles = makeStyles((theme) => ({\n  searchResultsContainer: {\n    position: \"absolute\",\n    overflowY: \"scroll\",\n    maxHeight: \"50vh\",\n    width: \"calc(100% - 2em)\",\n    margin: \"0 1em\",\n    left: \"0\",\n    padding: \"0.5em 0.2em 0.5em 0.5em\",\n    backgroundColor: theme.palette.background.paper,\n    borderRadius: \"0 0 10px 10px\",\n    zIndex: \"1000\",\n    boxShadow: \"rgb(145 158 171 / 10%) 0px 2px 5px 3px\",\n  },\n}));\n\nfunction SearchResults({ searchText }) {\n  const theme = useTheme();\n  const classes = useStyles();\n  const [searchResults, setSearchResults] = useState([]);\n  const [changed, setChanged] = useState();\n  const searchResultsContainer = useRef();\n\n  function update() {\n    setChanged(Math.random());\n  }\n\n  useEffect(() => {\n    const cancelTokenSource = axiosMain.CancelToken.source();\n\n    async function getSearchResults(searchTerm) {\n      const res = await axios.get(`/search?search_term=${searchTerm}`, {\n        cancelToken: cancelTokenSource.token,\n      });\n      return res.data;\n    }\n\n    if (searchText) {\n      getSearchResults(searchText).then((results) => {\n        setSearchResults(results);\n      });\n    }\n\n    return () => {\n      cancelTokenSource.cancel();\n    };\n  }, [changed, searchText]);\n\n  return (\n    <Box\n      className={classes.searchResultsContainer}\n      ref={searchResultsContainer}\n    >\n      {searchText && !searchResults.length ? (\n        <Typography\n          style={{ margin: \"0.5em\" }}\n          align=\"center\"\n          color=\"textSecondary\"\n        >\n          No Results Found!\n        </Typography>\n      ) : null}\n\n      {/* friends */}\n      {searchResults?.map((person) => {\n        if (person.isFriend) {\n          return (\n            <People\n              key={person._id}\n              person={person}\n              type=\"friend\"\n              update={update}\n            />\n          );\n        }\n        return null;\n      })}\n\n      {/* more People (unknown persons) */}\n      {searchResults.some((person) => {\n        return !person.isFriend;\n      }) ? (\n        <>\n          <Typography\n            variant=\"body1\"\n            style={{\n              fontWeight: \"bold\",\n              margin: \"0.4em 0\",\n              marginLeft: \"0.8em\",\n              color: theme.palette.primary.main,\n            }}\n          >\n            More People\n          </Typography>\n          {searchResults?.map((person) => {\n            if (person.isRequestPending)\n              return (\n                <People\n                  key={person._id}\n                  type=\"pendingRequest\"\n                  person={person}\n                  update={update}\n                />\n              );\n            if (person.hasSentFriendRequest)\n              return (\n                <People\n                  key={person._id}\n                  type=\"friendRequest\"\n                  person={person}\n                  update={update}\n                />\n              );\n            if (!person.isFriend) {\n              return (\n                <People\n                  key={person._id}\n                  type=\"unknown\"\n                  person={person}\n                  update={update}\n                />\n              );\n            }\n            return null;\n          })}\n        </>\n      ) : null}\n    </Box>\n  );\n}\n\nexport default SearchResults;\n","import React, { useEffect, useRef, useState } from \"react\";\nimport { Box, IconButton, makeStyles } from \"@material-ui/core\";\nimport SearchResults from \"./SearchResults\";\nimport { Search } from \"@material-ui/icons\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    margin: \"1em\",\n  },\n  searchForm: {\n    display: \"flex\",\n    paddingLeft: \"1em\",\n    width: \"100%\",\n  },\n  searchInput: {\n    color: theme.palette.text.primary,\n    fontSize: \"1rem\",\n    background: \"transparent\",\n    outline: \"none\",\n    border: \"none\",\n    width: \"100%\",\n    \"&::placeholder\": {\n      color: theme.palette.text.secondary,\n      fontSize: \"1rem\",\n    },\n  },\n}));\n\nfunction SearchBox() {\n  const classes = useStyles();\n  const [searchText, setSearchText] = useState();\n  const [showSearchResults, setShowSearchResults] = useState(false);\n  //refs\n  const searchBoxRef = useRef();\n\n  function handleChange(e) {\n    setSearchText(e.target.value);\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    searchText && setShowSearchResults(true);\n  }\n\n  function handleClickOutside(e) {\n    if (searchBoxRef.current && !searchBoxRef.current.contains(e.target))\n      setShowSearchResults(false);\n  }\n\n  useEffect(() => {\n    searchText ? setShowSearchResults(true) : setShowSearchResults(false);\n  }, [searchText]);\n\n  useEffect(() => {\n    document.addEventListener(\"click\", handleClickOutside);\n    return () => {\n      document.removeEventListener(\"click\", handleClickOutside);\n    };\n  }, []);\n\n  return (\n    <>\n      <Box\n        className={classes.root}\n        borderRadius=\"5px\"\n        boxShadow=\"rgb(145 158 171 / 10%) 0px 2px 5px 3px\"\n        tabIndex=\"-1\"\n        onFocus={() => {\n          searchText && !showSearchResults && setShowSearchResults(true);\n        }}\n        ref={searchBoxRef}\n      >\n        <form className={classes.searchForm} onSubmit={handleSubmit}>\n          <input\n            className={classes.searchInput}\n            placeholder=\"Search...\"\n            value={searchText}\n            onFocus={() => {\n              searchText && setShowSearchResults(true);\n            }}\n            onChange={(e) => {\n              handleChange(e);\n            }}\n          />\n          <IconButton type=\"submit\">\n            <Search />\n          </IconButton>\n        </form>\n        {showSearchResults ? <SearchResults searchText={searchText} /> : null}\n      </Box>\n    </>\n  );\n}\n\nexport default SearchBox;\n","import React from \"react\";\nimport { Box, makeStyles } from \"@material-ui/core\";\nimport LogoutButton from \"./LogoutButton\";\nimport UserWithAvatar from \"./UserWithAvatar\";\nimport SelectionMenu from \"./SelectionMenu\";\nimport SearchBox from \"./SearchBox/index.jsx\";\nimport { useTheme } from \"@material-ui/styles\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    position: \"relative\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    maxWidth: \"400px\",\n    minWidth: \"400px\",\n    height: \"100vh\",\n    [theme.breakpoints.down(\"sm\")]: {\n      minWidth: \"100%\",\n    },\n  },\n}));\n\nfunction SideNavigation({ setShowChangeProfilePicture }) {\n  const theme = useTheme();\n  const classes = useStyles();\n  return (\n    <Box\n      className={classes.root}\n      borderRight={`2px solid ${theme.palette.grey[200]}`}\n    >\n      <Box\n        px={2}\n        py={3}\n        display=\"flex\"\n        alignItems=\"center\"\n        justifyContent=\"space-between\"\n      >\n        <UserWithAvatar\n          setShowChangeProfilePicture={setShowChangeProfilePicture}\n        />\n        <LogoutButton />\n      </Box>\n      <SearchBox />\n      <SelectionMenu />\n    </Box>\n  );\n}\n\nexport default SideNavigation;\n","import {\n  Avatar,\n  Box,\n  Button,\n  CircularProgress,\n  makeStyles,\n  Modal,\n  Typography,\n} from \"@material-ui/core\";\nimport { Image, Publish } from \"@material-ui/icons\";\nimport React, { useContext, useState } from \"react\";\nimport axios from \"../../api\";\nimport Alert from \"../Utils/Alert\";\nimport LoggedInUserContext from \"../../context/LoggedInUserContext\";\n\nconst useStyles = makeStyles((theme) => ({\n  modal: {\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n  },\n  modal__content: {\n    height: \"600px\",\n    width: \"400px\",\n    borderRadius: \"10px\",\n    backgroundColor: theme.palette.background.paper,\n    boxShadow: theme.shadows[5],\n    outline: \"none\",\n  },\n  avatar: {\n    margin: \"1em 0\",\n    height: \"170px\",\n    width: \"170px\",\n  },\n  btnsContainer: {\n    margin: \"1.5em 0\",\n  },\n  greetingText: {\n    marginTop: \"0.3em\",\n  },\n  infoText: {\n    fontSize: \"1.2rem\",\n  },\n  fullNameText: {\n    marginTop: \"1.5em\",\n    fontSize: \"1.8rem\",\n    fontWeight: \"bold\",\n    color: \"#2e2e2e\",\n  },\n  usernameText: {\n    marginTop: \"0.3em\",\n    marginBottom: \"0.8em\",\n    fontSize: \"1.4rem\",\n    fontWeight: \"500\",\n    color: \"#2e2e2e\",\n  },\n  btn: {\n    margin: \"0.5em 0\",\n    padding: \"0.5em\",\n    width: \"75%\",\n    \"&:last-child\": {\n      margin: \"3em 0\",\n    },\n  },\n}));\n\nfunction ChangeProfilePicture({ greeting, setShowChangeProfilePicture }) {\n  const classes = useStyles();\n  const { LoggedInUser, setLoggedInUser } = useContext(LoggedInUserContext);\n\n  //states\n  const [profilePicture, setProfilePicture] = useState(LoggedInUser.profilePic);\n  const [selectedImage, setSelectedImage] = useState();\n  const [open, setOpen] = useState(true);\n  const [uploading, setUploading] = useState(false);\n  const [alert, setAlert] = useState();\n\n  const showProfilePicture = (e) => {\n    const reader = new FileReader();\n    e.target.files[0] && reader.readAsDataURL(e.target.files[0]); //This reads the file as urlencoded base64 string.\n    reader.addEventListener(\"load\", () => {\n      setSelectedImage(reader.result);\n      setProfilePicture(reader.result);\n    });\n  };\n\n  async function uploadProfilePicture() {\n    if (selectedImage) {\n      try {\n        setUploading(true); //start the loading spinner\n        const res = await axios.post(\"/uploadprofilepic\", {\n          data: profilePicture,\n        });\n        setUploading(false); //stop the loading spinner\n        setAlert({\n          type: \"success\",\n          message: res.data.message,\n        });\n\n        //update the profilePic property of the LoggedInUserContext\n        setLoggedInUser((prev) => {\n          const userInfo = { ...prev };\n          userInfo.profilePic = res.data.profilePicURL;\n          return userInfo;\n        });\n        /*\n          alert completes at 2000 so waiting for alert to hide before closing/unmounting the modal.\n          After 2000ms the showAlert state is set to false. So if the modal is closed/unmounted\n          before the 2000ms, setState will be called after it. So error will occur \n          trying to setState of the component after unmount.\n        */\n        setTimeout(handleClose, 2100);\n      } catch (err) {\n        setAlert({\n          type: \"error\",\n          message: err.response?.data.message || err.message,\n        });\n        setUploading(false);\n      }\n    } else {\n      setAlert({ type: \"warning\", message: \"select image first\" });\n    }\n  }\n\n  function handleClose() {\n    setOpen(false);\n    setShowChangeProfilePicture && setShowChangeProfilePicture(false);\n  }\n\n  return (\n    <>\n      <Modal className={classes.modal} open={open}>\n        <Box\n          display=\"flex\"\n          flexDirection=\"column\"\n          alignItems=\"center\"\n          className={classes.modal__content}\n        >\n          {alert ? <Alert type={alert.type}>{alert.message}</Alert> : null}\n          <Typography\n            className={classes.fullNameText}\n            variant=\"h5\"\n            align=\"center\"\n          >\n            {LoggedInUser.firstName} {LoggedInUser.lastName}\n          </Typography>\n          <Typography\n            className={classes.usernameText}\n            variant=\"h6\"\n            align=\"center\"\n          >\n            @{LoggedInUser.username}\n          </Typography>\n          <Typography\n            className={`${classes.txtWhite} ${classes.infoText}`}\n            align=\"center\"\n          >\n            {greeting ? (\n              <>\n                Welcome to Messenger.\n                <br />\n                Set your Profile Picture to continue.\n              </>\n            ) : null}\n          </Typography>\n          <Avatar\n            className={classes.avatar}\n            src={profilePicture}\n            alt=\"avatar\"\n          />\n\n          {uploading ? <CircularProgress size=\"2rem\" /> : null}\n\n          {/* Image upload Input */}\n          <Box\n            display=\"flex\"\n            flexDirection=\"column\"\n            alignItems=\"center\"\n            width={1}\n            mt=\"auto\"\n            mb=\"2em\"\n          >\n            <input\n              accept=\"image/*\"\n              style={{ display: \"none\" }}\n              id=\"raised-button-file\"\n              type=\"file\"\n              onChange={showProfilePicture}\n            />\n\n            <Button\n              className={classes.btn}\n              variant=\"contained\"\n              component=\"label\"\n              htmlFor=\"raised-button-file\"\n              color=\"primary\"\n              endIcon={<Image />}\n            >\n              Choose\n            </Button>\n            <Button\n              className={classes.btn}\n              onClick={uploadProfilePicture}\n              variant=\"contained\"\n              component=\"span\"\n              color=\"primary\"\n              endIcon={<Publish />}\n            >\n              Upload\n            </Button>\n\n            {/* skip/close button */}\n            <Button\n              className={classes.btn}\n              variant=\"contained\"\n              color=\"secondary\"\n              onClick={handleClose}\n            >\n              {greeting ? \"Skip Now\" : \"Close\"}\n            </Button>\n          </Box>\n        </Box>\n      </Modal>\n    </>\n  );\n}\n\nexport default ChangeProfilePicture;\n","import React, { useEffect, useState } from \"react\";\nimport { CALLSTATES } from \".\";\n\nfunction updateTimer(startTime) {\n  let timeNow = new Date();\n  let timerHrs = timeNow.getHours() - startTime.getHours();\n  let timerMin = (() => {\n    let min = timeNow.getMinutes() - startTime.getMinutes();\n    if (min < 0) {\n      min = min + 60;\n      timerHrs--;\n    }\n    return min;\n  })();\n  let timerSec = (() => {\n    let sec = timeNow.getSeconds() - startTime.getSeconds();\n    if (sec < 0) {\n      sec = sec + 60;\n      timerMin--;\n    }\n    return sec;\n  })();\n  return `${timerHrs > 0 ? (\"0\" + timerHrs).slice(-2) + \":\" : \"\"}${(\n    \"0\" + timerMin\n  ).slice(-2)}:${(\"0\" + timerSec).slice(-2)}`; // format hrs:min:sec if hrs exits else  min:sec\n}\n\nfunction CallTimer({ callStartedTime, callState }) {\n  const [timer, setTimer] = useState();\n\n  useEffect(() => {\n    if (callStartedTime) {\n      setTimer(updateTimer(callStartedTime));\n      if (![CALLSTATES.HANGUP, CALLSTATES.CONNECTIONLOST].includes(callState)) {\n        const updateInterval = setInterval(() => {\n          setTimer(updateTimer(callStartedTime));\n        }, 1000);\n\n        return () => {\n          clearInterval(updateInterval);\n        };\n      }\n    }\n  }, [callStartedTime, callState]);\n\n  return <>{timer}</>;\n}\n\nexport default CallTimer;\n","import { useEffect } from \"react\";\n\nimport connecting from \"../../../assets/sounds/connecting.mp3\";\nimport connected from \"../../../assets/sounds/connected.mp3\";\nimport calling from \"../../../assets/sounds/calling.mp3\";\nimport callFailed from \"../../../assets/sounds/callFailed.mp3\";\nimport ringing from \"../../../assets/sounds/ringing.mp3\";\nimport reconnecting from \"../../../assets/sounds/reconnecting.mp3\";\nimport connectionLost from \"../../../assets/sounds/connectionLost.mp3\";\nimport hangup from \"../../../assets/sounds/hangup.mp3\";\n\nconst sounds = {\n  connecting,\n  connected,\n  calling,\n  callFailed,\n  ringing,\n  reconnecting,\n  connectionLost,\n  hangup,\n};\n\nfunction useCallSounds(callState) {\n  useEffect(() => {\n    if (\n      callState &&\n      callState !== \"noAnswer\" &&\n      callState !== \"busy\" &&\n      callState !== \"ongoing\"\n    ) {\n      var audio = new Audio(sounds[callState]);\n      audio.load();\n      if (\n        callState === \"connecting\" ||\n        callState === \"ringing\" ||\n        callState === \"reconnecting\"\n      )\n        audio.loop = true;\n      audio.play();\n    }\n    return () => {\n      if (audio) audio.pause();\n    };\n  }, [callState]);\n}\n\nexport default useCallSounds;\n","export default __webpack_public_path__ + \"static/media/connecting.bbd9a0bf.mp3\";","export default __webpack_public_path__ + \"static/media/connected.2638f3bf.mp3\";","export default __webpack_public_path__ + \"static/media/calling.60d66047.mp3\";","export default __webpack_public_path__ + \"static/media/callFailed.11708baa.mp3\";","export default __webpack_public_path__ + \"static/media/ringing.6cf9231c.mp3\";","export default __webpack_public_path__ + \"static/media/reconnecting.bbd9a0bf.mp3\";","export default __webpack_public_path__ + \"static/media/connectionLost.11708baa.mp3\";","export default __webpack_public_path__ + \"static/media/hangup.abe2a5aa.mp3\";","import {\n  Avatar,\n  Box,\n  IconButton,\n  makeStyles,\n  Slide,\n  Typography,\n  useTheme,\n} from \"@material-ui/core\";\nimport { Call, CallEnd, Mic, MicOff, VideoCall } from \"@material-ui/icons\";\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { createRef } from \"react\";\nimport Timer from \"./CallTimer\";\n// import Sounds from \"./Sounds\";\nimport { CALLSTATES } from \".\"; //STRING CONSTANTS\nimport useCallSounds from \"./useCallSounds\";\n\nconst useStyles = makeStyles((theme) => ({\n  call_alert: {\n    width: \"fit-content\",\n    padding: \"1em\",\n    display: \"flex\",\n    alignItems: \"center\",\n    position: \"absolute\",\n    top: \"5px\",\n    left: \"50%\",\n    transform: \"translate(-50%)\",\n    zIndex: \"2000\",\n    borderRadius: \"20px\",\n    backgroundColor: theme.palette.background.paper,\n  },\n\n  //ripple animation around Avatar\n  call_animation: {\n    width: \"3em\",\n    height: \"3em\",\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    position: \"relative\",\n    borderRadius: \"50%\",\n    animation: \"$ripple 2s ease infinite\",\n    webkitBackfaceVisibility: \"hidden\",\n    mozBackfaceVisibility: \"hidden\",\n    msBackfaceVisibility: \"hidden\",\n    backfaceVisibility: \"hidden\",\n  },\n\n  \"@keyframes ripple\": {\n    \"0%\": {\n      transform: \" scale(1)\",\n    },\n    \"15%\": {\n      boxShadow:\n        \"0 0 0 3px\" +\n        (theme.palette.type === \"dark\" ? \"#ffffff66\" : \"#aadff866\"),\n    },\n    \"25%\": {\n      boxShadow:\n        \" 0 0 0 5px\" +\n        (theme.palette.type === \"dark\" ? \"#ffffff66\" : \"#aadff866\") +\n        \", 0 0 0 10px\" +\n        (theme.palette.type === \"dark\" ? \"#ffffff33\" : \"#aadff833\"),\n    },\n  },\n  avatar: {\n    height: \"2.5em\",\n    width: \"2.5em\",\n  },\n  callerName: {\n    fontSize: \"1.1rem\",\n  },\n}));\n\nconst useButtonStyles = makeStyles((theme) => ({\n  button: {\n    marginLeft: \"0.2em\",\n    backgroundColor: theme.palette.background.default,\n  },\n  button_incoming: {\n    margin: \"0 0.2em\",\n    backgroundColor: theme.palette.background.default,\n    animation: \"$vibrate 100ms infinite alternate ease-in-out\",\n  },\n  \"@keyframes vibrate\": {\n    from: {\n      transform: \"rotateZ(-5deg) translateY(0px)\",\n    },\n    to: {\n      transform: \"rotateZ(5deg) translateY(1px)\",\n    },\n  },\n}));\n\nfunction CallStatus({ callState, callStartedTime }) {\n  const theme = useTheme();\n\n  const getTextColor = () => {\n    switch (callState) {\n      case CALLSTATES.CALLFAILED:\n      case CALLSTATES.CONNECTIONLOST:\n      case \"hangup\":\n        return theme.palette.error.main;\n      case CALLSTATES.NOANSWER:\n      case CALLSTATES.BUSY:\n        return theme.palette.warning.main;\n\n      default:\n        return theme.palette.text.secondary;\n    }\n  };\n  return (\n    <Typography\n      style={{ color: getTextColor() || theme.palette.text.secondary }}\n      variant=\"body1\"\n    >\n      {\n        {\n          connecting: \"connecting. . .\",\n          connected: \"connected\",\n          callFailed: \"call Failed!\",\n          calling: \"calling. . .\",\n          ringing: \"Incoming Call. . .\",\n          noAnswer: \"No Answer!\",\n          busy: \"Busy!\",\n          ongoing: (\n            <Timer callStartedTime={callStartedTime} callState={callState} />\n          ),\n          reconnecting: \"Reconnecting. . .\",\n          connectionLost: (\n            <span>\n              <Timer callStartedTime={callStartedTime} callState={callState} />\n              {\"\\tConnection Lost!\"}\n            </span>\n          ),\n          hangup: (\n            <span>\n              <Timer callStartedTime={callStartedTime} callState={callState} />\n              {\"\\tcall Ended!\"}\n            </span>\n          ),\n        }[callState]\n      }\n    </Typography>\n  );\n}\n\nfunction MicButton({ disabled, muted, setMuted }) {\n  const theme = useTheme();\n  const classes = useButtonStyles();\n  return (\n    <IconButton\n      className={classes.button}\n      disabled={disabled}\n      onClick={() => {\n        setMuted(!muted);\n      }}\n    >\n      {muted ? (\n        <MicOff htmlColor={theme.palette.grey[500]} />\n      ) : (\n        <Mic htmlColor={theme.palette.grey[500]} />\n      )}\n    </IconButton>\n  );\n}\n\nfunction RecallButton({ callType, callingUser }) {\n  const theme = useTheme();\n  const classes = useButtonStyles();\n  return (\n    <IconButton\n      className={classes.button_incoming}\n      onClick={() => {\n        const call = new CustomEvent(\"call\", {\n          detail: { callingUser, callType },\n        });\n        document.dispatchEvent(call);\n      }}\n    >\n      <Call htmlColor={theme.palette.success.main} />\n    </IconButton>\n  );\n}\nfunction AcceptCallButton({ callType }) {\n  const theme = useTheme();\n  const classes = useButtonStyles();\n  return (\n    <IconButton\n      className={classes.button_incoming}\n      onClick={() => {\n        const callAccepted = new CustomEvent(\"callAccepted\");\n        document.dispatchEvent(callAccepted);\n      }}\n    >\n      {\n        {\n          AudioCall: <Call htmlColor={theme.palette.success.main} />,\n          VideoCall: <VideoCall htmlColor={theme.palette.success.main} />,\n        }[callType]\n      }\n    </IconButton>\n  );\n}\n\nfunction EndCallButton() {\n  const theme = useTheme();\n  const classes = useButtonStyles();\n  return (\n    <IconButton\n      className={classes.button}\n      onClick={() => {\n        const callEnd = new CustomEvent(\"callEnd\");\n        document.dispatchEvent(callEnd);\n      }}\n    >\n      <CallEnd htmlColor={theme.palette.error.main} />\n    </IconButton>\n  );\n}\n\nfunction ActionButtons({ callType, callState, callingUser, muted, setMuted }) {\n  switch (true) {\n    case [\n      CALLSTATES.CONNECTING,\n      CALLSTATES.CONNECTED,\n      CALLSTATES.CALLING,\n      CALLSTATES.ONGOING,\n      CALLSTATES.RECONNECTING,\n    ].some((state) => state === callState):\n      return (\n        <>\n          <MicButton\n            disabled={callState !== CALLSTATES.ONGOING}\n            muted={muted}\n            setMuted={setMuted}\n          />\n          <EndCallButton />\n        </>\n      );\n\n    case [\n      CALLSTATES.CALLFAILED,\n      CALLSTATES.NOANSWER,\n      CALLSTATES.BUSY,\n      CALLSTATES.CONNECTIONLOST,\n    ].some((state) => state === callState):\n      return <RecallButton callType={callType} callingUser={callingUser} />;\n\n    case callState === CALLSTATES.RINGING:\n      return (\n        <>\n          <AcceptCallButton callType={callType} />\n          <EndCallButton />\n        </>\n      );\n    default:\n      return null;\n  }\n}\n\nfunction CallAlert({\n  direction,\n  callType,\n  callState,\n  callingUser,\n  remoteStream,\n  localStream,\n  callStartedTime,\n}) {\n  const classes = useStyles();\n  //refs\n  const alertRef = createRef(null);\n  const audioRef = useRef();\n  //states\n  const [muted, setMuted] = useState(false);\n\n  // call Sounds\n  useCallSounds(callState);\n\n  useEffect(() => {\n    if (localStream) {\n      localStream.getAudioTracks().forEach((track) => (track.enabled = !muted)); //toggle mic\n    }\n  }, [muted, localStream]);\n\n  useEffect(() => {\n    if (remoteStream) {\n      audioRef.current.srcObject = remoteStream;\n      audioRef.current.play();\n    }\n  }, [remoteStream]);\n\n  return (\n    <Slide direction=\"down\" in={true} timeout={{ enter: 200, exit: 500 }}>\n      <Box className={classes.call_alert} boxShadow={5} ref={alertRef}>\n        {remoteStream && <audio ref={audioRef} autoPlay={true} />}\n\n        {/* <CallSounds callState={callState} /> */}\n\n        <div className={classes.call_animation}>\n          <Avatar\n            className={classes.avatar}\n            src={callingUser.profilePic}\n            alt=\"user\"\n          />\n        </div>\n\n        <Box\n          mx=\"1em\"\n          style={{\n            //makes text unselectable\n            WebkitUserSelect: \"none\" /* Chrome all / Safari all */,\n            MozUserSelect: \"none\" /* Firefox all */,\n            msUserSelect: \"none\" /* IE 10+ */,\n            userSelect: \"none\",\n          }}\n        >\n          <CallStatus callState={callState} callStartedTime={callStartedTime} />\n\n          <Typography color=\"textPrimary\" style={{ fontSize: \"1.1em\" }}>\n            {callingUser.firstName} {callingUser.lastName}\n          </Typography>\n        </Box>\n\n        <ActionButtons\n          callState={callState}\n          callType={callType}\n          direction={direction}\n          muted={muted}\n          setMuted={setMuted}\n        />\n      </Box>\n    </Slide>\n  );\n}\n\nexport default CallAlert;\n","import { Box, IconButton, makeStyles } from \"@material-ui/core\";\nimport {\n  CallEnd,\n  Mic,\n  MicOff,\n  Videocam,\n  VideocamOff,\n} from \"@material-ui/icons\";\nimport React, { useRef } from \"react\";\n\nconst useStyles = makeStyles({\n  root: {\n    position: \"absolute\",\n    top: \"100%\",\n    transform: \"translateY(-100%)\",\n    marginTop: \"-2em\",\n  },\n  actionBtn: {\n    height: \"2.5em\",\n    width: \"2.5em\",\n    margin: \"0 0.8em\",\n    \"&:nth-child(1),&:nth-child(2)\": {\n      backgroundColor: \"#7c7c7c62\",\n      backdropFilter: \"blur(5px)\",\n      webkitBackdropFilter: \"blur(5px)\",\n    },\n    \"&:last-child\": {\n      backgroundColor: \"#ff0000\",\n      backdropFilter: \"blur(5px)\",\n      webkitBackdropFilter: \"blur(5px)\",\n    },\n  },\n});\n\nfunction ActionButtons({ muted, cameraEnabled, setMuted, setCameraEnabled }) {\n  const classes = useStyles();\n  const callEndRef = useRef(new Event(\"callEnd\"));\n\n  function endCall() {\n    const callEnd = callEndRef.current;\n    document.dispatchEvent(callEnd);\n  }\n\n  return (\n    <Box className={classes.root}>\n      <Box className={classes.ActionButtons}>\n        <IconButton\n          className={classes.actionBtn}\n          onClick={() => {\n            setCameraEnabled(!cameraEnabled);\n          }}\n        >\n          {cameraEnabled ? (\n            <Videocam htmlColor=\"white\" />\n          ) : (\n            <VideocamOff htmlColor=\"white\" />\n          )}\n        </IconButton>\n        <IconButton\n          className={classes.actionBtn}\n          onClick={() => {\n            setMuted(!muted);\n          }}\n        >\n          {muted ? <MicOff htmlColor=\"white\" /> : <Mic htmlColor=\"white\" />}\n        </IconButton>\n        <IconButton className={classes.actionBtn} onClick={endCall}>\n          <CallEnd htmlColor=\"white\" />\n        </IconButton>\n      </Box>\n    </Box>\n  );\n}\n\nexport default ActionButtons;\n","import {\n  Avatar,\n  Box,\n  IconButton,\n  makeStyles,\n  Typography,\n} from \"@material-ui/core\";\nimport { Fullscreen, FullscreenExit } from \"@material-ui/icons\";\nimport React, { useState } from \"react\";\nimport { CALLSTATES } from \".\";\nimport Timer from \"./CallTimer\";\n\nconst useStyles = makeStyles((theme) => ({\n  videoCallHeader: {\n    position: \"absolute\",\n    zIndex: \"1000\",\n    backgroundColor: \"#7c7c7c62\",\n    backdropFilter: \"blur(5px)\",\n    webkitBackdropFilter: \"blur(5px)\",\n    width: \"100%\",\n    padding: \"0.8em\",\n    alignSelf: \"stretch\",\n    display: \"flex\",\n    justifyContent: \"space-between\",\n  },\n  userInfoContainer: {\n    display: \"flex\",\n    alignItems: \"center\",\n    margin: \"0 0.5em\",\n  },\n  headerBtn: {\n    margin: \"0 0.5em\",\n  },\n  wrapper: {\n    color: \"#fff\",\n    marginLeft: \"1em\",\n  },\n  timer: {\n    color: theme.palette.grey[300],\n  },\n  avatar: {\n    height: \"2.3em\",\n    width: \"2.3em\",\n  },\n}));\n\nfunction VideoCallHeader({ callState, callingUser, callStartedTime }) {\n  const classes = useStyles();\n\n  const [fullScreen, setFullScreen] = useState(false);\n\n  function toggleFullScreen() {\n    if (!document.fullscreenElement) {\n      document.documentElement.requestFullscreen();\n      setFullScreen(true);\n    } else {\n      if (document.exitFullscreen) {\n        document.exitFullscreen();\n        setFullScreen(false);\n      }\n    }\n  }\n\n  return (\n    <Box className={classes.videoCallHeader}>\n      <Box className={classes.userInfoContainer}>\n        <Avatar className={classes.avatar} src={callingUser.profilePic} />\n        <Box className={classes.wrapper}>\n          <Typography variant=\"h6\" className={classes.username}>\n            {callingUser.firstName} {callingUser.lastName}\n          </Typography>\n          {callState === CALLSTATES.ONGOING && (\n            <Typography variant=\"subtitle2\" className={classes.timer}>\n              <Timer callStartedTime={callStartedTime} callState={callState} />\n            </Typography>\n          )}\n        </Box>\n      </Box>\n      <Box className={classes.headerBtnsContainer}>\n        <IconButton className={classes.headerBtn} onClick={toggleFullScreen}>\n          {fullScreen ? (\n            <FullscreenExit htmlColor=\"white\" />\n          ) : (\n            <Fullscreen htmlColor=\"white\" />\n          )}\n        </IconButton>\n      </Box>\n    </Box>\n  );\n}\n\nexport default VideoCallHeader;\n","import { Box, makeStyles } from \"@material-ui/core\";\nimport React from \"react\";\n\nconst useStyles = makeStyles({\n  videoContainer: {\n    height: \"100%\",\n    width: \"100%\",\n    \"&>video\": {\n      width: \"100%\",\n      height: \"100%\",\n      objectFit: \"contain\",\n    },\n  },\n  localVideoContainer: {\n    position: \"absolute\",\n    height: \"20vh\",\n    top: \"6em\",\n    right: \"1em\",\n    backgroundColor: \"white\",\n    \"&>video\": {\n      height: \"100%\",\n      width: \"100%\",\n      objectFit: \"contain\",\n    },\n  },\n});\n\nfunction VideoContainer({ localVideo, remoteVideo }) {\n  const classes = useStyles();\n  return (\n    <Box className={classes.videoContainer}>\n      <Box className={classes.localVideoContainer}>\n        <video ref={localVideo} autoPlay={true} muted={true} />\n      </Box>\n      <video ref={remoteVideo} autoPlay={true} />\n    </Box>\n  );\n}\n\nexport default VideoContainer;\n","import { Box, makeStyles } from \"@material-ui/core\";\nimport React, { useEffect, useRef, useState } from \"react\";\nimport ActionButtons from \"./ActionButtons\";\nimport VideoCallHeader from \"./VideoCallHeader\";\nimport VideoContainer from \"./VideoContainer\";\n\nconst useStyles = makeStyles({\n  root: {\n    position: \"absolute\",\n    zIndex: \"1000\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n    left: 0,\n    width: \"100%\",\n    height: \"100%\",\n    backgroundColor: \"black\",\n  },\n});\n\nfunction VideoCallScreen({\n  localStream,\n  remoteStream,\n  callState,\n  callingUser,\n  callStartedTime,\n}) {\n  const classes = useStyles();\n  const localVideo = useRef();\n  const remoteVideo = useRef();\n  const [muted, setMuted] = useState(false);\n  const [cameraEnabled, setCameraEnabled] = useState(true);\n\n  useEffect(() => {\n    remoteVideo.current.srcObject = remoteStream;\n    localVideo.current.srcObject = localStream;\n  }, [remoteStream, localStream]);\n\n  useEffect(() => {\n    function toggleMic() {\n      localStream.getAudioTracks().forEach((track) => (track.enabled = !muted));\n    }\n    toggleMic();\n  }, [muted, localStream]);\n\n  useEffect(() => {\n    function toggleCamera() {\n      localStream\n        .getVideoTracks()\n        .forEach((track) => (track.enabled = cameraEnabled));\n    }\n    toggleCamera();\n  }, [cameraEnabled, localStream]);\n\n  return (\n    <Box className={classes.root}>\n      <VideoCallHeader\n        callState={callState}\n        callingUser={callingUser}\n        callStartedTime={callStartedTime}\n      />\n      <VideoContainer localVideo={localVideo} remoteVideo={remoteVideo} />\n      <ActionButtons\n        muted={muted}\n        cameraEnabled={cameraEnabled}\n        setMuted={setMuted}\n        setCameraEnabled={setCameraEnabled}\n      />\n    </Box>\n  );\n}\n\nexport default VideoCallScreen;\n","import React, { useContext, useCallback, useEffect, useState } from \"react\";\nimport CallAlert from \"./CallAlert\";\nimport Peer from \"peerjs\";\nimport SocketContext from \"../../../context/SocketContext\";\nimport LoggedInUserContext from \"../../../context/LoggedInUserContext\";\nimport VideoCallScreen from \"./VideoCallScreen\";\n\nexport const CALLSTATES = {\n  CONNECTING: \"connecting\",\n  CONNECTED: \"connected\",\n  CALLFAILED: \"callFailed\",\n  CALLING: \"calling\",\n  RINGING: \"ringing\",\n  NOANSWER: \"noAnswer\",\n  BUSY: \"busy\",\n  ONGOING: \"ongoing\",\n  RECONNECTING: \"reconnecting\",\n  CONNECTIONLOST: \"connectionLost\",\n  HANGUP: \"hangup\",\n};\nexport const CALLDIRECTION = {\n  INCOMING: \"incoming\",\n  OUTGOING: \"outgoing\",\n};\nexport const CALLTYPE = {\n  AUDIOCALL: \"AudioCall\",\n  VIDEOCALL: \"VideoCall\",\n};\n\nfunction CallSection() {\n  const socket = useContext(SocketContext);\n  const { LoggedInUser } = useContext(LoggedInUserContext);\n  //states\n  const [remoteStream, setRemoteStream] = useState();\n  const [localStream, setLocalStream] = useState();\n  const [showVideoScreen, setShowVideoScreen] = useState(false);\n\n  /**\n   * *callStates\n   * callStates in outgoing call [\"connecting\",\"connected\",\"callFailed\",\"calling\",\"noAnswer\" , \"busy\" , \"ongoing\" ,\"reconnecting\", \"connectionLost\" ,\"hangup\"]\n   * callStates in incoming call [\"ringing\",\"ongoing\",\"reconnecting\",\"connectionLost\",\"hangup\"]\n   * * these callSates are in order in they occur.\n   */\n  const [callState, setCallState] = useState(); //\n  const [direction, setDirection] = useState();\n  const [callType, setCallType] = useState(); // AudioCall VideoCall\n  const [callingUser, setCallingUser] = useState(); //object it hold is in this shape {username,firstName,lastName,online,profilePic}\n  const [callStartedTime, setCallStartedTime] = useState(); // new Date();\n\n  const showCallAlert =\n    !(\n      direction === CALLDIRECTION.INCOMING &&\n      callState === CALLSTATES.CONNECTING\n    ) &&\n    callState &&\n    !showVideoScreen;\n\n  const resetStates = () => {\n    setShowVideoScreen(false);\n    setCallState();\n    setRemoteStream();\n    setLocalStream();\n    setDirection();\n    setCallType();\n    setCallingUser();\n    setCallStartedTime();\n  };\n\n  const call = (peer, remotePeerId, callType) => {\n    //call acknowledgement is received form the otherEnd.\n    navigator.mediaDevices\n      .getUserMedia({ video: callType === CALLTYPE.VIDEOCALL, audio: true })\n      .then((stream) => {\n        setLocalStream(stream);\n        setShowVideoScreen(callType === CALLTYPE.VIDEOCALL);\n        const call = peer.call(remotePeerId, stream);\n        setCallState(CALLSTATES.CALLING); //play calling tone in CallAlert component\n        call.on(\"stream\", (remoteStream) => {\n          //call is accepted by otherEnd\n          // Show stream in some <video> element if callType === videoCall\n          setRemoteStream(remoteStream);\n          setCallStartedTime(new Date()); //start call timer\n          setCallState(CALLSTATES.ONGOING);\n        });\n      })\n      .catch((err) => {\n        setCallState(CALLSTATES.CALLFAILED);\n        console.error(\"Failed to get local stream\", err);\n      });\n  };\n\n  const acceptCall = (call, callType) => {\n    navigator.mediaDevices\n      .getUserMedia({ video: callType === CALLTYPE.VIDEOCALL, audio: true })\n      .then((stream) => {\n        call.answer(stream); // Answer the call with an A/V stream.\n        setLocalStream(stream);\n        call.on(\"stream\", (remoteStream) => {\n          setCallStartedTime(new Date()); //start call timer\n          setCallState(CALLSTATES.ONGOING);\n          // Show stream in some <video> element.\n          setRemoteStream(remoteStream);\n          setShowVideoScreen(callType === CALLTYPE.VIDEOCALL);\n        });\n      })\n      .catch((err) => {\n        setCallState(CALLSTATES.CALLFAILED);\n        console.error(\"Failed to get local stream\", err);\n      });\n  };\n\n  const handleCall = useCallback(\n    (e) => {\n      const callDirection = e.detail\n        ? CALLDIRECTION.OUTGOING\n        : CALLDIRECTION.INCOMING;\n      const callType = e.detail?.callType || e.callType;\n      setDirection(callDirection);\n      setCallingUser(e.detail?.userInfo || e.caller);\n      setCallType(callType);\n      setCallState(CALLSTATES.CONNECTING); //show CallAlert component\n\n      const peer = new Peer(); //creating new peer\n      peer.on(\"open\", function (peerId) {\n        if (callDirection === CALLDIRECTION.OUTGOING) {\n          const userInfo = e.detail.userInfo; //this person\n          socket.emit(\"outgoingCall\", peerId, userInfo, callType);\n          socket.on(\n            \"acknowledgedCall\",\n            (remotePeerId, caller, receiver, ackCallType) => {\n              if (\n                caller.username === LoggedInUser.username &&\n                receiver === userInfo.username &&\n                ackCallType === callType\n              ) {\n                setCallState(CALLSTATES.CONNECTED); //play call connected sound in CallAlert component\n                call(peer, remotePeerId, callType);\n              }\n            }\n          );\n        } else {\n          setCallType(e.callType);\n          setCallState(CALLSTATES.RINGING); //play ringtone\n          socket.emit(\n            \"callAcknowledged\",\n            peerId,\n            e.caller,\n            LoggedInUser.username,\n            e.callType\n          );\n        }\n      });\n\n      function callHandler(call) {\n        setCallState(CALLSTATES.RINGING); //play ringtone\n        document.addEventListener(\"callAccepted\", () => {\n          acceptCall(call, callType);\n        });\n      }\n      //answer call\n      peer.on(\"call\", callHandler);\n    },\n    [socket, LoggedInUser]\n  );\n\n  //stopping the mic and camera streams.\n  const stopStreams = useCallback(() => {\n    remoteStream?.getTracks().forEach((tracks) => tracks.stop());\n    localStream?.getTracks().forEach((tracks) => tracks.stop());\n  }, [remoteStream, localStream]);\n\n  const endCall = useCallback(\n    function () {\n      if (this !== socket) {\n        callState === CALLSTATES.RINGING\n          ? socket.emit(\"callRejected\", callingUser)\n          : socket.emit(\"callEnd\", callingUser);\n      } //if it is called by socket.on() no need to emit. This happens when otherEnd ends the call. So no need to tell otherEnd the call has ended.\n      setCallState(CALLSTATES.HANGUP);\n      stopStreams();\n      setTimeout(resetStates, 2000); //wait 2 sec before everything is clear so callEnd sound and callended info can be shown.\n    },\n    [socket, callingUser, callState, stopStreams]\n  );\n\n  useEffect(() => {\n    switch (callState) {\n      //for callFailed\n      case CALLSTATES.CONNECTING:\n        var callFailTimeOut = setTimeout(() => {\n          setCallState(CALLSTATES.CALLFAILED);\n          setTimeout(resetStates, 3000);\n        }, 10000);\n        break;\n\n      //for noAnswer\n      case CALLSTATES.RINGING:\n        var noAnswerTimeOut = setTimeout(() => {\n          socket.emit(\"noAnswer\", callingUser);\n          resetStates();\n        }, 10000);\n        break;\n      case CALLSTATES.NOANSWER:\n      case CALLSTATES.BUSY:\n        setTimeout(resetStates, 3000);\n        stopStreams();\n        break;\n\n      default:\n        break;\n    }\n\n    return () => {\n      clearTimeout(callFailTimeOut);\n      clearTimeout(noAnswerTimeOut);\n    };\n  }, [socket, callState, callingUser, stopStreams]);\n\n  useEffect(() => {\n    socket.on(\"incomingCall\", handleCall);\n    socket.on(\"callEnd\", endCall);\n    socket.on(\"noAnswer\", () => {\n      setCallState(CALLSTATES.NOANSWER);\n    });\n    socket.on(\"callRejected\", () => {\n      setCallState(CALLSTATES.BUSY);\n    });\n    socket.on(\"userBusy\", (busyUser) => {\n      callingUser === busyUser && setCallState(CALLSTATES.BUSY);\n    });\n\n    document.addEventListener(\"call\", handleCall);\n    document.addEventListener(\"callEnd\", endCall);\n    return () => {\n      document.removeEventListener(\"call\", handleCall);\n      document.removeEventListener(\"callEnd\", endCall);\n      socket.off(\"incomingCall\", handleCall);\n      socket.off(\"callEnd\", endCall);\n    };\n  }, [socket, callingUser, handleCall, endCall]);\n\n  return (\n    <>\n      {showCallAlert && (\n        <CallAlert\n          direction={direction}\n          callType={callType}\n          callingUser={callingUser}\n          callState={callState}\n          callStartedTime={callStartedTime}\n          //AudioCall is handled in this component\n          remoteStream={remoteStream}\n          localStream={localStream}\n        />\n      )}\n\n      {showVideoScreen && (\n        <VideoCallScreen\n          localStream={localStream}\n          remoteStream={remoteStream}\n          callState={callState}\n          callingUser={callingUser}\n          callStartedTime={callStartedTime}\n        />\n      )}\n    </>\n  );\n}\n\nexport default CallSection;\n","import { Box, useMediaQuery, useTheme } from \"@material-ui/core\";\nimport React, { useEffect, useState } from \"react\";\nimport { io } from \"socket.io-client\";\nimport ChatSection from \"./ChatSection/index\";\nimport SideNavigation from \"./SideNavigation/index\";\nimport ChangeProfilePicture from \"./ChangeProfilePicture\";\nimport config from \"../../backendConfig\";\nimport SocketContext from \"../../context/SocketContext\";\nimport LoggedInUserContext from \"../../context/LoggedInUserContext\";\nimport { Route } from \"react-router\";\nimport CallSection from \"./CallSection\";\n\nfunction MessengerPage({ user }) {\n  //setting up socket\n  const socket = io(config.wsAddress, {\n    auth: { token: localStorage.getItem(\"accesstoken\") },\n  });\n\n  const theme = useTheme();\n  const [showChangeProfilePicture, setShowChangeProfilePicture] =\n    useState(false);\n\n  const notMediumScreen = useMediaQuery(theme.breakpoints.down(\"sm\"));\n\n  useEffect(() => {\n    socket.on(\"connect\", () => {\n      console.log(\"socket connected\");\n    });\n\n    socket.on(\"disconnect\", () => {\n      console.log(\"socket disconnected!\");\n    });\n\n    //clean up\n    return () => {\n      socket.disconnect();\n    };\n  }, [socket]);\n\n  const [LoggedInUser, setLoggedInUser] = useState(user);\n  const value = { LoggedInUser, setLoggedInUser };\n  return (\n    <SocketContext.Provider value={socket}>\n      <LoggedInUserContext.Provider value={value}>\n        <Box\n          display=\"flex\"\n          minHeight={\"100vh\"}\n          position=\"relative\"\n          bgcolor={theme.palette.background.default}\n        >\n          {user.newUser ? <ChangeProfilePicture greeting /> : null}\n\n          {showChangeProfilePicture ? (\n            <ChangeProfilePicture\n              setShowChangeProfilePicture={setShowChangeProfilePicture}\n            />\n          ) : null}\n\n          {notMediumScreen ? (\n            <>\n              <Route path=\"/messenger\" exact>\n                <SideNavigation\n                  setShowChangeProfilePicture={setShowChangeProfilePicture}\n                />\n              </Route>\n              <Route path=\"/messenger/:username\" exact>\n                <ChatSection />\n              </Route>\n            </>\n          ) : (\n            <>\n              <SideNavigation\n                setShowChangeProfilePicture={setShowChangeProfilePicture}\n              />\n              <Route path=\"/messenger/:username?\">\n                <ChatSection />\n              </Route>\n            </>\n          )}\n\n          <CallSection />\n        </Box>\n      </LoggedInUserContext.Provider>\n    </SocketContext.Provider>\n  );\n}\nexport default MessengerPage;\n","import { useEffect, useState } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport MessengerPage from \"../MessengerPage\";\nimport authenticateLoginToken from \"./authenticateUser\";\n\nfunction ProtectedRoute({ children }) {\n  const [loggedIn, setLoggedIn] = useState(false);\n  const [checked, setChecked] = useState(false);\n  const [error, setError] = useState(\"\");\n\n  useEffect(() => {\n    (async () => {\n      try {\n        const valid = await authenticateLoginToken();\n        setLoggedIn(valid);//vaid object contains loggein in user \n        setChecked(true);\n      } catch (err) {\n        setError(err.response?.data || err.message);\n      }\n    })();\n  }, []);\n\n  if (error) {\n    return (\n      <Redirect\n        to={{\n          pathname: \"/login\",\n          state: { alert: { type: \"error\", message: error } },\n        }}\n      />\n    );\n  }\n\n  if (checked && loggedIn) {\n    return <MessengerPage user={loggedIn.user} />;\n  }\n  if (checked && !loggedIn) {\n    return <Redirect to=\"/login\" />;\n  }\n  return null;\n}\n\nexport default ProtectedRoute;\n","import { createMuiTheme } from \"@material-ui/core\";\nimport { ThemeProvider } from \"@material-ui/styles\";\nimport React from \"react\";\nimport { BrowserRouter, Route, Switch } from \"react-router-dom\";\nimport LoginPage from \"./components/LoginPage\";\nimport MessengerPage from \"./components/MessengerPage\";\nimport ProtectedRoute from \"./components/ProtectedRoute\";\n\nconst theme = createMuiTheme({\n  palette: {\n    type: \"light\",\n    primary: {\n      main: \"#00ab55\",\n    },\n    background: {\n      paper: \"#fff\",\n      default: \"#fff\",\n    },\n  },\n  breakpoints: {\n    values: {\n      xs: 0,\n      sm: 600,\n      md: 900,\n      lg: 1280,\n      xl: 1920,\n    },\n  },\n});\n\nexport default function App() {\n  return (\n    <BrowserRouter>\n      <ThemeProvider theme={theme}>\n        <Switch>\n          <Route path={[\"/\", \"/login\", \"/signup\"]} exact>\n            <LoginPage />\n          </Route>\n          <Route path=\"/messenger\">\n            <ProtectedRoute>\n              <MessengerPage />\n            </ProtectedRoute>\n          </Route>\n        </Switch>\n      </ThemeProvider>\n    </BrowserRouter>\n  );\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}