{"version":3,"sources":["../node_modules/peerjs/dist sync","backendConfig.js","api/index.js","components/LoginPage/InputFields.jsx","components/Utils/Alert.jsx","components/LoginPage/LoginForm.jsx","components/LoginPage/SignUpForm.jsx","assets/loginPageBackground.svg","components/LoginPage/index.jsx","context/SocketContext.js","components/MessengerPage/SideNavigation/Conversation.jsx","components/MessengerPage/ChatSection/Header.jsx","components/MessengerPage/ChatSection/MediaContent.jsx","components/MessengerPage/ChatSection/Message.jsx","context/LoggedInUserContext.js","components/MessengerPage/ChatSection/MessageInput.jsx","assets/videoIconOverlay.png","components/MessengerPage/ChatSection/TypingIndicator.jsx","components/MessengerPage/ChatSection/MessagesContainer.jsx","components/MessengerPage/ChatSection/index.jsx","components/MessengerPage/SideNavigation/LogoutButton.jsx","components/MessengerPage/SideNavigation/UserWithAvatar.jsx","components/MessengerPage/SideNavigation/People.jsx","components/MessengerPage/SideNavigation/FriendList.jsx","components/MessengerPage/SideNavigation/FindFriends/FriendRequests.jsx","components/MessengerPage/SideNavigation/FindFriends/PendingFriendRequests.jsx","components/MessengerPage/SideNavigation/FindFriends/PeopleYouMayKnow.jsx","components/MessengerPage/SideNavigation/FindFriends/index.jsx","components/MessengerPage/SideNavigation/ConversationsContainer.jsx","components/MessengerPage/SideNavigation/SelectionMenu.jsx","components/MessengerPage/SideNavigation/SearchBox/SearchResults.jsx","components/MessengerPage/SideNavigation/SearchBox/index.jsx","components/MessengerPage/SideNavigation/index.jsx","components/MessengerPage/ChangeProfilePicture.jsx","components/MessengerPage/CallSection/CallTimer.jsx","components/MessengerPage/CallSection/useCallSounds.js","components/MessengerPage/CallSection/CallAlert.jsx","components/MessengerPage/CallSection/ActionButtons.jsx","components/MessengerPage/CallSection/VideoCallHeader.jsx","components/MessengerPage/CallSection/VideoContainer.jsx","components/MessengerPage/CallSection/VideoCallScreen.jsx","components/MessengerPage/CallSection/index.jsx","components/MessengerPage/index.jsx","components/ProtectedRoute/index.jsx","App.js","index.js"],"names":["webpackEmptyContext","req","e","Error","code","keys","resolve","module","exports","id","config","address","wsAddress","baseURL","axiosInstance","axios","create","headers","interceptors","request","use","url","includes","data","localStorage","getItem","useStyles","makeStyles","form","width","maxWidth","minWidth","formTitle","margin","btn","padding","textTransform","link","textDecoration","alignSelf","divider","height","marginBottom","spinner","position","right","StyledTextField","withStyles","root","TextField","Form","formik","children","classes","onSubmit","handleSubmit","className","Box","display","flexDirection","alignItems","p","bgcolor","boxShadow","borderRadius","FormHeading","Typography","variant","color","align","InputField","name","inputProps","fullWidth","placeholder","aria-label","getFieldProps","error","Boolean","touched","errors","helperText","PasswordField","passwordVisible","setPasswordVisible","type","password","InputProps","endAdornment","InputAdornment","IconButton","onClick","Visibility","VisibilityOff","SubmitButton","loading","Button","CircularProgress","size","FormFooter","linkTo","linkText","Divider","light","to","component","Alert","theme","useTheme","useState","show","setShow","setTimeout","Slide","direction","in","timeout","enter","exit","top","marginRight","palette","main","CheckCircleOutline","htmlColor","InfoOutlined","WarningOutlined","ErrorOutlineOutlined","style","marginLeft","initialValues","username","values","a","setLoggedIn","setLoading","setFormError","post","res","status","window","setItem","accesstoken","state","message","response","validationSchema","yup","required","min","max","matches","trim","LoginForm","alert","formError","loggedIn","useFormik","autoFocus","FormHelperText","firstName","lastName","setRegistered","console","log","SignUpForm","registered","pathname","justifyContent","useStyle","background","backgroundImage","backgroundSize","backgroundPositionY","LoginPage","location","useLocation","token","path","SocketContext","createContext","StyledBadge","badge","border","backgroundColor","isonline","Badge","messageBadge","StyledButton","buttonRipple","primary","transform","props","ButtonBase","TouchRippleProps","MessageTime","msgTimestamp","formatMessageTimestamp","msgTime","setMsgTime","timestamp","moment","fromNow","replace","x","useEffect","updateInterval","setInterval","clearInterval","fontSize","Conversation","lastMessage","conversationWith","history","useHistory","socket","useContext","userInfo","setUserInfo","online","setOnline","recentMessage","setRecentMessage","get","updateOnlineState","on","off","updateRecentMessage","msg","from","detail","recipient","listener","getUserInfo","document","addEventListener","removeEventListener","offMessageSend","push","overlap","badgeContent","anchorOrigin","vertical","horizontal","Avatar","alt","src","profilePic","px","seen","noWrap","fontWeight","text","media","images","length","videos","files","header","backdropFilter","zIndex","largeAvatar","buttonIcon","menu","marginTop","Header","callHandler","callType","call","CustomEvent","dispatchEvent","toUpperCase","mx","mt","ml","flexWrap","Phone","VideoCall","mediaContainer","progressBarContainer","CircularProgressWithLabel","progressPercent","setProgressPercent","updateProgress","progressEvent","msgtempid","msgTempId","amount","value","left","bottom","Image","image","srcURL","secure_url","URL","createObjectURL","revokeObjectURL","objectFit","flexGrow","maxHeight","Video","video","controls","File","file","fileContainer","fileName","default","fileIcon","Description","paper","href","download","MediaContent","isUploading","map","index","avatar","Message","prevMsgTimestamp","otherEndUser","setMessage","mediaMessageResponse","then","msgDirection","showTimestamp","day","halfHour","timeDifferenceBetweenMsg","diff","timeDifferenceFromNow","format","getColor","getContrastText","my","getBorderRadius","wordBreak","overflowWrap","wordWrap","LoggedInUserContext","selectedItemsContainer","overflowY","selectedMediasContainer","seperateImagesAndVideos","medias","split","links","this","tempMsgId","uuidv4","Date","useStyles_selectedMediaPreviewer","previewContainer","selectedImage","removeBtn","all","textAlign","videoContainer","content","backgroundPosition","SelectedMediasPreviewer","removeSelectedMedia","mediaObjectURL","Close","useStyles_selectedFilePreviewer","selectedFilePreviewContainer","SelectedFilesPreviewer","removeSelectedFile","MessageInput","updateMessages","Socket","loggedInUser","useParams","textFieldValue","setTextFieldValue","selectedImages","setSelectedImages","selectedVideos","setSelectedVideos","selectedFiles","setSelectedFiles","fileInputError","setFileInputError","typing","setTyping","dispatchSendMessage","sendMessage","dispatchUploadProgress","progress","uploadProgress","preventDefault","messageForClientSide","formData","FormData","append","forEach","onUploadProgress","Math","round","loaded","total","messageId","_id","recipientId","emit","target","removeSelectedImage","prevImages","splice","removeSelectedVideo","prevVideos","prevFiles","accept","multiple","onChange","htmlFor","ImageRounded","Attachment","Send","container","dot","animation","opacity","TypingIndicator","MessagesContainer","messageContainer","useRef","messages","setMessages","user","otherSide","prev","addMessage","current","scrollTo","scrollHeight","getMessages","removeAllListeners","ref","ChatSection","logoutText","LogoutButton","loggingOut","setLoggingOut","delete","LogoutType","clear","PowerSettingsNew","userAvatar","cursor","UserWithAvatar","setShowChangeProfilePicture","LoggedInUser","button","MutualFriendInformation","person","info","mutualFriends","grey","People","update","handleFriendRequest","isRequestPending","isFriend","hasSentFriendRequest","FriendUnFriendBtn","unFriend","React","anchorEl","setAnchorEl","open","undefined","aria-describedby","event","currentTarget","Popover","onClose","transformOrigin","LoadingButton","Done","blue","Clear","PersonAdd","getButton","FriendList","friendList","setFriendList","overflowX","FriendRequests","changed","friendRequests","setFriendRequests","Requester","PendingFriendRequests","pendingFriendRequests","setPendingFriendRequests","HourglassEmptyOutlined","Requested","PeopleYouMayKnow","peopleYouMayKnow","setPeopleYouMayKnow","EmojiPeople","Person","FindFriends","setChanged","random","getConversations","source","cancelToken","ConversationsContainer","conversations","setConversations","moveRecentConversationToTop","prevConversations","findIndex","conversation","with","recentConversation","axiosMain","CancelToken","cancel","tab","TabPanel","components","SelectionMenu","setIndex","Tabs","newIndex","indicatorColor","textColor","Tab","icon","Chat","GroupAdd","searchResultsContainer","SearchResults","searchText","searchResults","setSearchResults","cancelTokenSource","searchTerm","getSearchResults","results","justifySelf","some","searchForm","paddingLeft","searchInput","outline","secondary","SearchBox","setSearchText","showSearchResults","setShowSearchResults","searchBoxRef","handleClickOutside","contains","tabIndex","onFocus","handleChange","Search","breakpoints","down","SideNavigation","borderRight","py","modal","modal__content","shadows","btnsContainer","greetingText","infoText","fullNameText","usernameText","ChangeProfilePicture","greeting","setLoggedInUser","profilePicture","setProfilePicture","setSelectedImage","setOpen","uploading","setUploading","setAlert","profilePicURL","handleClose","Modal","txtWhite","mb","reader","FileReader","readAsDataURL","result","endIcon","Publish","updateTimer","startTime","timeNow","timerHrs","getHours","timerMin","getMinutes","timerSec","sec","getSeconds","slice","CallTimer","callStartedTime","callState","timer","setTimer","CALLSTATES","HANGUP","CONNECTIONLOST","useCallSounds","audio","Audio","load","loop","play","pause","call_alert","call_animation","webkitBackfaceVisibility","mozBackfaceVisibility","msBackfaceVisibility","backfaceVisibility","callerName","useButtonStyles","button_incoming","CallStatus","CALLFAILED","NOANSWER","BUSY","warning","getTextColor","connecting","connected","callFailed","calling","ringing","noAnswer","busy","ongoing","reconnecting","connectionLost","hangup","MicButton","disabled","muted","setMuted","MicOff","Mic","RecallButton","callingUser","Call","success","AcceptCallButton","callAccepted","AudioCall","EndCallButton","callEnd","CallEnd","ActionButtons","CONNECTING","CONNECTED","CALLING","ONGOING","RECONNECTING","RINGING","CallAlert","remoteStream","localStream","alertRef","createRef","audioRef","getAudioTracks","track","enabled","srcObject","autoPlay","WebkitUserSelect","MozUserSelect","msUserSelect","userSelect","actionBtn","webkitBackdropFilter","cameraEnabled","setCameraEnabled","callEndRef","Event","Videocam","VideocamOff","videoCallHeader","userInfoContainer","headerBtn","wrapper","VideoCallHeader","fullScreen","setFullScreen","headerBtnsContainer","fullscreenElement","exitFullscreen","documentElement","requestFullscreen","FullscreenExit","Fullscreen","localVideoContainer","VideoContainer","localVideo","remoteVideo","VideoCallScreen","getVideoTracks","CALLDIRECTION","CALLTYPE","CallSection","setRemoteStream","setLocalStream","showVideoScreen","setShowVideoScreen","setCallState","setDirection","setCallType","setCallingUser","setCallStartedTime","showCallAlert","resetStates","handleCall","useCallback","callDirection","caller","peer","Peer","peerId","remotePeerId","receiver","ackCallType","navigator","mediaDevices","getUserMedia","stream","catch","err","answer","acceptCall","stopStreams","getTracks","tracks","stop","endCall","callFailTimeOut","noAnswerTimeOut","clearTimeout","busyUser","MessengerPage","io","auth","decodeToken","showChangeProfilePicture","showGreeting","setShowGreeting","notMediumScreen","useMediaQuery","newUser","disconnect","Provider","minHeight","exact","ProtectedRoute","createMuiTheme","xs","sm","md","lg","xl","App","ThemeProvider","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.029d656b.chunk.js","sourcesContent":["function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 311;","const config = {\n  address: \"https://messenger-backend-server.herokuapp.com\",\n  wsAddress: \"wss://messenger-backend-server.herokuapp.com\",\n};\n\nexport default config;\n","import axios from \"axios\";\nimport config from \"../backendConfig\";\n\nconst baseURL = `${config.address}/api`;\n\nconst axiosInstance = axios.create({\n  baseURL,\n  headers: { \"X-Requested-With\": \"XMLHttpRequest\" },\n});\n\naxiosInstance.interceptors.request.use((request) => {\n  if (request.url.includes(\"/login\") && request.data) {\n    //this is the case if the login is performed with username and password which is contained in the request.data\n    return request;\n  }\n  if (!request.url.includes(\"/userinfo\")) {\n    request.headers[\"Authorization\"] = `Bearer ${localStorage.getItem(\n      \"accesstoken\"\n    )}`;\n  }\n  return request;\n});\n\nexport default axiosInstance;\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport {\n  Box,\n  Button,\n  CircularProgress,\n  Divider,\n  IconButton,\n  InputAdornment,\n  makeStyles,\n  TextField,\n  Typography,\n  withStyles,\n} from \"@material-ui/core\";\nimport { Visibility, VisibilityOff } from \"@material-ui/icons\";\n\nconst useStyles = makeStyles({\n  form: {\n    width: \"70%\",\n    maxWidth: \"450px\",\n    minWidth: \"300px\",\n  },\n  formTitle: {\n    margin: \"0.5em\",\n  },\n  btn: {\n    width: \"fit-content\",\n    margin: \"1.5em 0\",\n    padding: \"0.7em 4em\",\n    textTransform: \"capitalize\",\n  },\n  link: {\n    textDecoration: \"none\",\n    alignSelf: \"flex-end\",\n  },\n  divider: {\n    width: \"100%\",\n    height: \"1.5px\",\n    marginBottom: \"1.5em\",\n  },\n  spinner: {\n    position: \"absolute\",\n    right: \"15%\",\n  },\n});\n\nconst StyledTextField = withStyles({\n  root: {\n    \"& .MuiInputBase-input\": {\n      padding: \"0.7em\",\n    },\n  },\n})(TextField);\n\nfunction Form({ formik, children }) {\n  const classes = useStyles();\n  return (\n    <form onSubmit={formik.handleSubmit} className={classes.form}>\n      <Box\n        display=\"flex\"\n        flexDirection=\"column\"\n        alignItems=\"center\"\n        p=\"2em 3em\"\n        bgcolor=\"white\"\n        boxShadow=\"rgb(37 117 252 / 20%) 0px 2px 20px 0px\"\n        borderRadius={10}\n      >\n        {children}\n      </Box>\n    </form>\n  );\n}\n\nfunction FormHeading({ children }) {\n  const classes = useStyles();\n  return (\n    <Typography\n      className={classes.formTitle}\n      variant=\"h5\"\n      color=\"primary\"\n      align=\"center\"\n    >\n      {children}\n    </Typography>\n  );\n}\n\nfunction InputField({ formik, name, ...inputProps }) {\n  return (\n    <StyledTextField\n      inputProps={inputProps}\n      variant=\"outlined\"\n      fullWidth\n      margin=\"normal\"\n      name={name}\n      placeholder={name}\n      aria-label={name}\n      {...formik.getFieldProps(name)}\n      error={Boolean(formik.touched[name] && formik.errors[name])}\n      helperText={formik.touched[name] ? formik.errors[name] : \"\"}\n    />\n  );\n}\n\nfunction PasswordField({\n  formik,\n  passwordVisible,\n  setPasswordVisible,\n  ...inputProps\n}) {\n  return (\n    <StyledTextField\n      inputProps={inputProps}\n      variant=\"outlined\"\n      fullWidth\n      margin=\"normal\"\n      type={passwordVisible ? \"text\" : \"password\"}\n      name=\"password\"\n      placeholder=\"Password\"\n      aria-label=\"password\"\n      {...formik.getFieldProps(\"password\")}\n      error={Boolean(formik.touched.password && formik.errors.password)}\n      helperText={formik.touched.password ? formik.errors.password : \"\"}\n      InputProps={{\n        endAdornment: (\n          <InputAdornment>\n            <IconButton onClick={() => setPasswordVisible(!passwordVisible)}>\n              {passwordVisible ? (\n                <Visibility color=\"primary\" />\n              ) : (\n                <VisibilityOff color=\"primary\" />\n              )}\n            </IconButton>\n          </InputAdornment>\n        ),\n      }}\n    />\n  );\n}\n\nfunction SubmitButton({ children, formik, loading }) {\n  const classes = useStyles();\n  return (\n    <Button\n      type=\"submit\"\n      className={classes.btn}\n      variant=\"contained\"\n      color=\"primary\"\n      aria-label=\"login button\"\n    >\n      {children}\n      {loading ? (\n        <CircularProgress\n          className={classes.spinner}\n          color=\"inherit\"\n          size=\"1.5em\"\n        />\n      ) : null}\n    </Button>\n  );\n}\n\nfunction FormFooter({ linkTo, children, linkText }) {\n  const classes = useStyles();\n  return (\n    <>\n      <Divider variant=\"middle\" light={true} className={classes.divider} />\n      <Typography variant=\"body2\" color=\"textSecondary\">\n        {children}{\" \"}\n        <Link to={linkTo} className={classes.link}>\n          <Typography variant=\"inherit\" color=\"primary\" component=\"span\">\n            {linkText}\n          </Typography>{\" \"}\n        </Link>\n        here!\n      </Typography>\n    </>\n  );\n}\n\nexport default StyledTextField;\nexport {\n  useStyles,\n  Form,\n  FormHeading,\n  InputField,\n  PasswordField,\n  SubmitButton,\n  FormFooter,\n};\n","import React, { useState } from \"react\";\nimport { Box, Slide, Typography, useTheme } from \"@material-ui/core\";\nimport {\n  CheckCircleOutline,\n  ErrorOutlineOutlined,\n  InfoOutlined,\n  WarningOutlined,\n} from \"@material-ui/icons\";\n\nfunction Alert({ type, children }) {\n  const theme = useTheme();\n  const [show, setShow] = useState(true);\n  setTimeout(() => {\n    setShow(false);\n  }, 2000);\n  return (\n    <Slide direction=\"down\" in={show} timeout={{ enter: 300, exit: 500 }}>\n      <Box\n        position=\"absolute\"\n        display=\"flex\"\n        top=\"5%\"\n        marginRight=\"auto\"\n        p=\"1em\"\n        borderRadius={5}\n        boxShadow={5}\n        bgcolor={theme.palette?.[type].main}\n      >\n        {type === \"success\" ? <CheckCircleOutline htmlColor=\"white\" /> : null}\n        {type === \"info\" ? <InfoOutlined htmlColor=\"white\" /> : null}\n        {type === \"warning\" ? <WarningOutlined htmlColor=\"white\" /> : null}\n        {type === \"error\" ? <ErrorOutlineOutlined htmlColor=\"white\" /> : null}\n\n        <Typography\n          variant=\"body1\"\n          style={{ marginLeft: \"0.5em\", color: \"white\" }}\n        >\n          {children}\n        </Typography>\n      </Box>\n    </Slide>\n  );\n}\n\nexport default Alert;\n","import { FormHelperText, Typography } from \"@material-ui/core\";\nimport axios from \"../../api\";\nimport React, { useState } from \"react\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport {\n  Form,\n  FormFooter,\n  FormHeading,\n  InputField,\n  PasswordField,\n  SubmitButton,\n  useStyles,\n} from \"./InputFields\";\nimport Alert from \"../Utils/Alert\";\nimport { useFormik } from \"formik\";\nimport * as yup from \"yup\";\n\n//formik props set up\nconst initialValues = {\n  username: \"\",\n  password: \"\",\n};\n\n//form Submission\nconst onSubmit = async (values, { setLoggedIn, setLoading, setFormError }) => {\n  setLoading(true);\n  try {\n    const res = await axios.post(\"/login\", values);\n    if (res.status === 200) {\n      window.localStorage.setItem(\"accesstoken\", res.data.accesstoken);\n      setLoggedIn(true);\n    }\n  } catch (err) {\n    setLoading(false);\n    setFormError({ state: true, message: err.response?.data || err.message });\n  }\n};\n//input validationSchema\nconst validationSchema = yup.object({\n  username: yup\n    .string()\n    .required(\"username cannot be empty!\")\n    .min(4, \"username must be at least 4 characters!\")\n    .max(255, \"username cannot exceed 255 characters!\")\n    .matches(\n      /[A-Za-z0-9._]{4,255}$/,\n      \"Only albabets dot(.) and underscore(_) is allowed!\"\n    ),\n  password: yup\n    .string()\n    .trim()\n    .required(\"password cannot be empty!\")\n    .min(6, \"password must be least 6 characters long!\")\n    .max(255, \"password cannot exceed 255 characters!\")\n    .matches(\n      /[\\S]{6,255}$/,\n      \"password cannnot contain white space characters!\"\n    ),\n});\n\nfunction LoginForm({ alert }) {\n  const [formError, setFormError] = useState({\n    state: false,\n    message: \"\",\n  });\n  const [passwordVisible, setPasswordVisible] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [loggedIn, setLoggedIn] = useState(false);\n\n  const formik = useFormik({\n    initialValues,\n    onSubmit: (values) => {\n      onSubmit(values, { setLoggedIn, setLoading, setFormError });\n    },\n    validationSchema,\n  });\n  const classes = useStyles();\n\n  if (loggedIn) {\n    return <Redirect to=\"/messenger\" />;\n  }\n  return (\n    <>\n      {alert ? <Alert type={alert.type}>{alert.message}</Alert> : null}\n\n      <Form formik={formik}>\n        {/* This is custom Form component. It is defined in InputFields.jsx */}\n        <FormHeading>Welcome Back</FormHeading>\n\n        {/*Username Field*/}\n        <InputField name=\"username\" formik={formik} autoFocus />\n\n        {/*Password Field*/}\n        <PasswordField\n          formik={formik}\n          passwordVisible={passwordVisible}\n          setPasswordVisible={setPasswordVisible}\n        />\n        {/* error message  */}\n        <FormHelperText error={formError.state}>\n          {formError.message}\n        </FormHelperText>\n\n        {/*forget password*/}\n        <Link to=\"/\" className={classes.link}>\n          <Typography variant=\"subtitle1\" color=\"primary\">\n            Forget Password?\n          </Typography>\n        </Link>\n\n        {/* sign in button */}\n        <SubmitButton formik={formik} loading={loading}>\n          Sign In\n        </SubmitButton>\n\n        <FormFooter linkTo=\"/signup\" linkText=\"Sign Up\">\n          Don't have an account ?\n        </FormFooter>\n      </Form>\n    </>\n  );\n}\n\nexport default LoginForm;\n","import { Box, FormHelperText } from \"@material-ui/core\";\nimport { useFormik } from \"formik\";\nimport React, { useState } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport * as yup from \"yup\";\nimport axios from \"../../api\";\nimport {\n  Form,\n  PasswordField,\n  SubmitButton,\n  InputField,\n  FormHeading,\n  FormFooter,\n} from \"./InputFields\";\n\n//formik setUp\nconst initialValues = {\n  firstName: \"\",\n  lastName: \"\",\n  username: \"\",\n  password: \"\",\n};\n//form Submission\nconst onSubmit = async (values,{ setRegistered,setLoading, setFormError}) => {\n  setLoading(true);\n  try {\n    const res = await axios.post(\"/register\", values);\n    if (res.status === 201) {\n      setRegistered(true);\n    }\n  } catch (err) {\n    console.log(err);\n    setFormError({ state: true, message: err.response?.data || err.message})\n    setLoading(false);\n  }\n};\n//input validationSchema\nconst validationSchema = yup.object({\n  firstName: yup\n    .string()\n    .required(\"firstName cannot be empty!\")\n    .min(3, \"firstName must be at least 3 characters!\")\n    .max(255, \"firstName cannot exceed 255 characters!\")\n    .matches(/[A-Za-z]{3,255}$/, \"Invalid Characters!, use letters only.\"),\n  lastName: yup\n    .string()\n    .required(\"lastName cannot be empty!\")\n    .min(3, \"lastName must be at least 3 characters!\")\n    .max(255, \"lastName cannot exceed 255 characters!\")\n    .matches(/[A-Za-z]{3,255}$/, \"Invalid Characters!, use letters only.\"),\n  username: yup\n    .string()\n    .required(\"username cannot be empty!\")\n    .min(4, \"username must be at least 4 characters!\")\n    .max(255, \"username cannot exceed 255 characters!\")\n    .matches(\n      /[A-Za-z0-9._]{4,255}$/,\n      \"Only albabets dot(.) and underscore(_) is allowed!\"\n    ),\n  password: yup\n    .string()\n    .trim()\n    .required(\"password cannot be empty!\")\n    .min(6, \"password must be least 6 characters long!\")\n    .max(255, \"password cannot exceed 255 characters!\")\n    .matches(\n      /[\\S]{6,255}$/,\n      \"password cannnot contain white space characters!\"\n    ),\n});\n\nfunction SignUpForm() {\n  const [passwordVisible, setPasswordVisible] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [formError, setFormError] = useState({\n    state: false,\n    message: \"\",\n  });\n  const [registered, setRegistered] = useState(false);\n\n  const formik = useFormik({\n    initialValues,\n    onSubmit: (values) => {\n      onSubmit(values,{setRegistered, setLoading, setFormError});\n    },\n    validationSchema,\n  });\n\n  if(registered){\n    return <Redirect to={{ pathname:\"/login\",state:{ alert:{type: 'success', message:\"User Succesfully Registered!\"}}}} />\n  }\n\n  return (\n    <Form formik={formik}>\n      <FormHeading>Lets Get Started.</FormHeading>\n\n      {/* This is for Firstname and lastName input field */}\n      <Box display=\"flex\" justifyContent=\"space-between\">\n        <InputField name=\"firstName\" formik={formik} />\n        <div style={{ width: \"1em\" }}></div>\n        <InputField name=\"lastName\" formik={formik} />\n      </Box>\n\n      {/* This is for username input field */}\n      <InputField name=\"username\" formik={formik} />\n      {/* This is for password Input Field */}\n      <PasswordField\n        passwordVisible={passwordVisible}\n        setPasswordVisible={setPasswordVisible}\n        formik={formik}\n      />\n\n      {/* error message  */}\n      <FormHelperText error={formError.state}>\n        {formError.message}\n      </FormHelperText>\n\n      <SubmitButton formik={formik} loading={loading}>\n        Sign Up\n      </SubmitButton>\n\n      <FormFooter linkTo=\"/login\" linkText=\"Sign In\">\n        Already have an account ?\n      </FormFooter>\n    </Form>\n  );\n}\n\nexport default SignUpForm;\n","export default __webpack_public_path__ + \"static/media/loginPageBackground.566fa2ff.svg\";","import { Box, makeStyles } from \"@material-ui/core\";\nimport React from \"react\";\nimport { Route, Redirect, useLocation } from \"react-router-dom\";\nimport LoginForm from \"./LoginForm\";\nimport SignUpForm from \"./SignUpForm\";\nimport backgroundImage from \"../../assets/loginPageBackground.svg\";\n\nconst useStyle = makeStyles({\n  root: {\n    background: `url(${backgroundImage})`,\n    backgroundSize: \"cover\",\n    backgroundPositionY: \"100%\",\n  },\n});\n\nfunction LoginPage() {\n  const classes = useStyle();\n  const location = useLocation();\n\n  const token = localStorage.getItem(\"accesstoken\");\n  const loggedIn = Boolean(token);\n\n  return loggedIn ? (\n    <Redirect to=\"/messenger\" />\n  ) : (\n    <Box\n      className={classes.root}\n      display=\"flex\"\n      justifyContent=\"center\"\n      alignItems=\"center\"\n      height=\"100vh\"\n      width=\"100vw\"\n    >\n      <Route path=\"/\">\n        <Redirect\n          to={{\n            pathname: \"/login\",\n            state: location.state,\n          }}\n        />\n      </Route>\n      <Route path=\"/login\">\n        <LoginForm alert={location.state?.alert} />\n      </Route>\n      <Route path=\"/signup\">\n        <SignUpForm />\n      </Route>\n    </Box>\n  );\n}\n\nexport default LoginPage;\n","import { createContext } from \"react\";\n\nconst SocketContext=createContext();\n\nexport default SocketContext;","import {\n  Avatar,\n  Box,\n  Badge,\n  withStyles,\n  Typography,\n  ButtonBase,\n  makeStyles,\n} from \"@material-ui/core\";\nimport moment from \"moment\";\nimport React, { useContext, useEffect, useState } from \"react\";\nimport { useHistory } from \"react-router\";\nimport axios from \"../../../api\";\nimport SocketContext from \"../../../context/SocketContext\";\n\nexport const StyledBadge = withStyles(() => ({\n  badge: {\n    height: \"0.9em\",\n    width: \"0.9em\",\n    borderRadius: \"50%\",\n    border: `2px solid #fff`,\n    backgroundColor: ({ isonline }) => {\n      return isonline ? \"green\" : \"grey\";\n    },\n  },\n}))(Badge);\n\nconst useStyles = makeStyles({\n  messageBadge: {\n    marginLeft: \"1em\",\n  },\n});\n\nconst styles = (theme) => ({\n  buttonRipple: {\n    color: theme.palette.primary.main,\n  },\n  main: {\n    padding: \"1em\",\n    width: \"100%\",\n    justifyContent: \"start\",\n    \"&:hover\": {\n      transform: \"scale(1.01)\",\n      boxShadow: \"rgb(145 158 171 / 24%) 0px 5px 16px 0px\",\n    },\n  },\n});\n\nconst StyledButton = withStyles(styles)((props) => (\n  <ButtonBase\n    className={props.classes.main}\n    TouchRippleProps={{ classes: { root: props.classes.buttonRipple } }}\n    component=\"div\"\n    onClick={props.onClick}\n  >\n    {props.children}\n  </ButtonBase>\n));\n\nfunction MessageTime({ msgTimestamp }) {\n  //states\n  const [msgTime, setMsgTime] = useState(() => {\n    formatMessageTimestamp(msgTimestamp);\n  });\n\n  function formatMessageTimestamp(timestamp) {\n    return moment(timestamp)\n      .fromNow(true)\n      .replace(\n        /a few seconds| hours|a minute| minutes| days|an hour|a day/gi,\n        function (x) {\n          switch (x) {\n            case \" hours\":\n              return \"h\";\n            case \" minutes\":\n              return \"m\";\n            case \" days\":\n              return \"d\";\n            case \" months\":\n              return \"mth\";\n            case \"a few seconds\":\n              return \"Just Now\";\n            case \"a minute\":\n              return \"1m\";\n            case \"an hour\":\n              return \"1h\";\n            case \"a day\":\n              return \"1d\";\n            default:\n              return x;\n          }\n        }\n      );\n  }\n\n  useEffect(() => {\n    setMsgTime(formatMessageTimestamp(msgTimestamp)); //initial run\n    const updateInterval = setInterval(() => {\n      setMsgTime(formatMessageTimestamp(msgTimestamp));\n    }, 60000); //update every minutes\n    return () => {\n      clearInterval(updateInterval);\n    };\n  }, [msgTimestamp]);\n\n  return (\n    <Typography color=\"textSecondary\" style={{ fontSize: \"0.9rem\" }}>\n      {msgTime}\n    </Typography>\n  );\n}\n\nfunction Conversation({ lastMessage, conversationWith }) {\n  const classes = useStyles();\n  const history = useHistory();\n  //context\n  const socket = useContext(SocketContext);\n\n  //states\n  const [userInfo, setUserInfo] = useState({});\n  const [online, setOnline] = useState(false);\n  const [recentMessage, setRecentMessage] = useState(lastMessage);\n  //custom events\n\n  //add listener\n  function onMessageSend(listener) {\n    document.addEventListener(\"sendMessage\", listener);\n  }\n\n  //remove listener\n  function offMessageSend(listener) {\n    document.removeEventListener(\"sendMessage\", listener);\n  }\n\n  async function getUserInfo(username) {\n    const res = await axios.get(`/userinfo/${username}`);\n    setUserInfo(res.data);\n  }\n\n  //open messages\n  function openMessages() {\n    history.push(`/messenger/${conversationWith}`);\n  }\n\n  //useEffects\n\n  useEffect(() => {\n    //updateOnlineState\n    function updateOnlineState(username, state) {\n      username === userInfo?.username && setOnline(state);\n    }\n\n    socket.on(\"onlineStateChange\", updateOnlineState);\n    return () => {\n      socket.off(\"onlineStateChange\", updateOnlineState);\n    };\n  }, [socket, userInfo]);\n\n  useEffect(() => {\n    setOnline(userInfo.online);\n  }, [userInfo.online]);\n\n  useEffect(() => {\n    //updateRecentMessage\n    function updateRecentMessage(msg) {\n      msg.from === conversationWith && setRecentMessage(msg);\n\n      msg.detail?.recipient === conversationWith &&\n        setRecentMessage(msg.detail); //in this case msg is the custom event object which contains the detail property which is the info passed during the dispatch of the event.\n    }\n\n    getUserInfo(conversationWith);\n\n    socket.on(\"receive-message\", updateRecentMessage);\n    onMessageSend(updateRecentMessage);\n\n    return () => {\n      socket.off(\"receive-message\", updateRecentMessage);\n      offMessageSend(updateRecentMessage); //removeEventListener\n    };\n  }, [lastMessage, conversationWith, socket]);\n\n  return (\n    <StyledButton onClick={openMessages}>\n      <StyledBadge\n        isonline={online ? 1 : 0}\n        overlap=\"circle\"\n        badgeContent=\"\"\n        variant=\"dot\"\n        anchorOrigin={{ vertical: \"bottom\", horizontal: \"right\" }}\n      >\n        <Avatar alt={userInfo.username} src={userInfo.profilePic} />\n      </StyledBadge>\n\n      <Box px=\"0.8em\">\n        <Typography\n          color=\"textPrimary\"\n          variant=\"h6\"\n          style={{ fontSize: \"1.1rem\" }}\n        >\n          {userInfo.firstName} {userInfo.lastName}\n        </Typography>\n\n        <Typography\n          color={recentMessage.seen ? \"textSecondary\" : \"textPrimary\"}\n          component=\"p\"\n          noWrap\n          style={{\n            width: \"15.5rem\",\n            fontWeight: recentMessage.seen ? \"normal\" : \"bold\",\n          }}\n        >\n          {recentMessage.from === userInfo.username\n            ? `${userInfo.firstName}: `\n            : \"you: \"}\n\n          {/*message text */}\n          {recentMessage.text ||\n            ((recentMessage.media.images.length >0||\n              recentMessage.media.videos.length >0||\n              recentMessage.media.files.length>0) &&\n              \"sent an attatchment!\")}\n        </Typography>\n      </Box>\n\n      <Box marginLeft=\"auto\" display=\"flex\" alignItems=\"center\">\n        <MessageTime msgTimestamp={recentMessage.timestamp} />\n        <Badge className={classes.messageBadge} color=\"primary\" variant=\"dot\" />\n      </Box>\n    </StyledButton>\n  );\n}\n\nexport default Conversation;\n","import React, { useContext, useEffect } from \"react\";\nimport {\n  Avatar,\n  Box,\n  IconButton,\n  makeStyles,\n  Typography,\n} from \"@material-ui/core\";\nimport { StyledBadge } from \"../SideNavigation/Conversation\";\nimport { Phone, VideoCall } from \"@material-ui/icons\";\nimport { useState } from \"react\";\nimport SocketContext from \"../../../context/SocketContext\";\n\nconst useStyles = makeStyles({\n  header: {\n    position: \"absolute\",\n    backdropFilter: \"blur(5px)\",\n    backgroundColor: \"#ffffffc5\",\n    zIndex: \"10\",\n    width: \"100%\",\n    display: \"flex\",\n    alignItems: \"center\",\n    padding: \"1em 2%\",\n    borderRadius: \"0 0 5px 5px\",\n    boxShadow: \"rgb(145 158 171 / 24%) 0px 8px 16px 0px\",\n  },\n  largeAvatar: {\n    height: \"2.5em\",\n    width: \"2.5em\",\n  },\n  buttonIcon: {\n    margin: \"0 0.5em\",\n  },\n  menu: {\n    marginTop: \"3em\",\n  },\n});\n\nfunction Header({ userInfo }) {\n  const classes = useStyles();\n  //contexts\n  const socket = useContext(SocketContext);\n\n  //states\n  const [online, setOnline] = useState(userInfo.online);\n\n  useEffect(() => {\n    //updateOnlineState\n    function updateOnlineState(username, state) {\n      console.log(\"informed\");\n      username === userInfo?.username && setOnline(state);\n    }\n\n    socket.on(\"onlineStateChange\", updateOnlineState);\n    return () => {\n      socket.off(\"onlineStateChange\", updateOnlineState);\n    };\n  }, [socket, userInfo]);\n\n  useEffect(() => {\n    setOnline(userInfo.online);\n  }, [userInfo.online]);\n\n  function callHandler(callType) {\n    const call = new CustomEvent(\"call\", { detail: { userInfo, callType } });\n    document.dispatchEvent(call);\n  }\n\n  return (\n    <Box className={classes.header}>\n      <StyledBadge\n        variant=\"dot\"\n        badgeContent=\" \"\n        overlap=\"circle\"\n        isonline={online ? 1 : 0}\n        anchorOrigin={{ vertical: \"bottom\", horizontal: \"right\" }}\n      >\n        <Avatar\n          className={classes.largeAvatar}\n          alt={userInfo.username?.toUpperCase()}\n          src={userInfo.profilePic}\n        />\n      </StyledBadge>\n      <Box mx=\"1em\">\n        <Box display=\"flex\" flexDirection=\"column\" justifyContent=\"center\">\n          <Typography variant=\"h6\" color=\"textPrimary\">\n            {userInfo.firstName} {userInfo.lastName}\n          </Typography>\n          <Typography variant=\"subtitle1\" color=\"textPrimary\">\n            {userInfo.username ? `@${userInfo.username}` : \"\"}\n          </Typography>\n        </Box>\n      </Box>\n\n      <Box mx=\"auto\" mt=\"auto\">\n        <Typography variant=\"subtitle1\" color=\"textSecondary\">\n          {online ? \"Active Now\" : \"Offline\"}\n        </Typography>\n      </Box>\n\n      <Box ml=\"auto\" display=\"flex\" flexWrap=\"wrap\">\n        <IconButton\n          className={classes.buttonIcon}\n          onClick={() => {\n            callHandler(\"AudioCall\");\n          }}\n        >\n          <Phone fontSize=\"large\" color=\"primary\" />\n        </IconButton>\n        <IconButton\n          className={classes.buttonIcon}\n          onClick={() => {\n            callHandler(\"VideoCall\");\n          }}\n        >\n          <VideoCall fontSize=\"large\" color=\"primary\" />\n        </IconButton>\n\n        {/* menu btn */}\n        {/* <IconButton\n          className={classes.buttonIcon}\n          aria-controls=\"header-menu\"\n          aria-haspopup=\"true\"\n          onClick={(event) => {\n            setAnchorEl(event.currentTarget);\n          }}\n        >\n          <MoreVert fontSize=\"large\" color=\"primary\" />\n        </IconButton>\n        <Menu\n          id=\"header-menu\"\n          className={classes.menu}\n          anchorEl={anchorEl}\n          keepMounted\n          open={Boolean(anchorEl)}\n          onClose={handleMenuClose}\n        >\n          <MenuItem onClick={handleMenuClose}>Profile</MenuItem>\n          <MenuItem onClick={handleMenuClose}>My account</MenuItem>\n          <MenuItem onClick={handleMenuClose}>Logout</MenuItem>\n        </Menu> */}\n      </Box>\n    </Box>\n  );\n}\n\nexport default Header;\n","import {\n  Box,\n  makeStyles,\n  Typography,\n  useTheme,\n  CircularProgress,\n} from \"@material-ui/core\";\nimport { Description } from \"@material-ui/icons\";\nimport React, { useEffect, useState } from \"react\";\n\nconst useStyles = makeStyles((theme) => ({\n  mediaContainer: {\n    position: \"relative\",\n    display: \"flex\",\n    flexWrap: \"wrap\",\n  },\n  progressBarContainer: {\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    position: \"absolute\",\n    height: \"100%\",\n    width: \"100%\",\n    borderRadius: \"10px\",\n    background: \"#000000b1\",\n  },\n}));\n\nfunction CircularProgressWithLabel(props) {\n  const [progressPercent, setProgressPercent] = useState(0);\n\n  useEffect(() => {\n    function updateProgress(progressEvent) {\n      if (props.msgtempid === progressEvent.detail.msgTempId) {\n        setProgressPercent(progressEvent.detail.amount);\n      }\n    }\n    document.addEventListener(\"uploadProgress\", updateProgress);\n    return () => {\n      document.removeEventListener(\"uploadProgress\", updateProgress);\n    };\n  }, [props.msgtempid]);\n\n  return (\n    <Box position=\"relative\" display=\"inline-flex\">\n      <CircularProgress\n        value={progressPercent}\n        variant=\"determinate\"\n        {...props}\n      />\n      <Box\n        top={0}\n        left={0}\n        bottom={0}\n        right={0}\n        position=\"absolute\"\n        display=\"flex\"\n        alignItems=\"center\"\n        justifyContent=\"center\"\n      >\n        <Typography\n          variant=\"caption\"\n          component=\"div\"\n          style={{ color: \"white\", fontSize: \"1.3em\" }}\n        >{`${progressPercent}%`}</Typography>\n      </Box>\n    </Box>\n  );\n}\n\nfunction Image({ image }) {\n  const srcURL = image.secure_url || URL.createObjectURL(image);\n  useEffect(() => {\n    return () => {\n      URL.revokeObjectURL(srcURL);\n    };\n  }, [srcURL]);\n  return (\n    <img\n      style={{\n        objectFit: \"cover\",\n        margin: \"0.3em\",\n        width: \"calc(100%/3 - 10px)\",\n        flexGrow: \"1\",\n        maxHeight: \"100px\",\n        borderRadius: \"10px\",\n      }}\n      src={srcURL}\n      alt=\"msg-media\"\n    />\n  );\n}\n\nfunction Video({ video }) {\n  const srcURL = video.secure_url || URL.createObjectURL(video);\n  useEffect(() => {\n    return () => {\n      URL.revokeObjectURL(srcURL);\n    };\n  }, [srcURL]);\n  return (\n    <video\n      style={{\n        margin: \"0.3em\",\n        width: \"calc(100%/3 - 10px)\",\n        flexGrow: \"1\",\n        maxHeight: \"20vw\",\n        borderRadius: \"10px\",\n      }}\n      src={srcURL}\n      controls={true}\n    />\n  );\n}\n\nfunction File({ file }) {\n  const theme = useTheme();\n  const classes = makeStyles((theme) => ({\n    fileContainer: {\n      display: \"flex\",\n      alignItems: \"center\",\n    },\n    fileName: {\n      maxWidth: \"25vw\",\n      color: theme.palette.background.default,\n    },\n    fileIcon: {},\n  }))();\n\n  const fileName = file.name;\n  const srcURL = file.secure_url || URL.createObjectURL(file);\n  useEffect(() => {\n    return () => {\n      URL.revokeObjectURL(srcURL);\n    };\n  }, [srcURL]);\n\n  return (\n    <div className={classes.fileContainer}>\n      <Description\n        className={classes.fileIcon}\n        htmlColor={theme.palette.background.paper}\n      />\n      <Typography\n        className={classes.fileName}\n        variant=\"body1\"\n        noWrap\n        component=\"a\"\n        href={srcURL}\n        download={fileName}\n      >\n        {fileName}\n      </Typography>\n    </div>\n  );\n}\n\nfunction MediaContent({ media, isUploading, msgTempId }) {\n  const classes = useStyles();\n\n  return (\n    <Box className={classes.mediaContainer}>\n      {isUploading && (\n        <div className={classes.progressBarContainer}>\n          <CircularProgressWithLabel size=\"5em\" msgtempid={msgTempId} />\n        </div>\n      )}\n      {media.images.map((image, index) => {\n        return (\n          <Image\n            key={index}\n            className={classes.image}\n            image={image}\n            alt=\"msg-media\"\n          />\n        );\n      })}\n      {media.videos.map((video, index) => {\n        return <Video key={index} video={video} />;\n      })}\n      {media.files.map((file, index) => {\n        return (\n          <File key={index} file={file} className={classes.fileContainer} />\n        );\n      })}\n    </Box>\n  );\n}\n\nexport default MediaContent;\n","import {\n  Avatar,\n  Box,\n  makeStyles,\n  Typography,\n  useTheme,\n} from \"@material-ui/core\";\nimport moment from \"moment\";\nimport React, { useEffect, useState } from \"react\";\nimport MediaContent from \"./MediaContent\";\n\nconst useStyles = makeStyles((theme) => ({\n  avatar: {\n    height: \"2em\",\n    width: \"2em\",\n  },\n  timestamp: {\n    marginTop: \"4em\",\n  },\n}));\n\nfunction Message({ prevMsgTimestamp, msg, otherEndUser }) {\n  const theme = useTheme();\n  const classes = useStyles();\n  const [message, setMessage] = useState(msg);\n\n  useEffect(() => {\n    if (msg.mediaMessageResponse) {\n      msg.mediaMessageResponse.then((response) => {\n        setMessage(response.data);\n      });\n    }\n  }, [msg]);\n\n  const msgDirection = msg.from === otherEndUser.username ? \"from\" : \"to\";\n\n  function showTimestamp() {\n    const day = 8640000; //day in milliseconds\n    const halfHour = 30 * 60 * 1000; //30 min in milliseconds (30min*60sec*100ms)\n    const timeDifferenceBetweenMsg = moment(msg.timestamp).diff(\n      moment(prevMsgTimestamp)\n    );\n    const timeDifferenceFromNow = moment().diff(moment(msg.timestamp));\n\n    switch (true) {\n      case timeDifferenceBetweenMsg < halfHour:\n        return false;\n      case timeDifferenceFromNow < halfHour:\n        return moment(msg.timestamp).fromNow();\n      case timeDifferenceFromNow < day:\n        return moment(msg.timestamp).format(\"hh:mm A\");\n      case timeDifferenceFromNow < 7 * day:\n        return `${moment(msg.timestamp).format(\"ddd\")} at ${moment(\n          msg.timestamp\n        ).format(\"hh:mm A\")}`;\n      case timeDifferenceFromNow < 365 * day:\n        return `${moment(msg.timestamp).format(\"MMM D\")} at ${moment(\n          msg.timestamp\n        ).format(\"hh:mm A\")}`;\n      default:\n        return `${moment(msg.timestamp).format(\"D MMM, YYYY\")} at ${moment(\n          msg.timestamp\n        ).format(\"hh:mm A\")}`;\n    }\n  }\n\n  function getBorderRadius(msgDirection) {\n    if (msgDirection === \"to\") {\n      return \"20px 0px 20px 20px\";\n    }\n    return \"0px 20px 20px 20px\";\n  }\n  function getColor(msgDirection) {\n    if (msgDirection === \"to\") {\n      return {\n        background: theme.palette.primary.main,\n        text: theme.palette.getContrastText(theme.palette.primary.main),\n      };\n    }\n    return theme.palette.background.paper;\n  }\n  return (\n    <Box my=\"1em\">\n      {showTimestamp() ? (\n        <Typography\n          className={classes.timestamp}\n          variant=\"subtitle1\"\n          color=\"textSecondary\"\n          align=\"center\"\n        >\n          {showTimestamp()}\n        </Typography>\n      ) : null}\n\n      <Box\n        display=\"flex\"\n        justifyContent={msgDirection === \"to\" ? \"flex-end\" : \"flex-start\"}\n        mx=\"1em\"\n        my=\"0.5em\"\n        alignItems=\"baseline\"\n      >\n        {msgDirection === \"from\" && (\n          <Avatar\n            className={classes.avatar}\n            alt={otherEndUser.username.toUpperCase()}\n            src={otherEndUser.profilePic}\n          />\n        )}\n\n        <Box\n          maxWidth=\"60%\"\n          borderRadius={getBorderRadius(msgDirection)}\n          boxShadow=\"rgb(145 158 171 / 24%) 0px 8px 16px 0px\"\n          bgcolor={getColor(msgDirection).background}\n          mx={msgDirection === \"from\" ? \"1em\" : 0}\n          p=\"1em\"\n        >\n          <Typography\n            component=\"p\"\n            variant=\"body1\"\n            style={{\n              fontSize: \"1.1rem\",\n              wordBreak: \"break-word\",\n              overflowWrap: \"break-word\",\n              wordWrap: \"break-word\",\n              color:\n                msgDirection === \"to\"\n                  ? getColor(msgDirection).text\n                  : theme.palette.text.primary,\n            }}\n          >\n            {msg.text}\n          </Typography>\n          {(message.media.images.length > 0 ||\n            message.media.videos.length > 0 ||\n            message.media.files.length > 0) && (\n            <MediaContent\n              media={message.media}\n              isUploading={!!message.mediaMessageResponse}\n              msgTempId={message.msgTempId}\n            />\n          )}\n        </Box>\n      </Box>\n    </Box>\n  );\n}\n\nexport default Message;\n","import { createContext } from \"react\";\n\nconst LoggedInUserContext = createContext({});\n\nexport default LoggedInUserContext;\n","import {\n  Box,\n  IconButton,\n  TextField,\n  makeStyles,\n  Typography,\n  useTheme,\n} from \"@material-ui/core\";\nimport {\n  Attachment,\n  Close,\n  Description,\n  ImageRounded,\n  Send,\n} from \"@material-ui/icons\";\nimport React, { useContext, useEffect, useState } from \"react\";\nimport { useParams } from \"react-router\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport SocketContext from \"../../../context/SocketContext\";\nimport videoIconOverlay from \"../../../assets/videoIconOverlay.png\";\nimport axios from \"../../../api/index\";\nimport LoggedInUserContext from \"../../../context/LoggedInUserContext\";\n\nconst useStyles = makeStyles({\n  root: {\n    width: \"60%\",\n    minWidth: \"300px\",\n    marginTop: \"auto\",\n    borderRadius: \"20px\",\n    margin: \"1.5em auto\",\n    padding: \"1em\",\n    boxShadow: \"rgb(145 158 171 / 24%) 0px 8px 16px 0px\",\n  },\n  form: {\n    display: \"flex\",\n    alignItems: \"center\",\n  },\n  selectedItemsContainer: {\n    padding: \"0.5em\",\n    maxHeight: \"25vh\",\n    overflowY: \"scroll\",\n  },\n  selectedMediasContainer: {\n    display: \"flex\",\n    flexWrap: \"wrap\",\n  },\n});\n\nfunction seperateImagesAndVideos(medias) {\n  const images = [];\n  const videos = [];\n  for (const media of medias) {\n    const type = media.type.split(\"/\")[0];\n    type === \"image\" && images.push(media);\n    type === \"video\" && videos.push(media);\n  }\n  if (images.length === 0 && videos.length === 0) return [null, null];\n  return [images, videos];\n}\n\nclass Message {\n  constructor({\n    from = \"\",\n    recipient,\n    images = [],\n    videos = [],\n    links = [],\n    files = [],\n    text = \"\",\n  }) {\n    this.tempMsgId = uuidv4();\n    this.from = from;\n    this.recipient = recipient;\n    this.media = {\n      images: images,\n      videos: videos,\n      links: links,\n      files: files,\n    };\n    this.text = text;\n    this.timestamp = new Date();\n  }\n}\n\nfunction MessageInput({ updateMessages }) {\n  const classes = useStyles();\n  const Socket = useContext(SocketContext);\n  const loggedInUser = useContext(LoggedInUserContext);\n  const recipient = useParams().username;\n\n  //states\n  const [textFieldValue, setTextFieldValue] = useState(\"\");\n  const [selectedImages, setSelectedImages] = useState([]);\n  const [selectedVideos, setSelectedVideos] = useState([]);\n  const [selectedFiles, setSelectedFiles] = useState([]);\n  const [fileInputError, setFileInputError] = useState(false);\n  const [typing, setTyping] = useState(\"\");\n\n  //custom events\n  function dispatchSendMessage(message) {\n    const sendMessage = new CustomEvent(\"sendMessage\", { detail: message });\n    document.dispatchEvent(sendMessage); //firing sendMessage event.\n  }\n  function dispatchUploadProgress(progress) {\n    const uploadProgress = new CustomEvent(\"uploadProgress\", {\n      detail: progress,\n    }); //{amount:Number,msgTempId}\n    document.dispatchEvent(uploadProgress); //firing sendMessage event.\n  }\n\n  useEffect(() => {\n    typing\n      ? Socket.emit(\"typing\", recipient, \"start\")\n      : Socket.emit(\"typing\", recipient, \"stop\");\n  }, [typing, recipient, Socket]);\n\n  useEffect(() => {\n    //reset text field when the user is changed\n    setTextFieldValue(\"\");\n  }, [recipient]);\n\n  function handleTextFieldChange(e) {\n    e.target.value ? setTyping(true) : setTyping(false);\n    setTextFieldValue(e.target.value);\n  }\n\n  async function sendMessage(e) {\n    e.preventDefault();\n\n    //check if message input contains any content\n    if (\n      !(\n        textFieldValue ||\n        selectedImages.length > 0 ||\n        selectedVideos.length > 0 ||\n        selectedFiles.length > 0\n      )\n    ) {\n      return;\n    }\n\n    if (\n      selectedImages.length ||\n      selectedVideos.length ||\n      selectedFiles.length\n    ) {\n      //create new Message object for clientSide\n      const messageForClientSide = new Message({\n        from: loggedInUser.username,\n        recipient,\n        images: selectedImages,\n        videos: selectedVideos,\n        links: [],\n        files: selectedFiles,\n        text: textFieldValue,\n      });\n\n      //setting up formData\n      const formData = new FormData();\n      formData.append(\"recipient\", recipient);\n      formData.append(\"text\", textFieldValue);\n\n      selectedImages.forEach((image) => formData.append(\"images\", image));\n      selectedVideos.forEach((video) => formData.append(\"videos\", video));\n      selectedFiles.forEach((file) => formData.append(\"files\", file));\n\n      const config = {\n        onUploadProgress: function (progressEvent) {\n          var percentCompleted = Math.round(\n            (progressEvent.loaded * 100) / progressEvent.total\n          );\n          dispatchUploadProgress({\n            amount: percentCompleted,\n            tempMsgId: messageForClientSide.tempMsgId,\n          });\n        },\n      };\n\n      /*\n        getting response promise which will be added to clientSide message\n        so that when response is received it can be used inside the message component\n        to update the message.\n      */\n      const mediaMessageResponse = axios.post(\n        \"/sendMediaMessage\",\n        formData,\n        config\n      );\n\n      mediaMessageResponse.then((response) => {\n        const messageId = response.data._id;\n        const recipientId = response.data.recipientId;\n        Socket.emit(\"gotMediaMessaageResponse\", messageId, recipientId);\n      });\n\n      messageForClientSide.mediaMessageResponse = mediaMessageResponse;\n\n      dispatchSendMessage(messageForClientSide);\n      updateMessages(messageForClientSide, recipient);\n\n      //reset states\n      setTextFieldValue(\"\");\n      setTyping(false);\n      setSelectedImages([]);\n      setSelectedVideos([]);\n      setSelectedFiles([]);\n    } else {\n      const message = new Message({\n        recipient,\n        text: textFieldValue,\n      });\n      setTextFieldValue(\"\");\n      setTyping(false);\n      updateMessages(message, recipient);\n      Socket.emit(\"send-message\", message);\n      dispatchSendMessage(message);\n    }\n  }\n\n  async function handleMediaInputChange(e) {\n    const [images, videos] = seperateImagesAndVideos(e.target.files);\n    if (!(images || videos)) {\n      setFileInputError(true);\n    } else {\n      setSelectedImages(images);\n      setSelectedVideos(videos);\n    }\n    e.target.value = \"\";\n  }\n\n  function handleFilesInputChange(e) {\n    setSelectedFiles([...e.target.files]);\n    e.target.value = \"\";\n  }\n\n  function removeSelectedImage(index) {\n    setSelectedImages((prevImages) => {\n      prevImages.splice(index, 1);\n      return [...prevImages];\n    });\n  }\n  function removeSelectedVideo(index) {\n    setSelectedVideos((prevVideos) => {\n      prevVideos.splice(index, 1);\n      return [...prevVideos];\n    });\n  }\n\n  function removeSelectedFile(index) {\n    setSelectedFiles((prevFiles) => {\n      prevFiles.splice(index, 1);\n      return [...prevFiles];\n    });\n  }\n\n  return (\n    <Box className={classes.root}>\n      {fileInputError && (\n        <Typography variant=\"body2\" color=\"error\" align=\"center\">\n          Invalid file selected!\n        </Typography>\n      )}\n      <Box className={classes.selectedItemsContainer}>\n        {(selectedImages.length > 0 || selectedVideos.length > 0) && (\n          <Box className={classes.selectedMediasContainer}>\n            {selectedImages.map((image, index) => {\n              return (\n                <SelectedMediasPreviewer\n                  media={image}\n                  key={index}\n                  removeSelectedMedia={removeSelectedImage}\n                  index={index}\n                />\n              );\n            })}\n            {selectedVideos.map((Video, index) => {\n              return (\n                <SelectedMediasPreviewer\n                  media={Video}\n                  key={index}\n                  removeSelectedMedia={removeSelectedVideo}\n                  index={index}\n                />\n              );\n            })}\n          </Box>\n        )}\n\n        {selectedFiles.length > 0 && (\n          <Box>\n            {selectedFiles.map((file, index) => {\n              return (\n                <SelectedFilesPreviewer\n                  file={file}\n                  key={index}\n                  removeSelectedFile={removeSelectedFile}\n                  index={index}\n                />\n              );\n            })}\n          </Box>\n        )}\n      </Box>\n\n      <form className={classes.form} onSubmit={sendMessage}>\n        <input\n          accept=\"image/*,video/*\"\n          style={{ display: \"none\" }}\n          id=\"image-btn\"\n          type=\"file\"\n          multiple\n          onChange={handleMediaInputChange}\n        />\n        <IconButton\n          variant=\"contained\"\n          component=\"label\"\n          htmlFor=\"image-btn\"\n          color=\"primary\"\n        >\n          <ImageRounded color=\"primary\" />\n        </IconButton>\n        <input\n          accept=\".pdf,.txt,.zip,.docx,.xml\"\n          style={{ display: \"none\" }}\n          id=\"attachment-btn\"\n          type=\"file\"\n          multiple\n          onChange={handleFilesInputChange}\n        />\n        <IconButton\n          variant=\"contained\"\n          component=\"label\"\n          htmlFor=\"attachment-btn\"\n          color=\"primary\"\n        >\n          <Attachment color=\"primary\" />\n        </IconButton>\n        <TextField\n          fullWidth\n          placeholder=\"Type something to send...\"\n          autoFocus\n          aria-label=\"message input box\"\n          value={textFieldValue}\n          onChange={handleTextFieldChange}\n        />\n        <IconButton type=\"submit\">\n          <Send color=\"primary\" />\n        </IconButton>\n      </form>\n    </Box>\n  );\n}\n\nconst useStyles_selectedMediaPreviewer = makeStyles({\n  previewContainer: {\n    position: \"relative\",\n    width: \"40px\",\n    height: \"40px\",\n    marginRight: \"0.8em\",\n    marginBottom: \"0.8em\",\n  },\n  selectedImage: {\n    width: \"100%\",\n    height: \"100%\",\n    objectFit: \"cover\",\n    borderRadius: \"20%\",\n  },\n  removeBtn: {\n    all: \"unset\",\n    position: \"absolute\",\n    top: \"-6px\",\n    right: \"-6px\",\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    height: \"18px\",\n    width: \"18px\",\n    textAlign: \"center\",\n    fontSize: \"12px\",\n    fontWeight: \"bold\",\n    backgroundColor: \"#00000088\",\n    borderRadius: \"50%\",\n    zIndex: \"100\",\n    \"&:hover\": {\n      transform: \"scale(1.1)\",\n    },\n    \"&:active\": {\n      transform: \"scale(1)\",\n    },\n  },\n  videoContainer: {\n    position: \"relative\",\n    width: \"40px\",\n    height: \"40px\",\n    marginRight: \"0.8em\",\n    marginBottom: \"0.8em\",\n    \"&>video\": {\n      height: \"100%\",\n      width: \"100%\",\n      objectFit: \"cover\",\n      borderRadius: \"20%\",\n    },\n    \"&::before\": {\n      content: \"''\",\n      backgroundImage: `url(${videoIconOverlay})`,\n      backgroundPosition: \"center\",\n      backgroundSize: \"contain\",\n      height: \"100%\",\n      width: \"100%\",\n      position: \"absolute\",\n      zIndex: \"50\",\n    },\n  },\n});\n\nfunction SelectedMediasPreviewer({ media, removeSelectedMedia, index }) {\n  const classes = useStyles_selectedMediaPreviewer();\n  const mediaObjectURL = URL.createObjectURL(media);\n\n  return (\n    <div className={classes.previewContainer}>\n      <button\n        className={classes.removeBtn}\n        onClick={() => {\n          URL.revokeObjectURL(mediaObjectURL);\n          removeSelectedMedia(index);\n        }}\n      >\n        <Close htmlColor=\"white\" fontSize=\"inherit\" />\n      </button>\n\n      {media.type.split(\"/\")[0] === \"image\" ? (\n        <img className={classes.selectedImage} src={mediaObjectURL} alt=\"img\" />\n      ) : (\n        <div className={classes.videoContainer}>\n          <video src={mediaObjectURL} />\n        </div>\n      )}\n    </div>\n  );\n}\n\nconst useStyles_selectedFilePreviewer = makeStyles({\n  selectedFilePreviewContainer: {\n    display: \"flex\",\n    alignItems: \"center\",\n    padding: \"1em\",\n  },\n  fileIcon: {\n    marginRight: \"0.3em\",\n  },\n  fileName: {\n    width: \"20vw\",\n  },\n  removeBtn: {\n    all: \"unset\",\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    height: \"18px\",\n    width: \"18px\",\n    margin: \"auto 0.5em\",\n    textAlign: \"center\",\n    fontSize: \"12px\",\n    fontWeight: \"bold\",\n    backgroundColor: \"#00000088\",\n    borderRadius: \"50%\",\n    \"&:hover\": {\n      transform: \"scale(1.1)\",\n    },\n    \"&:active\": {\n      transform: \"scale(1)\",\n    },\n  },\n});\n\nfunction SelectedFilesPreviewer({ file, removeSelectedFile, index }) {\n  const theme = useTheme();\n  const classes = useStyles_selectedFilePreviewer();\n  return (\n    <div className={classes.selectedFilePreviewContainer}>\n      <Description\n        className={classes.fileIcon}\n        htmlColor={theme.palette.primary.main}\n      />\n      <Typography className={classes.fileName} variant=\"body1\" noWrap>\n        {file.name}\n      </Typography>\n      <button\n        className={classes.removeBtn}\n        onClick={() => {\n          removeSelectedFile(index);\n        }}\n      >\n        <Close htmlColor=\"white\" fontSize=\"inherit\" />\n      </button>\n    </div>\n  );\n}\n\nexport default MessageInput;\n","export default \"data:image/png;base64,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\"","import { Box, makeStyles } from \"@material-ui/core\";\nimport React from \"react\";\n\nconst useStyles = makeStyles({\n  container: {\n    display: \"flex\",\n    width: \"fit-content\",\n    margin: \"1em\",\n    padding: \"0.5em\",\n    borderRadius: \"10px 10px 10px 0\",\n  },\n  dot: {\n    height: \"0.4em\",\n    width: \"0.4em\",\n    margin: \"0.2em\",\n    borderRadius: \"50%\",\n    backgroundColor: \"#00000055\",\n    \"&:nth-child(1)\": {\n      animation: \"$typing 600ms 200ms ease alternate backwards infinite\",\n    },\n    \"&:nth-child(2)\": {\n      animation: \"$typing 600ms 400ms ease alternate backwards infinite\",\n    },\n    \"&:nth-child(3)\": {\n      animation: \"$typing 600ms 600ms ease alternate backwards infinite\",\n    },\n  },\n  \"@keyframes typing\": {\n    from: {\n      opacity: \"0.3\",\n      transform: \"translateY(-50%) scale(1.1)\",\n    },\n    to: {\n      opacity: \"1\",\n    },\n  },\n});\n\nfunction TypingIndicator() {\n  const classes = useStyles();\n  return (\n    <Box className={classes.container} boxShadow={5}>\n      <div className={classes.dot}></div>\n      <div className={classes.dot}></div>\n      <div className={classes.dot}></div>\n    </Box>\n  );\n}\n\nexport default TypingIndicator;\n","import React, { useRef, useEffect, useContext, useState } from \"react\";\nimport { Box } from \"@material-ui/core\";\nimport Message from \"../ChatSection/Message\";\nimport SocketContext from \"../../../context/SocketContext\";\nimport MessageInput from \"./MessageInput\";\nimport axios from \"../../../api\";\nimport TypingIndicator from \"./TypingIndicator\";\n\nfunction MessagesContainer({ otherEndUser }) {\n  const messageContainer = useRef();\n\n  //contexts\n  const socket = useContext(SocketContext);\n  //states\n  const [messages, setMessages] = useState([]);\n  const [typing, setTyping] = useState({ state: \"\", user: \"\" });\n\n  function updateMessages(msg, otherSide) {\n    if (msg.from === otherSide || msg.recipient === otherSide) {\n      setMessages((prev) => {\n        return [...prev, msg];\n      });\n    }\n  }\n\n  async function getMessages(otherSide) {\n    if (!otherSide) return;\n    const res = await axios.get(`/messages/${otherSide}`);\n    const messages = res.data.messages;\n    messages &&\n      setMessages((prev) => {\n        return [...prev, ...messages];\n      });\n  }\n\n  function resetMessages() {\n    setMessages([]); //clear all messages\n  }\n\n  useEffect(() => {\n    //updateMessages wrapper\n    function addMessage(msg) {\n      updateMessages(msg, otherEndUser.username);\n    }\n\n    socket.on(\"receive-message\", addMessage); //this will receive msg and pass it into addMessage function\n\n    return () => {\n      socket.off(\"receive-message\", addMessage);\n    };\n  }, [socket, otherEndUser]);\n\n  useEffect(() => {\n    //scrolling to the buttom after the message is received.\n    messageContainer.current.scrollTo(0, messageContainer.current.scrollHeight);\n  }, [messages, typing]);\n\n  useEffect(() => {\n    otherEndUser && getMessages(otherEndUser.username);\n    socket.on(\"typing\", (state, user) => {\n      if (user === otherEndUser.username) {\n        setTyping({ state, user });\n      }\n    });\n\n    return () => {\n      socket.removeAllListeners(\"typing\");\n\n      resetMessages();\n    }; //clear all messages on unmount.\n  }, [otherEndUser, socket]);\n\n  return (\n    <>\n      <Box\n        ref={messageContainer}\n        style={{\n          marginTop: \"5em\",\n          overflowY: \"scroll\",\n        }}\n      >\n        {messages.map((msg, index) => {\n          return (\n            <Message\n              key={msg._id || msg.tempMsgId}\n              msg={msg}\n              prevMsgTimestamp={messages[index - 1]?.timestamp || 0}\n              otherEndUser={otherEndUser}\n            />\n          );\n        })}\n        {typing.state === \"start\" && typing.user === otherEndUser.username ? (\n          <TypingIndicator />\n        ) : null}\n      </Box>\n      <MessageInput updateMessages={updateMessages} />\n    </>\n  );\n}\n\nexport default MessagesContainer;\n","import { Box, Typography, useTheme } from \"@material-ui/core\";\nimport React, { useEffect, useState } from \"react\";\nimport Header from \"./Header\";\nimport MessagesContainer from \"./MessagesContainer\";\nimport { useParams } from \"react-router\";\nimport axios from \"../../../api\";\n\nfunction ChatSection() {\n  const theme = useTheme();\n  const { username } = useParams();\n  const [userInfo, setUserInfo] = useState({});\n\n  useEffect(() => {\n    if (username) {\n      (async () => {\n        const res = await axios.get(`userinfo/${username}`);\n        setUserInfo(res.data);\n      })();\n    }\n  }, [username]);\n\n  if (!username) {\n    return (\n      <Box\n        display=\"flex\"\n        flexGrow=\"1\"\n        justifyContent=\"center\"\n        alignItems=\"center\"\n      >\n        <Typography variant=\"h6\" align=\"center\" color=\"textSecondary\">\n          Open Chat To Start Messenging.\n        </Typography>\n      </Box>\n    );\n  }\n  return (\n    <Box\n      width={1}\n      style={{ height: \"100vh\" }}\n      display=\"flex\"\n      flexDirection=\"column\"\n      position=\"relative\"\n      bgcolor={theme.palette.background.default}\n    >\n      <Header userInfo={userInfo} />\n      <MessagesContainer otherEndUser={userInfo} />\n    </Box>\n  );\n}\n\nexport default ChatSection;\n","import React, { useState } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport {\n  Box,\n  CircularProgress,\n  IconButton,\n  makeStyles,\n  Typography,\n} from \"@material-ui/core\";\nimport { PowerSettingsNew } from \"@material-ui/icons\";\nimport axios from \"../../../api\";\n\nconst useStyles = makeStyles({\n  logoutText: {\n    fontSize: \"0.9rem\",\n    fontWeight: \"bold\",\n  },\n});\n\nfunction LogoutButton() {\n  const classes = useStyles();\n  const [loggedIn, setLoggedIn] = useState(true);\n  const [loggingOut, setLoggingOut] = useState(false);\n\n  async function logout(type) {\n    try {\n      setLoggingOut(true);\n      const res = await axios.delete(\"/logout\", {\n        headers: { LogoutType: type },\n      });\n      if (res.status === 200) {\n        window.localStorage.clear();\n        console.log(\"cleared the localStorage\");\n        setLoggedIn(false);\n      }\n    } catch (err) {\n      setLoggingOut(false);\n    }\n  }\n\n  if (!loggedIn) {\n    return (\n      <Redirect\n        to={{\n          pathname: \"/login\",\n          state: {\n            alert: { type: \"success\", message: \"Succesfully LoggedOut!\" },\n          },\n        }}\n      />\n    );\n  }\n  return (\n    <>\n      <Box display=\"flex\" alignItems=\"center\">\n        <Typography className={classes.logoutText} color=\"textSecondary\">\n          Logout\n        </Typography>\n        <IconButton onClick={logout} size=\"small\" aria-label=\"logout\">\n          {loggingOut ? <CircularProgress size=\"1em\" /> : <PowerSettingsNew />}\n        </IconButton>\n      </Box>\n    </>\n  );\n}\n\nexport default LogoutButton;\n","import React from \"react\";\nimport { Box, Avatar, Typography, makeStyles } from \"@material-ui/core\";\nimport { useContext } from \"react\";\nimport LoggedInUserContext from \"../../../context/LoggedInUserContext\";\n\nconst useStyles = makeStyles({\n  username: {\n    fontWeight: \"bolder\",\n    marginLeft: \"0.5em\",\n  },\n  userAvatar: {\n    \"&:hover\": {\n      cursor: \"pointer\",\n    },\n  },\n});\n\nfunction UserWithAvatar({ setShowChangeProfilePicture }) {\n  const classes = useStyles();\n  const { LoggedInUser } = useContext(LoggedInUserContext);\n  return (\n    <Box display=\"flex\" alignItems=\"center\">\n      <Avatar\n        onClick={() => {\n          setShowChangeProfilePicture(true);\n        }}\n        className={classes.userAvatar}\n        alt={LoggedInUser.username}\n        src={LoggedInUser.profilePic}\n      />\n      <Typography className={classes.username} variant=\"h6\" color=\"textPrimary\">\n        {LoggedInUser.firstName} {LoggedInUser.lastName}\n      </Typography>\n    </Box>\n  );\n}\n\nexport default UserWithAvatar;\n","import {\n  Avatar,\n  Box,\n  Button,\n  ButtonBase,\n  CircularProgress,\n  IconButton,\n  makeStyles,\n  Popover,\n  Typography,\n  withStyles,\n} from \"@material-ui/core\";\nimport { blue } from \"@material-ui/core/colors\";\nimport { Clear, Done, PersonAdd } from \"@material-ui/icons\";\nimport axios from \"../../../api\";\nimport React, { useContext, useEffect, useState } from \"react\";\nimport { StyledBadge } from \"./Conversation\";\nimport { useHistory } from \"react-router-dom\";\nimport SocketContext from \"../../../context/SocketContext\";\nimport { useTheme } from \"@material-ui/styles\";\n\nconst useStyles = makeStyles({\n  button: {\n    display: \"flex\",\n    padding: \"1em\",\n    alignItems: \"center\",\n  },\n});\n\nconst styles = (theme) => ({\n  buttonRipple: {\n    color: theme.palette.primary.main,\n  },\n  main: {\n    padding: \"0.5em\",\n    width: \"100%\",\n    justifyContent: \"start\",\n    \"&:hover\": {\n      transform: \"scale(1.01)\",\n      boxShadow: \"rgb(145 158 171 / 24%) 0px 5px 16px 0px\",\n    },\n  },\n});\n\nconst StyledButton = withStyles(styles)((props) => (\n  <ButtonBase\n    onClick={props.onClick}\n    className={props.classes.main}\n    TouchRippleProps={{ classes: { root: props.classes.buttonRipple } }}\n    component=\"div\"\n  >\n    {props.children}\n  </ButtonBase>\n));\n\nfunction MutualFriendInformation({ person }) {\n  const theme = useTheme();\n  let info = \"\";\n  switch (true) {\n    case person.mutualFriends.length === 0:\n      return null;\n    case person.mutualFriends.length === 1:\n      info = `${person.mutualFriends[0]} is mutual`;\n      break;\n    case person.mutualFriends.length === 2:\n      info = `${person.mutualFriends[0]} and ${person.mutualFriends[1]} are mutual`;\n      break;\n    default:\n      info = `${person.mutualFriends.length} mutual friends including ${person.mutualFriends[0]} and ${person.mutualFriends[1]}`;\n      break;\n  }\n\n  return (\n    <Typography variant=\"body2\" style={{ color: theme.palette.grey[700] }}>\n      {info}\n    </Typography>\n  );\n}\n\nfunction People({ person, type, update }) {\n  const history = useHistory();\n  const classes = useStyles();\n\n  //context\n  const socket = useContext(SocketContext);\n\n  //states\n  const [online, setOnline] = useState(person.online);\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    //updateOnlineState\n    function updateOnlineState(username, state) {\n      username === person?.username && setOnline(state);\n    }\n\n    socket.on(\"onlineStateChange\", updateOnlineState);\n    return () => {\n      socket.off(\"onlineStateChange\", updateOnlineState);\n    };\n  }, [socket, person]);\n\n  //open messages\n  function openMessages() {\n    if (type === \"friend\") return history.push(`/messenger/${person.username}`);\n  }\n\n  //handleFriendRequest\n  /**\n   *\n   * @param {string} type - type of friend request actions\n   * accepted values are: \"send\" , \"accept\" , \"reject\" , \"cancel\" , \"unfriend\"\n   *\n   */\n  async function handleFriendRequest(type) {\n    try {\n      \n      setTimeout(() => {\n        setLoading(true);\n      }, 0);\n\n      await axios.post(\"/friendrequest\", {\n        username: person.username,\n        type,\n      });\n\n      switch (type) {\n        case \"send\":\n          person.isRequestPending = true;\n          break;\n        case \"accept\":\n          person.isFriend = true;\n          break;\n        case \"reject\":\n          person.hasSentFriendRequest = false;\n          break;\n        case \"cancel\":\n          person.isRequestPending = false;\n          break;\n        case \"unfriend\":\n          person.isFriend = false;\n          break;\n        default:\n          break;\n      }\n      setLoading(false);\n      update();\n    } catch (err) {\n      console.log(err);\n    }\n  }\n\n  //button for friend type\n  function FriendUnFriendBtn({ unFriend }) {\n    const theme = useTheme();\n    const [anchorEl, setAnchorEl] = React.useState(null);\n\n    const handleClick = (event) => {\n      setAnchorEl(event.currentTarget);\n    };\n\n    const handleClose = () => {\n      setAnchorEl(null);\n    };\n\n    const open = Boolean(anchorEl);\n    const id = open ? \"unfriend\" : undefined;\n\n    return (\n      <>\n        <Button\n          aria-describedby={id}\n          variant=\"outlined\"\n          color=\"primary\"\n          onClick={handleClick}\n          style={{ marginLeft: \"auto\", textTransform: \"capitalize\" }}\n        >\n          Friends\n        </Button>\n        <Popover\n          id={id}\n          open={open}\n          anchorEl={anchorEl}\n          onClose={handleClose}\n          anchorOrigin={{\n            vertical: \"bottom\",\n            horizontal: \"center\",\n          }}\n          transformOrigin={{\n            vertical: \"top\",\n            horizontal: \"center\",\n          }}\n        >\n          <Button\n            variant=\"outlined\"\n            onClick={unFriend}\n            style={{\n              marginLeft: \"auto\",\n              textTransform: \"capitalize\",\n              color: theme.palette.grey[700],\n            }}\n          >\n            Unfriend\n          </Button>\n        </Popover>\n      </>\n    );\n  }\n\n  function LoadingButton() {\n    return (\n      <Button variant=\"outlined\" color=\"primary\" style={{ marginLeft: \"auto\" }}>\n        <CircularProgress size={20} />\n      </Button>\n    );\n  }\n\n  function getButton(type) {\n    switch (type) {\n      case \"friendRequest\":\n        return (\n          <Box ml=\"auto\" display=\"flex\">\n            {/* accept Button */}\n            <IconButton onClick={() => handleFriendRequest(\"accept\")}>\n              <Done htmlColor={blue[600]} />\n            </IconButton>\n\n            {/* reject Button */}\n            <IconButton onClick={() => handleFriendRequest(\"reject\")}>\n              <Clear color=\"error\" />\n            </IconButton>\n          </Box>\n        );\n      case \"unknown\": //not friend\n        return (\n          // add friend button\n          <IconButton\n            onClick={() => handleFriendRequest(\"send\")}\n            style={{ marginLeft: \"auto\" }}\n          >\n            <PersonAdd />\n          </IconButton>\n        );\n      case \"pendingRequest\":\n        return (\n          // cancel request button\n          <Button\n            variant=\"outlined\"\n            color=\"primary\"\n            onClick={() => handleFriendRequest(\"cancel\")}\n            style={{ marginLeft: \"auto\", textTransform: \"capitalize\" }}\n          >\n            Cancel\n          </Button>\n        );\n      case \"friend\":\n        return (\n          <FriendUnFriendBtn unFriend={() => handleFriendRequest(\"unfriend\")} />\n        );\n      default:\n        return null;\n    }\n  }\n\n  return (\n    <StyledButton\n      onClick={openMessages}\n      className={classes.button}\n      component=\"div\"\n    >\n      <StyledBadge\n        variant=\"dot\"\n        overlap=\"circle\"\n        anchorOrigin={{ vertical: \"bottom\", horizontal: \"right\" }}\n        badgeContent=\" \"\n        isonline={online ? 1 : 0}\n      >\n        <Avatar alt={person.firstName} src={person.profilePic} />\n      </StyledBadge>\n      <Box ml={2}>\n        <Typography\n          variant=\"h6\"\n          style={{ fontSize: \"1rem\" }}\n          color=\"textPrimary\"\n        >\n          {person.firstName} {person.lastName}\n        </Typography>\n        {/* mutual friends information*/}\n        {type ? <MutualFriendInformation person={person} /> : null}\n      </Box>\n      {loading ? <LoadingButton /> : getButton(type)}\n    </StyledButton>\n  );\n}\n\nexport default People;\n","import axios from \"../../../api\";\nimport React, { useState, useEffect } from \"react\";\nimport { Box, Typography } from \"@material-ui/core\";\nimport People from \"./People\";\n\nfunction FriendList() {\n  const [friendList, setFriendList] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  async function update() {\n    const res = await axios.get(\"/friendlist\");\n    setFriendList(res.data);\n    setLoading(false);\n  }\n\n  useEffect(() => {\n    update();\n  }, []);\n\n  return (\n    <div\n      style={{\n        width: \"100%\",\n        overflowY: \"scroll\",\n        overflowX: \"hidden\",\n      }}\n    >\n      {!loading && friendList.length === 0 && (\n        <Box p={5}>\n          <Typography variant=\"body1\" align=\"center\" color=\"textSecondary\">\n            You Have No Friends. Make Some to Start Messenging.\n          </Typography>\n        </Box>\n      )}\n      {!loading &&\n        friendList.length !== 0 &&\n        friendList.map((person) => {\n          return (\n            <People\n              key={person._id}\n              person={person}\n              type=\"friend\"\n              update={update}\n            />\n          );\n        })}\n    </div>\n  );\n}\n\nexport default FriendList;\n","import React, { useEffect, useState } from \"react\";\nimport axios from \"../../../../api\";\nimport { Box, Typography } from \"@material-ui/core\";\nimport People from \"../People\";\nimport { PersonAdd } from \"@material-ui/icons\";\n\nfunction FriendRequests({ update, changed }) {\n  const [friendRequests, setFriendRequests] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    (async () => {\n      const res = await axios.get(\"/friendRequest\");\n      setFriendRequests(res.data);\n      setLoading(false);\n    })();\n  }, [changed]);\n\n  return (\n    <Box my=\"1em\" >\n      <Typography variant=\"h6\" align=\"center\" color=\"primary\">\n        <PersonAdd style={{ marginRight: \"0.5em\" }} />\n        Friend Requests\n      </Typography>\n      {!loading && friendRequests.length === 0 && (\n        <Box px={5}>\n          <Typography variant=\"body1\" align=\"center\" color=\"textSecondary\">\n            When you have friend requests or suggestions, you'll see them here.\n          </Typography>\n        </Box>\n      )}\n      {!loading &&\n        friendRequests.length !== 0 &&\n        friendRequests.map((Requester) => {\n          return (\n            <People\n              key={Requester._id}\n              person={Requester}\n              type=\"friendRequest\"\n              update={update}\n            />\n          );\n        })}\n    </Box>\n  );\n}\n\nexport default FriendRequests;\n","import React, { useEffect } from \"react\";\nimport axios from \"../../../../api\";\nimport { Box, Typography } from \"@material-ui/core\";\nimport People from \"../People\";\nimport { useState } from \"react\";\nimport { HourglassEmptyOutlined } from \"@material-ui/icons\";\n\nfunction PendingFriendRequests({update,changed}) {\n  const [pendingFriendRequests, setPendingFriendRequests] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    (async () => {\n      const res = await axios.get(\"/friendRequest/pending\");\n      setPendingFriendRequests(res.data);\n            setLoading(false);\n\n    })();\n  }, [changed]);\n\n  return (\n    <Box my=\"1em\">\n      <Typography variant=\"h6\" align=\"center\" color=\"primary\">\n        <HourglassEmptyOutlined />\n        Pending Friend Requests\n      </Typography>\n      {!loading && pendingFriendRequests.length === 0 && (\n        <Box px={5}>\n          <Typography variant=\"body1\" align=\"center\" color=\"textSecondary\">\n            When you have pending friend requests, you'll see them here.\n          </Typography>\n        </Box>\n      )}\n      {!loading &&\n        pendingFriendRequests.length !== 0 &&\n        pendingFriendRequests.map((Requested) => {\n          return (\n            <People\n              key={Requested._id}\n              person={Requested}\n              type=\"pendingRequest\"\n              update={update}\n            />\n          );\n        })}\n    </Box>\n  );\n}\n\nexport default PendingFriendRequests;\n","import { Box, Typography } from \"@material-ui/core\";\nimport { EmojiPeople } from \"@material-ui/icons\";\nimport React, { useEffect, useState } from \"react\";\nimport axios from \"../../../../api\";\nimport People from \"../People\";\n\nfunction PeopleYouMayKnow({ update, changed }) {\n  const [peopleYouMayKnow, setPeopleYouMayKnow] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    (async () => {\n      const res = await axios.get(\"/peopleyoumayknow\");\n      setPeopleYouMayKnow(res.data);\n      setLoading(false);\n    })();\n  }, [changed]);\n\n  return (\n    <Box mt=\"1em\">\n      <Typography variant=\"h6\" align=\"center\" color=\"primary\">\n        <EmojiPeople />\n        People You May Know\n      </Typography>\n      {!loading && peopleYouMayKnow.length === 0 && (\n        <Box px={5}>\n          <Typography variant=\"body1\" align=\"center\" color=\"textSecondary\">\n            When you have friend's suggestions, you'll see them here.\n          </Typography>\n        </Box>\n      )}\n      {!loading &&\n        peopleYouMayKnow.length !== 0 &&\n        peopleYouMayKnow.map((Person) => {\n          return (\n            <People\n              key={Person._id}\n              person={Person}\n              type=\"unknown\"\n              update={update}\n            />\n          );\n        })}\n    </Box>\n  );\n}\n\nexport default PeopleYouMayKnow;\n","import { Divider } from \"@material-ui/core\";\nimport React, { useState } from \"react\";\nimport FriendRequests from \"./FriendRequests\";\nimport PendingFriendRequests from \"./PendingFriendRequests\";\nimport PeopleYouMayKnow from \"./PeopleYouMayKnow\";\n\nfunction FindFriends() {\n  const [changed, setChanged] = useState();\n\n  function update() {\n    setChanged(Math.random());\n  }\n  return (\n    <div\n      style={{\n        width: \"100%\",\n        overflowY: \"scroll\",\n        overflowX: \"hidden\",\n      }}\n    >\n      <FriendRequests changed={changed} update={update} />\n      <Divider variant=\"middle\" />\n      <PendingFriendRequests changed={changed} update={update} />\n      <Divider variant=\"middle\" />\n      <PeopleYouMayKnow changed={changed} update={update} />\n    </div>\n  );\n}\n\nexport default FindFriends;\n","import React, { useContext, useEffect, useState } from \"react\";\nimport axios from \"../../../api\";\nimport axiosMain from \"axios\";\nimport Conversation from \"./Conversation\";\nimport SocketContext from \"../../../context/SocketContext\";\n\nasync function getConversations(source) {\n  const res = await axios.get(`/conversations`, {\n    cancelToken: source?.token,\n  });\n  return res.data;\n}\n\nfunction ConversationsContainer() {\n  //contexts\n  const socket = useContext(SocketContext);\n\n  //states\n  const [conversations, setConversations] = useState([]);\n\n  function onMessageSend(listener) {\n    document.addEventListener(\"sendMessage\", listener);\n  }\n  function offMessageSend(listener) {\n    document.removeEventListener(\"sendMessage\", listener);\n  }\n\n  function moveRecentConversationToTop(msg) {\n    const message = msg.detail ? msg.detail : msg;\n\n    setConversations((prevConversations) => {\n      if (prevConversations.length === 0) {\n        getConversations().then((conversations) => {\n          setConversations(conversations);\n        });\n        return [];\n      }\n      const index = prevConversations.findIndex((conversation) => {\n        if (conversation?.with === message.recipient) {\n          return true;\n        }\n        return false;\n      });\n      const recentConversation = prevConversations.splice(index, 1)[0];\n      prevConversations.splice(0, 0, recentConversation);\n      return [...prevConversations];\n    });\n  }\n\n  useEffect(() => {\n    const CancelToken = axiosMain.CancelToken; //axiosMain is axios\n    const source = CancelToken.source();\n\n    getConversations(source).then((conversations) => {\n      setConversations(conversations);\n    });\n\n    onMessageSend(moveRecentConversationToTop);\n\n    socket.on(\"receive-message\", moveRecentConversationToTop);\n\n    return () => {\n      // Cancel request\n      source.cancel();\n      offMessageSend(moveRecentConversationToTop);\n      socket.off(\"receive-message\", moveRecentConversationToTop);\n    };\n  }, [socket]);\n\n  return (\n    <div\n      style={{\n        width: \"100%\",\n        height: \"100%\",\n        marginTop: \"0.5em\",\n        overflowY: \"scroll\",\n        overflowX: \"hidden\",\n      }}\n    >\n      {conversations.map((conversation) => (\n        <Conversation\n          key={conversation._id}\n          lastMessage={\n            conversation.messages.length &&\n            conversation.messages[conversation.messages.length - 1]\n          }\n          conversationWith={conversation.with}\n        />\n      ))}\n    </div>\n  );\n}\n\nexport default ConversationsContainer;\n","import { makeStyles, Tab, Tabs, Box } from \"@material-ui/core\";\nimport { Chat, GroupAdd, People } from \"@material-ui/icons\";\nimport React, { createContext, useState } from \"react\";\nimport FriendList from \"./FriendList\";\nimport FindFriends from \"./FindFriends/index\";\nimport ConversationsContainer from \"./ConversationsContainer\";\n\n//creating the contexts\nconst FriendListContext = createContext();\nconst MessagesContext = createContext();\nconst FriendRequestsContext = createContext();\nconst PendingFriendRequestsContext = createContext();\nconst PeopleYouMayKnowContext = createContext();\n\nconst useStyles = makeStyles({\n  tab: {\n    width: `${(1 / 3) * 100}%`,\n    \"@media (min-width: 600px)\": {\n      minWidth: \"60px\",\n    },\n  },\n});\n\nfunction SelectionMenu() {\n  const classes = useStyles();\n  const [index, setIndex] = useState(0);\n\n\n  const handleChange = (event, newIndex) => {\n    setIndex(newIndex);\n  };\n  return (\n    <>\n      <Box mt={2} boxShadow=\"rgb(145 158 171 / 24%) 0px 3px 8px 0px\" >\n        <Tabs\n          value={index}\n          onChange={handleChange}\n          variant=\"fullWidth\"\n          indicatorColor=\"primary\"\n          textColor=\"primary\"\n          aria-label=\"icon tabs example\"\n        >\n          <Tab className={classes.tab} icon={<Chat />} aria-label=\"phone\" />\n          <Tab\n            className={classes.tab}\n            icon={<People />}\n            aria-label=\"favorite\"\n          />\n          <Tab\n            className={classes.tab}\n            icon={<GroupAdd />}\n            aria-label=\"person\"\n          />\n        </Tabs>\n      </Box>\n      <TabPanel\n        components={[\n          <ConversationsContainer />,\n          <FriendList />,\n          <FindFriends />,\n        ]}\n        index={index}\n      />\n    </>\n  );\n}\n\nfunction TabPanel({ components, index }) {\n  return components[index];\n}\n\nexport default SelectionMenu;\nexport {\n  MessagesContext,\n  FriendListContext,\n  FriendRequestsContext,\n  PendingFriendRequestsContext,\n  PeopleYouMayKnowContext,\n};\n","import {\n  Box,\n  CircularProgress,\n  makeStyles,\n  Typography,\n  useTheme,\n} from \"@material-ui/core\";\nimport React, { useEffect, useRef, useState } from \"react\";\nimport axios from \"../../../../api\";\nimport axiosMain from \"axios\";\nimport People from \"../People\";\n\nconst useStyles = makeStyles((theme) => ({\n  searchResultsContainer: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n    position: \"absolute\",\n    overflowY: \"scroll\",\n    maxHeight: \"50vh\",\n    width: \"calc(100% - 2em)\",\n    margin: \"0 1em\",\n    left: \"0\",\n    padding: \"0.5em 0.2em 0.5em 0.5em\",\n    backgroundColor: theme.palette.background.paper,\n    borderRadius: \"0 0 10px 10px\",\n    zIndex: \"1000\",\n    boxShadow: \"rgb(145 158 171 / 10%) 0px 2px 5px 3px\",\n  },\n}));\n\nfunction SearchResults({ searchText }) {\n  const theme = useTheme();\n  const classes = useStyles();\n  const [searchResults, setSearchResults] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [changed, setChanged] = useState();\n  const searchResultsContainer = useRef();\n\n  function update() {\n    setChanged(Math.random());\n  }\n\n  useEffect(() => {\n    const cancelTokenSource = axiosMain.CancelToken.source();\n\n    async function getSearchResults(searchTerm) {\n      setLoading(true);\n      const res = await axios.get(`/search?search_term=${searchTerm}`, {\n        cancelToken: cancelTokenSource.token,\n      });\n      setLoading(false);\n      return res.data;\n    }\n\n    if (searchText) {\n      getSearchResults(searchText).then((results) => {\n        setSearchResults(results);\n      });\n    }\n\n    return () => {\n      cancelTokenSource.cancel();\n    };\n  }, [searchText]);\n\n  return (\n    <Box\n      className={classes.searchResultsContainer}\n      ref={searchResultsContainer}\n    >\n      {loading && (\n        <CircularProgress style={{ justifySelf: \"center\" }} size={30} />\n      )}\n      {searchText && !searchResults.length && !loading && (\n        <Typography\n          style={{ margin: \"0.5em\" }}\n          align=\"center\"\n          color=\"textSecondary\"\n        >\n          No Results Found!\n        </Typography>\n      )}\n\n      {/* friends */}\n      {searchResults?.map((person) => {\n        if (person.isFriend) {\n          return (\n            <People\n              key={person._id}\n              person={person}\n              type=\"friend\"\n              update={update}\n            />\n          );\n        }\n        return null;\n      })}\n\n      {/* more People (unknown persons) */}\n      {searchResults.some((person) => {\n        return !person.isFriend;\n      }) ? (\n        <>\n          <Typography\n            variant=\"body1\"\n            style={{\n              fontWeight: \"bold\",\n              margin: \"0.4em 0\",\n              marginLeft: \"0.8em\",\n              color: theme.palette.primary.main,\n            }}\n          >\n            More People\n          </Typography>\n          {searchResults?.map((person) => {\n            if (person.isRequestPending)\n              return (\n                <People\n                  key={person._id}\n                  type=\"pendingRequest\"\n                  person={person}\n                  update={update}\n                />\n              );\n            if (person.hasSentFriendRequest)\n              return (\n                <People\n                  key={person._id}\n                  type=\"friendRequest\"\n                  person={person}\n                  update={update}\n                />\n              );\n            if (!person.isFriend) {\n              return (\n                <People\n                  key={person._id}\n                  type=\"unknown\"\n                  person={person}\n                  update={update}\n                />\n              );\n            }\n            return null;\n          })}\n        </>\n      ) : null}\n    </Box>\n  );\n}\n\nexport default SearchResults;\n","import React, { useEffect, useRef, useState } from \"react\";\nimport { Box, IconButton, makeStyles } from \"@material-ui/core\";\nimport SearchResults from \"./SearchResults\";\nimport { Search } from \"@material-ui/icons\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    margin: \"1em\",\n  },\n  searchForm: {\n    display: \"flex\",\n    paddingLeft: \"1em\",\n    width: \"100%\",\n  },\n  searchInput: {\n    color: theme.palette.text.primary,\n    fontSize: \"1rem\",\n    background: \"transparent\",\n    outline: \"none\",\n    border: \"none\",\n    width: \"100%\",\n    \"&::placeholder\": {\n      color: theme.palette.text.secondary,\n      fontSize: \"1rem\",\n    },\n  },\n}));\n\nfunction SearchBox() {\n  const classes = useStyles();\n  const [searchText, setSearchText] = useState(\"\");\n  const [showSearchResults, setShowSearchResults] = useState(false);\n  //refs\n  const searchBoxRef = useRef();\n\n  function handleChange(e) {\n    setSearchText(e.target.value);\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    searchText && setShowSearchResults(true);\n  }\n\n  useEffect(() => {\n    searchText ? setShowSearchResults(true) : setShowSearchResults(false);\n  }, [searchText]);\n\n  function handleClickOutside(e) {\n    if (!searchBoxRef.current.contains(e.target)) {\n      setShowSearchResults(false);\n    }\n  }\n  useEffect(() => {\n    document.addEventListener(\"click\", handleClickOutside);\n    return () => {\n      document.removeEventListener(\"click\", handleClickOutside);\n    };\n  }, []);\n\n  return (\n    <>\n      <Box\n        className={classes.root}\n        borderRadius=\"5px\"\n        boxShadow=\"rgb(145 158 171 / 10%) 0px 2px 5px 3px\"\n        tabIndex=\"-1\"\n        onFocus={() => {\n          searchText && !showSearchResults && setShowSearchResults(true);\n        }}\n        ref={searchBoxRef}\n      >\n        <form className={classes.searchForm} onSubmit={handleSubmit}>\n          <input\n            className={classes.searchInput}\n            placeholder=\"Search...\"\n            value={searchText}\n            onFocus={() => {\n              searchText && setShowSearchResults(true);\n            }}\n            onChange={(e) => {\n              handleChange(e);\n            }}\n          />\n          <IconButton type=\"submit\">\n            <Search />\n          </IconButton>\n        </form>\n        {showSearchResults && <SearchResults searchText={searchText} />}\n      </Box>\n    </>\n  );\n}\n\nexport default SearchBox;\n","import React from \"react\";\nimport { Box, makeStyles } from \"@material-ui/core\";\nimport LogoutButton from \"./LogoutButton\";\nimport UserWithAvatar from \"./UserWithAvatar\";\nimport SelectionMenu from \"./SelectionMenu\";\nimport SearchBox from \"./SearchBox/index.jsx\";\nimport { useTheme } from \"@material-ui/styles\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    position: \"relative\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    maxWidth: \"400px\",\n    minWidth: \"400px\",\n    height: \"100vh\",\n    [theme.breakpoints.down(\"sm\")]: {\n      minWidth: \"100%\",\n    },\n  },\n}));\n\nfunction SideNavigation({ setShowChangeProfilePicture }) {\n  const theme = useTheme();\n  const classes = useStyles();\n  return (\n    <Box\n      className={classes.root}\n      borderRight={`2px solid ${theme.palette.grey[200]}`}\n    >\n      <Box\n        px={2}\n        py={3}\n        display=\"flex\"\n        alignItems=\"center\"\n        justifyContent=\"space-between\"\n      >\n        <UserWithAvatar\n          setShowChangeProfilePicture={setShowChangeProfilePicture}\n        />\n        <LogoutButton />\n      </Box>\n      <SearchBox />\n      <SelectionMenu />\n    </Box>\n  );\n}\n\nexport default SideNavigation;\n","import {\n  Avatar,\n  Box,\n  Button,\n  CircularProgress,\n  makeStyles,\n  Modal,\n  Typography,\n} from \"@material-ui/core\";\nimport { Image, Publish } from \"@material-ui/icons\";\nimport React, { useContext, useState } from \"react\";\nimport axios from \"../../api\";\nimport Alert from \"../Utils/Alert\";\nimport LoggedInUserContext from \"../../context/LoggedInUserContext\";\n\nconst useStyles = makeStyles((theme) => ({\n  modal: {\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n  },\n  modal__content: {\n    height: \"600px\",\n    width: \"400px\",\n    borderRadius: \"10px\",\n    backgroundColor: theme.palette.background.paper,\n    boxShadow: theme.shadows[5],\n    outline: \"none\",\n  },\n  avatar: {\n    margin: \"1em 0\",\n    height: \"170px\",\n    width: \"170px\",\n  },\n  btnsContainer: {\n    margin: \"1.5em 0\",\n  },\n  greetingText: {\n    marginTop: \"0.3em\",\n  },\n  infoText: {\n    fontSize: \"1.2rem\",\n  },\n  fullNameText: {\n    marginTop: \"1.5em\",\n    fontSize: \"1.8rem\",\n    fontWeight: \"bold\",\n    color: \"#2e2e2e\",\n  },\n  usernameText: {\n    marginTop: \"0.3em\",\n    marginBottom: \"0.8em\",\n    fontSize: \"1.4rem\",\n    fontWeight: \"500\",\n    color: \"#2e2e2e\",\n  },\n  btn: {\n    margin: \"0.5em 0\",\n    padding: \"0.5em\",\n    width: \"75%\",\n    \"&:last-child\": {\n      margin: \"3em 0\",\n    },\n  },\n}));\n\nfunction ChangeProfilePicture({ greeting, setShowChangeProfilePicture }) {\n  const classes = useStyles();\n  const { LoggedInUser, setLoggedInUser } = useContext(LoggedInUserContext);\n\n  //states\n  const [profilePicture, setProfilePicture] = useState(LoggedInUser.profilePic);\n  const [selectedImage, setSelectedImage] = useState();\n  const [open, setOpen] = useState(true);\n  const [uploading, setUploading] = useState(false);\n  const [alert, setAlert] = useState();\n\n  const showProfilePicture = (e) => {\n    const reader = new FileReader();\n    e.target.files[0] && reader.readAsDataURL(e.target.files[0]); //This reads the file as urlencoded base64 string.\n    reader.addEventListener(\"load\", () => {\n      setSelectedImage(reader.result);\n      setProfilePicture(reader.result);\n    });\n  };\n\n  async function uploadProfilePicture() {\n    if (selectedImage) {\n      try {\n        setUploading(true); //start the loading spinner\n        const res = await axios.post(\"/uploadprofilepic\", {\n          data: profilePicture,\n        });\n        setUploading(false); //stop the loading spinner\n        setAlert({\n          type: \"success\",\n          message: res.data.message,\n        });\n\n        //update the profilePic property of the LoggedInUserContext\n        setLoggedInUser((prev) => {\n          const userInfo = { ...prev };\n          userInfo.profilePic = res.data.profilePicURL;\n          return userInfo;\n        });\n        /*\n          alert completes at 2000 so waiting for alert to hide before closing/unmounting the modal.\n          After 2000ms the showAlert state is set to false. So if the modal is closed/unmounted\n          before the 2000ms, setState will be called after it. So error will occur \n          trying to setState of the component after unmount.\n        */\n        setTimeout(handleClose, 2100);\n      } catch (err) {\n        setAlert({\n          type: \"error\",\n          message: err.response?.data.message || err.message,\n        });\n        setUploading(false);\n      }\n    } else {\n      setAlert({ type: \"warning\", message: \"select image first\" });\n    }\n  }\n\n  function handleClose() {\n    setOpen(false);\n    setShowChangeProfilePicture && setShowChangeProfilePicture(false);\n  }\n\n  return (\n    <>\n      <Modal className={classes.modal} open={open}>\n        <Box\n          display=\"flex\"\n          flexDirection=\"column\"\n          alignItems=\"center\"\n          className={classes.modal__content}\n        >\n          {alert ? <Alert type={alert.type}>{alert.message}</Alert> : null}\n          <Typography\n            className={classes.fullNameText}\n            variant=\"h5\"\n            align=\"center\"\n          >\n            {LoggedInUser.firstName} {LoggedInUser.lastName}\n          </Typography>\n          <Typography\n            className={classes.usernameText}\n            variant=\"h6\"\n            align=\"center\"\n          >\n            @{LoggedInUser.username}\n          </Typography>\n          <Typography\n            className={`${classes.txtWhite} ${classes.infoText}`}\n            align=\"center\"\n          >\n            {greeting ? (\n              <>\n                Welcome to Messenger.\n                <br />\n                Set your Profile Picture to continue.\n              </>\n            ) : null}\n          </Typography>\n          <Avatar\n            className={classes.avatar}\n            src={profilePicture}\n            alt=\"avatar\"\n          />\n\n          {uploading ? <CircularProgress size=\"2rem\" /> : null}\n\n          {/* Image upload Input */}\n          <Box\n            display=\"flex\"\n            flexDirection=\"column\"\n            alignItems=\"center\"\n            width={1}\n            mt=\"auto\"\n            mb=\"2em\"\n          >\n            <input\n              accept=\"image/*\"\n              style={{ display: \"none\" }}\n              id=\"raised-button-file\"\n              type=\"file\"\n              onChange={showProfilePicture}\n            />\n\n            <Button\n              className={classes.btn}\n              variant=\"contained\"\n              component=\"label\"\n              htmlFor=\"raised-button-file\"\n              color=\"primary\"\n              endIcon={<Image />}\n            >\n              Choose\n            </Button>\n            <Button\n              className={classes.btn}\n              onClick={uploadProfilePicture}\n              variant=\"contained\"\n              component=\"span\"\n              color=\"primary\"\n              endIcon={<Publish />}\n            >\n              Upload\n            </Button>\n\n            {/* skip/close button */}\n            <Button\n              className={classes.btn}\n              variant=\"contained\"\n              color=\"secondary\"\n              onClick={handleClose}\n            >\n              {greeting ? \"Skip Now\" : \"Close\"}\n            </Button>\n          </Box>\n        </Box>\n      </Modal>\n    </>\n  );\n}\n\nexport default ChangeProfilePicture;\n","import React, { useEffect, useState } from \"react\";\nimport { CALLSTATES } from \".\";\n\nfunction updateTimer(startTime) {\n  let timeNow = new Date();\n  let timerHrs = timeNow.getHours() - startTime.getHours();\n  let timerMin = (() => {\n    let min = timeNow.getMinutes() - startTime.getMinutes();\n    if (min < 0) {\n      min = min + 60;\n      timerHrs--;\n    }\n    return min;\n  })();\n  let timerSec = (() => {\n    let sec = timeNow.getSeconds() - startTime.getSeconds();\n    if (sec < 0) {\n      sec = sec + 60;\n      timerMin--;\n    }\n    return sec;\n  })();\n  return `${timerHrs > 0 ? (\"0\" + timerHrs).slice(-2) + \":\" : \"\"}${(\n    \"0\" + timerMin\n  ).slice(-2)}:${(\"0\" + timerSec).slice(-2)}`; // format hrs:min:sec if hrs exits else  min:sec\n}\n\nfunction CallTimer({ callStartedTime, callState }) {\n  const [timer, setTimer] = useState();\n\n  useEffect(() => {\n    if (callStartedTime) {\n      setTimer(updateTimer(callStartedTime));\n      if (![CALLSTATES.HANGUP, CALLSTATES.CONNECTIONLOST].includes(callState)) {\n        const updateInterval = setInterval(() => {\n          setTimer(updateTimer(callStartedTime));\n        }, 1000);\n\n        return () => {\n          clearInterval(updateInterval);\n        };\n      }\n    }\n  }, [callStartedTime, callState]);\n\n  return <>{timer}</>;\n}\n\nexport default CallTimer;\n","import { useEffect } from \"react\";\n\nfunction useCallSounds(callState) {\n  useEffect(() => {\n    if (\n      callState &&\n      callState !== \"noAnswer\" &&\n      callState !== \"busy\" &&\n      callState !== \"ongoing\"\n    ) {\n      var audio = new Audio(`/sounds/${callState}.mp3`);\n      audio.load();\n      if (\n        callState === \"connecting\" ||\n        callState === \"ringing\" ||\n        callState === \"reconnecting\"\n      )\n        audio.loop = true;\n      audio.play();\n    }\n    return () => {\n      if (audio) audio.pause();\n    };\n  }, [callState]);\n}\n\nexport default useCallSounds;\n","import {\n  Avatar,\n  Box,\n  IconButton,\n  makeStyles,\n  Slide,\n  Typography,\n  useTheme,\n} from \"@material-ui/core\";\nimport { Call, CallEnd, Mic, MicOff, VideoCall } from \"@material-ui/icons\";\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { createRef } from \"react\";\nimport Timer from \"./CallTimer\";\nimport { CALLSTATES } from \".\"; //STRING CONSTANTS\nimport useCallSounds from \"./useCallSounds\";\n\nconst useStyles = makeStyles((theme) => ({\n  call_alert: {\n    width: \"fit-content\",\n    padding: \"1em\",\n    display: \"flex\",\n    alignItems: \"center\",\n    position: \"absolute\",\n    left: \"50%\",\n    transform: \"translateX(-50%) !important\",\n    top: \"5px\",\n    zIndex: \"2000\",\n    borderRadius: \"20px\",\n    backgroundColor: theme.palette.background.paper,\n  },\n\n  //ripple animation around Avatar\n  call_animation: {\n    width: \"3em\",\n    height: \"3em\",\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    position: \"relative\",\n    borderRadius: \"50%\",\n    animation: \"$ripple 2s ease infinite\",\n    webkitBackfaceVisibility: \"hidden\",\n    mozBackfaceVisibility: \"hidden\",\n    msBackfaceVisibility: \"hidden\",\n    backfaceVisibility: \"hidden\",\n  },\n\n  \"@keyframes ripple\": {\n    \"0%\": {\n      transform: \" scale(1)\",\n    },\n    \"15%\": {\n      boxShadow:\n        \"0 0 0 3px\" +\n        (theme.palette.type === \"dark\" ? \"#ffffff66\" : \"#aadff866\"),\n    },\n    \"25%\": {\n      boxShadow:\n        \" 0 0 0 5px\" +\n        (theme.palette.type === \"dark\" ? \"#ffffff66\" : \"#aadff866\") +\n        \", 0 0 0 10px\" +\n        (theme.palette.type === \"dark\" ? \"#ffffff33\" : \"#aadff833\"),\n    },\n  },\n  avatar: {\n    height: \"2.5em\",\n    width: \"2.5em\",\n  },\n  callerName: {\n    fontSize: \"1.1rem\",\n  },\n}));\n\nconst useButtonStyles = makeStyles((theme) => ({\n  button: {\n    marginLeft: \"0.2em\",\n    backgroundColor: theme.palette.background.default,\n  },\n  button_incoming: {\n    margin: \"0 0.2em\",\n    backgroundColor: theme.palette.background.default,\n    animation: \"$vibrate 100ms infinite alternate ease-in-out\",\n  },\n  \"@keyframes vibrate\": {\n    from: {\n      transform: \"rotateZ(-5deg) translateY(0px)\",\n    },\n    to: {\n      transform: \"rotateZ(5deg) translateY(1px)\",\n    },\n  },\n}));\n\nfunction CallStatus({ callState, callStartedTime }) {\n  const theme = useTheme();\n\n  const getTextColor = () => {\n    switch (callState) {\n      case CALLSTATES.CALLFAILED:\n      case CALLSTATES.CONNECTIONLOST:\n      case \"hangup\":\n        return theme.palette.error.main;\n      case CALLSTATES.NOANSWER:\n      case CALLSTATES.BUSY:\n        return theme.palette.warning.main;\n\n      default:\n        return theme.palette.text.secondary;\n    }\n  };\n  return (\n    <Typography\n      style={{ color: getTextColor() || theme.palette.text.secondary }}\n      variant=\"body1\"\n    >\n      {\n        {\n          connecting: \"connecting. . .\",\n          connected: \"connected\",\n          callFailed: \"call Failed!\",\n          calling: \"calling. . .\",\n          ringing: \"Incoming Call. . .\",\n          noAnswer: \"No Answer!\",\n          busy: \"Busy!\",\n          ongoing: (\n            <Timer callStartedTime={callStartedTime} callState={callState} />\n          ),\n          reconnecting: \"Reconnecting. . .\",\n          connectionLost: (\n            <span>\n              <Timer callStartedTime={callStartedTime} callState={callState} />\n              {\"\\tConnection Lost!\"}\n            </span>\n          ),\n          hangup: (\n            <span>\n              <Timer callStartedTime={callStartedTime} callState={callState} />\n              {\"\\tcall Ended!\"}\n            </span>\n          ),\n        }[callState]\n      }\n    </Typography>\n  );\n}\n\nfunction MicButton({ disabled, muted, setMuted }) {\n  const theme = useTheme();\n  const classes = useButtonStyles();\n  return (\n    <IconButton\n      className={classes.button}\n      disabled={disabled}\n      onClick={() => {\n        setMuted(!muted);\n      }}\n    >\n      {muted ? (\n        <MicOff htmlColor={theme.palette.grey[500]} />\n      ) : (\n        <Mic htmlColor={theme.palette.grey[500]} />\n      )}\n    </IconButton>\n  );\n}\n\nfunction RecallButton({ callType, callingUser }) {\n  const theme = useTheme();\n  const classes = useButtonStyles();\n  return (\n    <IconButton\n      className={classes.button_incoming}\n      onClick={() => {\n        const call = new CustomEvent(\"call\", {\n          detail: { callingUser, callType },\n        });\n        document.dispatchEvent(call);\n      }}\n    >\n      <Call htmlColor={theme.palette.success.main} />\n    </IconButton>\n  );\n}\nfunction AcceptCallButton({ callType }) {\n  const theme = useTheme();\n  const classes = useButtonStyles();\n  return (\n    <IconButton\n      className={classes.button_incoming}\n      onClick={() => {\n        const callAccepted = new CustomEvent(\"callAccepted\");\n        document.dispatchEvent(callAccepted);\n      }}\n    >\n      {\n        {\n          AudioCall: <Call htmlColor={theme.palette.success.main} />,\n          VideoCall: <VideoCall htmlColor={theme.palette.success.main} />,\n        }[callType]\n      }\n    </IconButton>\n  );\n}\n\nfunction EndCallButton() {\n  const theme = useTheme();\n  const classes = useButtonStyles();\n  return (\n    <IconButton\n      className={classes.button}\n      onClick={() => {\n        const callEnd = new CustomEvent(\"callEnd\");\n        document.dispatchEvent(callEnd);\n      }}\n    >\n      <CallEnd htmlColor={theme.palette.error.main} />\n    </IconButton>\n  );\n}\n\nfunction ActionButtons({ callType, callState, callingUser, muted, setMuted }) {\n  switch (true) {\n    case [\n      CALLSTATES.CONNECTING,\n      CALLSTATES.CONNECTED,\n      CALLSTATES.CALLING,\n      CALLSTATES.ONGOING,\n      CALLSTATES.RECONNECTING,\n    ].some((state) => state === callState):\n      return (\n        <>\n          <MicButton\n            disabled={callState !== CALLSTATES.ONGOING}\n            muted={muted}\n            setMuted={setMuted}\n          />\n          <EndCallButton />\n        </>\n      );\n\n    case [\n      CALLSTATES.CALLFAILED,\n      CALLSTATES.NOANSWER,\n      CALLSTATES.BUSY,\n      CALLSTATES.CONNECTIONLOST,\n    ].some((state) => state === callState):\n      return <RecallButton callType={callType} callingUser={callingUser} />;\n\n    case callState === CALLSTATES.RINGING:\n      return (\n        <>\n          <AcceptCallButton callType={callType} />\n          <EndCallButton />\n        </>\n      );\n    default:\n      return null;\n  }\n}\n\nfunction CallAlert({\n  direction,\n  callType,\n  callState,\n  callingUser,\n  remoteStream,\n  localStream,\n  callStartedTime,\n}) {\n  const classes = useStyles();\n  //refs\n  const alertRef = createRef(null);\n  const audioRef = useRef();\n  //states\n  const [muted, setMuted] = useState(false);\n\n  // call Sounds\n  useCallSounds(callState);\n\n  useEffect(() => {\n    if (localStream) {\n      localStream.getAudioTracks().forEach((track) => (track.enabled = !muted)); //toggle mic\n    }\n  }, [muted, localStream]);\n\n  useEffect(() => {\n    if (remoteStream) {\n      audioRef.current.srcObject = remoteStream;\n      audioRef.current.play();\n    }\n  }, [remoteStream]);\n\n  return (\n    <Slide\n      direction=\"down\"\n      in={true}\n      timeout={{ enter: 200, exit: 500 }}\n    >\n      <Box className={classes.call_alert} boxShadow={5} ref={alertRef}>\n        {remoteStream && <audio ref={audioRef} autoPlay={true} />}\n\n        <div className={classes.call_animation}>\n          <Avatar\n            className={classes.avatar}\n            src={callingUser.profilePic}\n            alt=\"user\"\n          />\n        </div>\n\n        <Box\n          mx=\"1em\"\n          style={{\n            //makes text unselectable\n            WebkitUserSelect: \"none\" /* Chrome all / Safari all */,\n            MozUserSelect: \"none\" /* Firefox all */,\n            msUserSelect: \"none\" /* IE 10+ */,\n            userSelect: \"none\",\n          }}\n        >\n          <CallStatus callState={callState} callStartedTime={callStartedTime} />\n\n          <Typography color=\"textPrimary\" style={{ fontSize: \"1.1em\" }}>\n            {callingUser.firstName} {callingUser.lastName}\n          </Typography>\n        </Box>\n\n        <ActionButtons\n          callState={callState}\n          callType={callType}\n          direction={direction}\n          muted={muted}\n          setMuted={setMuted}\n        />\n      </Box>\n    </Slide>\n  );\n}\n\nexport default CallAlert;\n","import { Box, IconButton, makeStyles } from \"@material-ui/core\";\nimport {\n  CallEnd,\n  Mic,\n  MicOff,\n  Videocam,\n  VideocamOff,\n} from \"@material-ui/icons\";\nimport React, { useRef } from \"react\";\n\nconst useStyles = makeStyles({\n  root: {\n    position: \"absolute\",\n    top: \"100%\",\n    transform: \"translateY(-100%)\",\n    marginTop: \"-2em\",\n  },\n  actionBtn: {\n    height: \"2.5em\",\n    width: \"2.5em\",\n    margin: \"0 0.8em\",\n    \"&:nth-child(1),&:nth-child(2)\": {\n      backgroundColor: \"#7c7c7c62\",\n      backdropFilter: \"blur(5px)\",\n      webkitBackdropFilter: \"blur(5px)\",\n    },\n    \"&:last-child\": {\n      backgroundColor: \"#ff0000\",\n      backdropFilter: \"blur(5px)\",\n      webkitBackdropFilter: \"blur(5px)\",\n    },\n  },\n});\n\nfunction ActionButtons({ muted, cameraEnabled, setMuted, setCameraEnabled }) {\n  const classes = useStyles();\n  const callEndRef = useRef(new Event(\"callEnd\"));\n\n  function endCall() {\n    const callEnd = callEndRef.current;\n    document.dispatchEvent(callEnd);\n  }\n\n  return (\n    <Box className={classes.root}>\n      <Box className={classes.ActionButtons}>\n        <IconButton\n          className={classes.actionBtn}\n          onClick={() => {\n            setCameraEnabled(!cameraEnabled);\n          }}\n        >\n          {cameraEnabled ? (\n            <Videocam htmlColor=\"white\" />\n          ) : (\n            <VideocamOff htmlColor=\"white\" />\n          )}\n        </IconButton>\n        <IconButton\n          className={classes.actionBtn}\n          onClick={() => {\n            setMuted(!muted);\n          }}\n        >\n          {muted ? <MicOff htmlColor=\"white\" /> : <Mic htmlColor=\"white\" />}\n        </IconButton>\n        <IconButton className={classes.actionBtn} onClick={endCall}>\n          <CallEnd htmlColor=\"white\" />\n        </IconButton>\n      </Box>\n    </Box>\n  );\n}\n\nexport default ActionButtons;\n","import {\n  Avatar,\n  Box,\n  IconButton,\n  makeStyles,\n  Typography,\n} from \"@material-ui/core\";\nimport { Fullscreen, FullscreenExit } from \"@material-ui/icons\";\nimport React, { useState } from \"react\";\nimport { CALLSTATES } from \".\";\nimport Timer from \"./CallTimer\";\n\nconst useStyles = makeStyles((theme) => ({\n  videoCallHeader: {\n    position: \"absolute\",\n    zIndex: \"1000\",\n    backgroundColor: \"#7c7c7c62\",\n    backdropFilter: \"blur(5px)\",\n    webkitBackdropFilter: \"blur(5px)\",\n    width: \"100%\",\n    padding: \"0.8em\",\n    alignSelf: \"stretch\",\n    display: \"flex\",\n    justifyContent: \"space-between\",\n  },\n  userInfoContainer: {\n    display: \"flex\",\n    alignItems: \"center\",\n    margin: \"0 0.5em\",\n  },\n  headerBtn: {\n    margin: \"0 0.5em\",\n  },\n  wrapper: {\n    color: \"#fff\",\n    marginLeft: \"1em\",\n  },\n  timer: {\n    color: theme.palette.grey[300],\n  },\n  avatar: {\n    height: \"2.3em\",\n    width: \"2.3em\",\n  },\n}));\n\nfunction VideoCallHeader({ callState, callingUser, callStartedTime }) {\n  const classes = useStyles();\n\n  const [fullScreen, setFullScreen] = useState(false);\n\n  function toggleFullScreen() {\n    if (!document.fullscreenElement) {\n      document.documentElement.requestFullscreen();\n      setFullScreen(true);\n    } else {\n      if (document.exitFullscreen) {\n        document.exitFullscreen();\n        setFullScreen(false);\n      }\n    }\n  }\n\n  return (\n    <Box className={classes.videoCallHeader}>\n      <Box className={classes.userInfoContainer}>\n        <Avatar className={classes.avatar} src={callingUser.profilePic} />\n        <Box className={classes.wrapper}>\n          <Typography variant=\"h6\" className={classes.username}>\n            {callingUser.firstName} {callingUser.lastName}\n          </Typography>\n          {callState === CALLSTATES.ONGOING && (\n            <Typography variant=\"subtitle2\" className={classes.timer}>\n              <Timer callStartedTime={callStartedTime} callState={callState} />\n            </Typography>\n          )}\n        </Box>\n      </Box>\n      <Box className={classes.headerBtnsContainer}>\n        <IconButton className={classes.headerBtn} onClick={toggleFullScreen}>\n          {fullScreen ? (\n            <FullscreenExit htmlColor=\"white\" />\n          ) : (\n            <Fullscreen htmlColor=\"white\" />\n          )}\n        </IconButton>\n      </Box>\n    </Box>\n  );\n}\n\nexport default VideoCallHeader;\n","import { Box, makeStyles } from \"@material-ui/core\";\nimport React from \"react\";\n\nconst useStyles = makeStyles({\n  videoContainer: {\n    height: \"100%\",\n    width: \"100%\",\n    \"&>video\": {\n      width: \"100%\",\n      height: \"100%\",\n      objectFit: \"contain\",\n    },\n  },\n  localVideoContainer: {\n    position: \"absolute\",\n    height: \"20vh\",\n    top: \"6em\",\n    right: \"1em\",\n    backgroundColor: \"white\",\n    \"&>video\": {\n      height: \"100%\",\n      width: \"100%\",\n      objectFit: \"contain\",\n    },\n  },\n});\n\nfunction VideoContainer({ localVideo, remoteVideo }) {\n  const classes = useStyles();\n  return (\n    <Box className={classes.videoContainer}>\n      <Box className={classes.localVideoContainer}>\n        <video ref={localVideo} autoPlay={true} muted={true} />\n      </Box>\n      <video ref={remoteVideo} autoPlay={true} />\n    </Box>\n  );\n}\n\nexport default VideoContainer;\n","import { Box, makeStyles } from \"@material-ui/core\";\nimport React, { useEffect, useRef, useState } from \"react\";\nimport ActionButtons from \"./ActionButtons\";\nimport VideoCallHeader from \"./VideoCallHeader\";\nimport VideoContainer from \"./VideoContainer\";\n\nconst useStyles = makeStyles({\n  root: {\n    position: \"absolute\",\n    zIndex: \"1000\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n    left: 0,\n    width: \"100%\",\n    height: \"100%\",\n    backgroundColor: \"black\",\n  },\n});\n\nfunction VideoCallScreen({\n  localStream,\n  remoteStream,\n  callState,\n  callingUser,\n  callStartedTime,\n}) {\n  const classes = useStyles();\n  const localVideo = useRef();\n  const remoteVideo = useRef();\n  const [muted, setMuted] = useState(false);\n  const [cameraEnabled, setCameraEnabled] = useState(true);\n\n  useEffect(() => {\n    remoteVideo.current.srcObject = remoteStream;\n    localVideo.current.srcObject = localStream;\n  }, [remoteStream, localStream]);\n\n  useEffect(() => {\n    function toggleMic() {\n      localStream.getAudioTracks().forEach((track) => (track.enabled = !muted));\n    }\n    toggleMic();\n  }, [muted, localStream]);\n\n  useEffect(() => {\n    function toggleCamera() {\n      localStream\n        .getVideoTracks()\n        .forEach((track) => (track.enabled = cameraEnabled));\n    }\n    toggleCamera();\n  }, [cameraEnabled, localStream]);\n\n  return (\n    <Box className={classes.root}>\n      <VideoCallHeader\n        callState={callState}\n        callingUser={callingUser}\n        callStartedTime={callStartedTime}\n      />\n      <VideoContainer localVideo={localVideo} remoteVideo={remoteVideo} />\n      <ActionButtons\n        muted={muted}\n        cameraEnabled={cameraEnabled}\n        setMuted={setMuted}\n        setCameraEnabled={setCameraEnabled}\n      />\n    </Box>\n  );\n}\n\nexport default VideoCallScreen;\n","import React, { useContext, useCallback, useEffect, useState } from \"react\";\nimport CallAlert from \"./CallAlert\";\nimport Peer from \"peerjs\";\nimport SocketContext from \"../../../context/SocketContext\";\nimport LoggedInUserContext from \"../../../context/LoggedInUserContext\";\nimport VideoCallScreen from \"./VideoCallScreen\";\n\nexport const CALLSTATES = {\n  CONNECTING: \"connecting\",\n  CONNECTED: \"connected\",\n  CALLFAILED: \"callFailed\",\n  CALLING: \"calling\",\n  RINGING: \"ringing\",\n  NOANSWER: \"noAnswer\",\n  BUSY: \"busy\",\n  ONGOING: \"ongoing\",\n  RECONNECTING: \"reconnecting\",\n  CONNECTIONLOST: \"connectionLost\",\n  HANGUP: \"hangup\",\n};\nexport const CALLDIRECTION = {\n  INCOMING: \"incoming\",\n  OUTGOING: \"outgoing\",\n};\nexport const CALLTYPE = {\n  AUDIOCALL: \"AudioCall\",\n  VIDEOCALL: \"VideoCall\",\n};\n\nfunction CallSection() {\n  const socket = useContext(SocketContext);\n  const { LoggedInUser } = useContext(LoggedInUserContext);\n  //states\n  const [remoteStream, setRemoteStream] = useState();\n  const [localStream, setLocalStream] = useState();\n  const [showVideoScreen, setShowVideoScreen] = useState(false);\n\n  /**\n   * *callStates\n   * callStates in outgoing call [\"connecting\",\"connected\",\"callFailed\",\"calling\",\"noAnswer\" , \"busy\" , \"ongoing\" ,\"reconnecting\", \"connectionLost\" ,\"hangup\"]\n   * callStates in incoming call [\"ringing\",\"ongoing\",\"reconnecting\",\"connectionLost\",\"hangup\"]\n   * * these callSates are in order in they occur.\n   */\n  const [callState, setCallState] = useState(); //\n  const [direction, setDirection] = useState();\n  const [callType, setCallType] = useState(); // AudioCall VideoCall\n  const [callingUser, setCallingUser] = useState(); //object it hold is in this shape {username,firstName,lastName,online,profilePic}\n  const [callStartedTime, setCallStartedTime] = useState(); // new Date();\n\n  const showCallAlert =\n    !(\n      direction === CALLDIRECTION.INCOMING &&\n      callState === CALLSTATES.CONNECTING\n    ) &&\n    callState &&\n    !showVideoScreen;\n\n  const resetStates = () => {\n    setShowVideoScreen(false);\n    setCallState();\n    setRemoteStream();\n    setLocalStream();\n    setDirection();\n    setCallType();\n    setCallingUser();\n    setCallStartedTime();\n  };\n\n  const call = (peer, remotePeerId, callType) => {\n    //call acknowledgement is received form the otherEnd.\n    navigator.mediaDevices\n      .getUserMedia({ video: callType === CALLTYPE.VIDEOCALL, audio: true })\n      .then((stream) => {\n        setLocalStream(stream);\n        setShowVideoScreen(callType === CALLTYPE.VIDEOCALL);\n        const call = peer.call(remotePeerId, stream);\n        setCallState(CALLSTATES.CALLING); //play calling tone in CallAlert component\n        call.on(\"stream\", (remoteStream) => {\n          //call is accepted by otherEnd\n          // Show stream in some <video> element if callType === videoCall\n          setRemoteStream(remoteStream);\n          setCallStartedTime(new Date()); //start call timer\n          setCallState(CALLSTATES.ONGOING);\n        });\n      })\n      .catch((err) => {\n        setCallState(CALLSTATES.CALLFAILED);\n        console.error(\"Failed to get local stream\", err);\n      });\n  };\n\n  const acceptCall = (call, callType) => {\n    navigator.mediaDevices\n      .getUserMedia({ video: callType === CALLTYPE.VIDEOCALL, audio: true })\n      .then((stream) => {\n        call.answer(stream); // Answer the call with an A/V stream.\n        setLocalStream(stream);\n        call.on(\"stream\", (remoteStream) => {\n          setCallStartedTime(new Date()); //start call timer\n          setCallState(CALLSTATES.ONGOING);\n          // Show stream in some <video> element.\n          setRemoteStream(remoteStream);\n          setShowVideoScreen(callType === CALLTYPE.VIDEOCALL);\n        });\n      })\n      .catch((err) => {\n        setCallState(CALLSTATES.CALLFAILED);\n        console.error(\"Failed to get local stream\", err);\n      });\n  };\n\n  const handleCall = useCallback(\n    (e) => {\n      const callDirection = e.detail\n        ? CALLDIRECTION.OUTGOING\n        : CALLDIRECTION.INCOMING;\n      const callType = e.detail?.callType || e.callType;\n      setDirection(callDirection);\n      setCallingUser(e.detail?.userInfo || e.caller);\n      setCallType(callType);\n      setCallState(CALLSTATES.CONNECTING); //show CallAlert component\n\n      const peer = new Peer(); //creating new peer\n      peer.on(\"open\", function (peerId) {\n        if (callDirection === CALLDIRECTION.OUTGOING) {\n          const userInfo = e.detail.userInfo; //this person\n          socket.emit(\"outgoingCall\", peerId, userInfo, callType);\n          socket.on(\n            \"acknowledgedCall\",\n            (remotePeerId, caller, receiver, ackCallType) => {\n              if (\n                caller.username === LoggedInUser.username &&\n                receiver === userInfo.username &&\n                ackCallType === callType\n              ) {\n                setCallState(CALLSTATES.CONNECTED); //play call connected sound in CallAlert component\n                call(peer, remotePeerId, callType);\n              }\n            }\n          );\n        } else {\n          setCallType(e.callType);\n          setCallState(CALLSTATES.RINGING); //play ringtone\n          socket.emit(\n            \"callAcknowledged\",\n            peerId,\n            e.caller,\n            LoggedInUser.username,\n            e.callType\n          );\n        }\n      });\n\n      function callHandler(call) {\n        setCallState(CALLSTATES.RINGING); //play ringtone\n        document.addEventListener(\"callAccepted\", () => {\n          acceptCall(call, callType);\n        });\n      }\n      //answer call\n      peer.on(\"call\", callHandler);\n    },\n    [socket, LoggedInUser]\n  );\n\n  //stopping the mic and camera streams.\n  const stopStreams = useCallback(() => {\n    remoteStream?.getTracks().forEach((tracks) => tracks.stop());\n    localStream?.getTracks().forEach((tracks) => tracks.stop());\n  }, [remoteStream, localStream]);\n\n  const endCall = useCallback(\n    function () {\n      if (this !== socket) {\n        callState === CALLSTATES.RINGING\n          ? socket.emit(\"callRejected\", callingUser)\n          : socket.emit(\"callEnd\", callingUser);\n      } //if it is called by socket.on() no need to emit. This happens when otherEnd ends the call. So no need to tell otherEnd the call has ended.\n      setCallState(CALLSTATES.HANGUP);\n      stopStreams();\n      setTimeout(resetStates, 2000); //wait 2 sec before everything is clear so callEnd sound and callended info can be shown.\n    },\n    [socket, callingUser, callState, stopStreams]\n  );\n\n  useEffect(() => {\n    switch (callState) {\n      //for callFailed\n      case CALLSTATES.CONNECTING:\n        var callFailTimeOut = setTimeout(() => {\n          setCallState(CALLSTATES.CALLFAILED);\n          setTimeout(resetStates, 3000);\n        }, 10000);\n        break;\n\n      //for noAnswer\n      case CALLSTATES.RINGING:\n        var noAnswerTimeOut = setTimeout(() => {\n          socket.emit(\"noAnswer\", callingUser);\n          resetStates();\n        }, 10000);\n        break;\n      case CALLSTATES.NOANSWER:\n      case CALLSTATES.BUSY:\n        setTimeout(resetStates, 3000);\n        stopStreams();\n        break;\n\n      default:\n        break;\n    }\n\n    return () => {\n      clearTimeout(callFailTimeOut);\n      clearTimeout(noAnswerTimeOut);\n    };\n  }, [socket, callState, callingUser, stopStreams]);\n\n  useEffect(() => {\n    socket.on(\"incomingCall\", handleCall);\n    socket.on(\"callEnd\", endCall);\n    socket.on(\"noAnswer\", () => {\n      setCallState(CALLSTATES.NOANSWER);\n    });\n    socket.on(\"callRejected\", () => {\n      setCallState(CALLSTATES.BUSY);\n    });\n    socket.on(\"userBusy\", (busyUser) => {\n      callingUser === busyUser && setCallState(CALLSTATES.BUSY);\n    });\n\n    document.addEventListener(\"call\", handleCall);\n    document.addEventListener(\"callEnd\", endCall);\n    return () => {\n      document.removeEventListener(\"call\", handleCall);\n      document.removeEventListener(\"callEnd\", endCall);\n      socket.off(\"incomingCall\", handleCall);\n      socket.off(\"callEnd\", endCall);\n    };\n  }, [socket, callingUser, handleCall, endCall]);\n\n  return (\n    <>\n      {showCallAlert && (\n        <CallAlert\n          direction={direction}\n          callType={callType}\n          callingUser={callingUser}\n          callState={callState}\n          callStartedTime={callStartedTime}\n          //AudioCall is handled in this component\n          remoteStream={remoteStream}\n          localStream={localStream}\n        />\n      )}\n\n      {showVideoScreen && (\n        <VideoCallScreen\n          localStream={localStream}\n          remoteStream={remoteStream}\n          callState={callState}\n          callingUser={callingUser}\n          callStartedTime={callStartedTime}\n        />\n      )}\n    </>\n  );\n}\n\nexport default CallSection;\n","import { Box, useMediaQuery, useTheme } from \"@material-ui/core\";\nimport React, { useEffect, useState } from \"react\";\nimport { decodeToken } from \"react-jwt\";\nimport { io } from \"socket.io-client\";\nimport ChatSection from \"./ChatSection/index\";\nimport SideNavigation from \"./SideNavigation/index\";\nimport ChangeProfilePicture from \"./ChangeProfilePicture\";\nimport config from \"../../backendConfig\";\nimport SocketContext from \"../../context/SocketContext\";\nimport LoggedInUserContext from \"../../context/LoggedInUserContext\";\nimport { Route } from \"react-router\";\nimport CallSection from \"./CallSection\";\nimport axiosInstance from \"../../api\";\n\nfunction MessengerPage() {\n  const token = localStorage.getItem(\"accesstoken\");\n\n  //setting up socket\n  const socket = io(config.wsAddress, {\n    auth: { token },\n  });\n\n  // getting user detail from token\n  const user = decodeToken(token);\n\n  const theme = useTheme();\n  const [showChangeProfilePicture, setShowChangeProfilePicture] =\n    useState(false);\n  const [showGreeting, setShowGreeting] = useState(false);\n\n  const notMediumScreen = useMediaQuery(theme.breakpoints.down(\"sm\"));\n\n  useEffect(() => {\n    socket.on(\"connect\", () => {\n      console.log(\"socket connected\");\n    });\n\n    socket.on(\"disconnect\", () => {\n      console.log(\"socket disconnected!\");\n    });\n\n    axiosInstance.get(`/userinfo/${user.username}`).then((response) => {\n      const user = response.data;\n      if (user.newUser) {\n        setShowChangeProfilePicture(true);\n        setShowGreeting(true);\n      }\n    });\n\n    //clean up\n    return () => {\n      socket.disconnect();\n    };\n  }, [socket, user.username]);\n\n  const [LoggedInUser, setLoggedInUser] = useState(user);\n  const value = { LoggedInUser, setLoggedInUser };\n\n  return (\n    <SocketContext.Provider value={socket}>\n      <LoggedInUserContext.Provider value={value}>\n        <Box\n          display=\"flex\"\n          minHeight={\"100vh\"}\n          position=\"relative\"\n          bgcolor={theme.palette.background.default}\n        >\n          {showChangeProfilePicture && (\n            <ChangeProfilePicture\n              greeting={showGreeting}\n              setShowChangeProfilePicture={setShowChangeProfilePicture}\n            />\n          )}\n\n          {notMediumScreen ? (\n            <>\n              <Route path=\"/messenger\" exact>\n                <SideNavigation\n                  setShowChangeProfilePicture={setShowChangeProfilePicture}\n                />\n              </Route>\n              <Route path=\"/messenger/:username\" exact>\n                <ChatSection />\n              </Route>\n            </>\n          ) : (\n            <>\n              <SideNavigation\n                setShowChangeProfilePicture={setShowChangeProfilePicture}\n              />\n              <Route path=\"/messenger/:username?\">\n                <ChatSection />\n              </Route>\n            </>\n          )}\n\n          <CallSection />\n        </Box>\n      </LoggedInUserContext.Provider>\n    </SocketContext.Provider>\n  );\n}\nexport default MessengerPage;\n","import { Redirect } from \"react-router-dom\";\n\nfunction ProtectedRoute({ children }) {\n  const token = localStorage.getItem(\"accesstoken\");\n\n  return token ? children : <Redirect to=\"/login\" />;\n}\n\nexport default ProtectedRoute;\n","import { createMuiTheme } from \"@material-ui/core\";\nimport { ThemeProvider } from \"@material-ui/styles\";\nimport React from \"react\";\nimport { BrowserRouter, Route, Switch } from \"react-router-dom\";\nimport LoginPage from \"./components/LoginPage\";\nimport MessengerPage from \"./components/MessengerPage\";\nimport ProtectedRoute from \"./components/ProtectedRoute\";\n\nconst theme = createMuiTheme({\n  palette: {\n    type: \"light\",\n    primary: {\n      main: \"#00ab55\",\n    },\n    background: {\n      paper: \"#fff\",\n      default: \"#fff\",\n    },\n  },\n  breakpoints: {\n    values: {\n      xs: 0,\n      sm: 600,\n      md: 900,\n      lg: 1280,\n      xl: 1920,\n    },\n  },\n});\n\nexport default function App() {\n  return (\n    <BrowserRouter>\n      <ThemeProvider theme={theme}>\n        <Switch>\n          <Route path={[\"/\", \"/login\", \"/signup\"]} exact>\n            <LoginPage />\n          </Route>\n          <Route path=\"/messenger/:username?\">\n            <ProtectedRoute>\n              <MessengerPage />\n            </ProtectedRoute>\n          </Route>\n        </Switch>\n      </ThemeProvider>\n    </BrowserRouter>\n  );\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}